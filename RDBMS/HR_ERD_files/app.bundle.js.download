define(["pgadmin.browser.endpoints","pgadmin.browser.messages","pgadmin.browser.utils","pgadmin.server.supported_servers","pgadmin.user_management.current_user","translations"],((e,t,n,a,r,i)=>(()=>{"use strict";var o={85974:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=function(e,t){e.Nodes["coll-external_table"]||(e.Nodes["coll-external_table"]=e.Collection.extend({node:"external_table",label:t("External Tables"),type:"coll-external_tables",columns:["name","fdwowner","description"]}));e.Nodes.external_table||(e.Nodes.external_table=e.Node.extend({parent_type:"database",type:"external_table",label:t("External Table"),collection_type:"coll-external_table",hasSQL:!0,model:e.Node.Model.extend({defaults:{name:void 0,type:void 0,encoding:void 0,format_type:void 0,format_option:void 0,external_options:void 0,command:void 0,execute_on:void 0},schema:[{id:"name",label:t("Name"),type:"text",mode:["properties"]},{id:"type",label:t("Type"),type:"text",mode:["properties"]},{id:"encoding",label:t("Encoding"),type:"text",mode:["properties"]},{id:"format_type",label:t("Format Type"),type:"text",mode:["properties"]},{id:"format_option",label:t("Format Options"),type:"text",mode:["properties"]},{id:"external_options",label:t("External Options"),type:"text",mode:["properties"]},{id:"command",label:t("Command"),type:"text",mode:["properties"]},{id:"execute_on",label:t("Execute on"),type:"text",mode:["properties"]}]})}));return e}},60043:(e,t,n)=>{var a=i(n(58894)),r=i(n(91669));function i(e){return e&&e.__esModule?e:{default:e}}var o=(0,n(85974).initialize)(a.default,r.default);e.exports={pgBrowser:o}},14511:(e,t,n)=>{var a,r;n(26699),n(82772),n(74916),n(32023),n(15306),n(73210),n(32564),n(71151),n(39538),n(90491),n(72126),n(5878),n(24482),n(11769),n(24149),n(9750),n(59719),n(96193),n(43e3),n(9822),n(10083),n(43311),n(47271),n(84835),n(65379),n(34175),n(65010),n(32032),n(8118),n(19101),n(2384),n(53394),n(44639),n(25142),n(83666),n(78924),n(54553),n(90580),n(46318),n(16119),n(48801),n(52629),n(33231),n(62984),n(89619),n(92545),n(81353),n(96311),n(65239),n(58837),n(48663),n(26456),n(18897),n(14496),n(23742),n(25365),n(43815),n(95941),n(69610),n(65228),n(78529),a=[n(91669),n(28008),n(19755),n(64492),n(55455),n(55112),n(20811),n(81240),n(72316),n(52934),n(7167),n(14953),n(9807),n(44092),n(35816)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c,u,p,f){var g=window.wcDocker,b=i.Browser;return i.DataGrid||(i.DataGrid=a.extend({init:function(){if(!this.initialized){this.initialized=!0,this.title_index=1;var t=this,n=setInterval((function(){b.preference_version()>0&&(t.preferences=b.get_preferences_for_module("sqleditor"),clearInterval(n))}),0);b.onPreferencesChange("sqleditor",(function(){t.preferences=b.get_preferences_for_module("sqleditor")}));for(var r=["table","view","mview","foreign_table","catalog_object","partition"],o=function(t){var n=!a.isUndefined(t)&&!a.isNull(t)&&-1!==a.indexOf(r,t._type);return u.enable(e("View Data"),n),u.enable(e("Filtered Rows"),n),n},s=[{name:"query_tool",module:this,applies:["tools"],callback:"show_query_tool",enable:function(t){var n=!(a.isUndefined(t)||a.isNull(t)||-1!=a.indexOf(i.unsupported_nodes,t._type)||("database"!=t._type||!t.allowConn)&&"database"==t._type);return u.enable(e("Query Tool"),n),n},priority:1,label:e("Query Tool"),icon:"pg-font-icon icon-query_tool",data:{data_disabled:e("Please select a database from the browser tree to access Query Tool.")}}],l=0;l<r.length;l++)s.push({name:"view_all_rows_context_"+r[l],node:r[l],module:this,data:{mnuid:3},applies:["context","object"],callback:"show_data_grid",enable:o,category:"view_data",priority:101,label:e("All Rows")},{name:"view_first_100_rows_context_"+r[l],node:r[l],module:this,data:{mnuid:1},applies:["context","object"],callback:"show_data_grid",enable:o,category:"view_data",priority:102,label:e("First 100 Rows")},{name:"view_last_100_rows_context_"+r[l],node:r[l],module:this,data:{mnuid:2},applies:["context","object"],callback:"show_data_grid",enable:o,category:"view_data",priority:103,label:e("Last 100 Rows")},{name:"view_filtered_rows_context_"+r[l],node:r[l],module:this,data:{mnuid:4},applies:["context","object"],callback:"show_filtered_row",enable:o,category:"view_data",priority:104,label:e("Filtered Rows...")});i.Browser.add_menu_category("view_data",e("View/Edit Data"),100,""),i.Browser.add_menus(s),new i.Browser.Frame({name:"frm_datagrid",showTitle:!0,isCloseable:!0,isRenamable:!0,isPrivate:!0,url:"about:blank"}).load(b.docker),this.on("pgadmin-datagrid:transaction:created",(function(e){this.launch_grid(e)}))}},show_data_grid:function(e,t){var n=f.getRandomInt(1,9999999);d.showDataGrid(this,b,r,e,t,n)},show_filtered_row:function(e,t){var n=f.getRandomInt(1,9999999);d.showDataGrid(this,b,r,e,t,n,!0,this.preferences)},show_query_tool:function(e,t){var n=f.getRandomInt(1,9999999);c.showQueryTool(this,b,r,e,t,n)},launch_grid:function(i,o,s,l){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,h='\n          <form id="queryToolForm" action="'.concat(o,'" method="post">\n            <input id="title" name="title" hidden />');u&&(h+='<input name="query_url" value="'.concat(u,'" hidden />')),f&&(h+='<textarea name="sql_filter" hidden>'.concat(f,"</textarea>")),h+='\n          </form>\n            <script>\n              document.getElementById("title").value = "'.concat(a.escape(l.replace("\\","\\\\")),'";\n              document.getElementById("queryToolForm").submit();\n            <\/script>\n          ');var m=b.get_preferences_for_module("browser"),_=m.new_browser_tab_open;if(_&&_.includes("qt")){var v=window.open("","_blank");if(!v)return!1;v.document.write(h),v.document.title=l}else{var y=b.docker.findPanels("properties"),w=b.docker.addPanel("frm_datagrid",g.DOCK.STACKED,y[0]);c._set_dynamic_tab(b,m.dynamic_tabs),p.setQueryToolDockerTitle(w,s,a.unescape(l)),w.focus(),w.on(g.EVENT.CLOSED,(function(){n.ajax({url:t("datagrid.close",{trans_id:i}),method:"DELETE"})})),w.on(g.EVENT.RENAME,(function(t){var n=t.$titleText[0].textContent,i=!!w.is_dirty_editor&&w.is_dirty_editor,o=w.is_dirty_editor?t.$titleText[0].textContent.replace(/.$/,""):n;r.prompt("",o,(function(e,n){if(n=n.trim()){var r=!1;t.$titleText[0].innerHTML.includes("File - ")&&(r=!0);var o=b.treeMenu.selected(),l="";l=s?p.getPanelTitle(b,o,n):d.generateDatagridTitle(b,o,n),i&&(l+=" *"),p.setQueryToolDockerTitle(w,s,a.unescape(l),r)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}));var x=function(e){var t=n('<div class="pg-sp-container">\n                    <div class="pg-sp-content">\n                        <div class="row">\n                            <div class="col-12 pg-sp-icon"></div>\n                        </div>\n                    </div>\n                </div>').appendTo(n(e).data("embeddedFrame").$container),a=setInterval((function(){if(n(e).data("frameInitialized")){clearInterval(a);var r=n(e).data("embeddedFrame");r&&(r.onLoaded((function(){t.remove()})),r.openHTML(h))}}),100)};x(w)}return!0}},l.Events)),i.DataGrid}.apply(t,a))||(e.exports=r)},66539:(e,t,n)=>{var a,r;n(70655),n(76310),n(58386),n(34408),n(92887),n(45736),n(49525),n(86695),n(87113),n(92959),n(22074),n(26814),n(23792),n(44316),n(26889),n(95566),a=[n(58894),n(84059),n(10474)],void 0===(r=function(e){e.init()}.apply(t,a))||(e.exports=r)},53673:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.disableTriggers=function(e,t,n,a){return i(e,t,n,a,{is_enable_trigger:"D"})},t.enableTriggers=function(e,t,n,a){return i(e,t,n,a,{is_enable_trigger:"O"})};var a,r=(a=n(9669))&&a.__esModule?a:{default:a};function i(e,t,n,a,i){var o=function(e,t){var n=(e||{}).item||t.selected();return t.findNodeByDomElement(n)}(a,e);if(!o||null===o.getData()||void 0===o.getData())return!1;r.default.put(n(o.getHtmlIdentifier(),"set_trigger",o.getData(),!0),i).then((function(n){1===n.data.success&&(t.success(n.data.info),o.reload(e))})).catch((function(n){try{var a=n.response.data;0===a.success&&t.error(a.errormsg)}catch(e){console.warn(e.stack||e)}o.unload(e)}))}},48982:(e,t,n)=>{var a,r;n(57327),n(82772),n(21249),n(5212),n(68309),n(74916),n(15306),n(23123),n(32564),a=[n(91669),n(19755),n(64492),n(72316),n(58894),n(12030),n(71158),n(50159)],void 0===(r=function(e,t,n,a,r,i,o){o.PartitionRow=o.Row.extend({modelDuplicateClass:"bg-model-duplicate",initialize:function(){o.Row.prototype.initialize.apply(this,arguments);var e=this;e.model.on("change:is_attach",(function(){setTimeout((function(){e.columns.each((function(t){if("partition_name"==t.get("name")){var n=e.columns.indexOf(t),a=new(t.get("cellFunction").apply(t,[e.model]))({column:t,model:e.model});e.cells[n].remove(),e.cells[n]=a,e.render()}}))}),10)})),e.listenTo(e.model,"pgadmin-session:model:duplicate",e.modelDuplicate),e.listenTo(e.model,"pgadmin-session:model:unique",e.modelUnique)},modelDuplicate:function(){t(this.el).removeClass("new"),t(this.el).addClass(this.modelDuplicateClass)},modelUnique:function(){t(this.el).removeClass(this.modelDuplicateClass)}});i.PartitionKeyModel=r.Node.Model.extend({defaults:{key_type:"column",pt_column:void 0,expression:void 0},keys:["pt_column"],schema:[{id:"key_type",label:e("Key type"),type:"select2",editable:!0,cell:"select2",cellHeaderClasses:"width_percent_25",select2:{allowClear:!1},options:[{label:e("Column"),value:"column"},{label:e("Expression"),value:"expression"}]},{id:"pt_column",label:e("Column"),type:"text",cell:o.Extension.Select2DepCell.extend({keyPathAccessor:function(e,t){var a=e;if(n.isArray(a))return n.map(a,(function(e){return e.pt_column}));t=t.split(".");for(var r=0;r<t.length;r++){if(n.isNull(a))return null;n.isEmpty(t[r])||(n.isUndefined(a[t[r]])||(a=a[t[r]]))}return n.isObject(a)&&!n.isArray(a)?null:a},initialize:function(){var e=this;if(this.model.handler){if(o.Extension.Select2DepCell.prototype.initialize.apply(this,arguments),n.isUndefined(e.model.get("oid"))){var t=e.model.top.get("columns");e.listenTo(t,"remove",e.resetColOptions),e.listenTo(t,"change:name",e.resetColOptions)}e.custom_options()}},resetColOptions:function(){var e=this;setTimeout((function(){e.custom_options(),e.render.apply(e)}),50)},custom_options:function(){var e=this.model.top.get("columns"),t=this.model.top.get("typname"),a=this.model.top.of_types_tables,r=[];e.length>0?n.each(e.models,(function(e){var t=e.get("name");n.isUndefined(t)||n.isNull(t)||r.push({label:t,value:t,image:"icon-column"})})):!n.isUndefined(t)&&!n.isNull(t)&&!n.isUndefined(a)&&a.length>0&&n.each(a,(function(e){e.label==t&&n.each(e.oftype_columns,(function(e){r.push({label:e.name,value:e.name,image:"icon-column"})}))})),this.column.set("options",r)},remove:function(){if(this.model.handler){var e=this,t=e.model.top.get("columns");e.stopListening(t,"remove",e.resetColOptions),e.stopListening(t,"change:name",e.resetColOptions),o.Extension.Select2DepCell.prototype.remove.apply(this,arguments)}}}),deps:["key_type"],cellHeaderClasses:"width_percent_30",transform:function(e){var t=[];return e&&n.isArray(e)&&n.each(e,(function(e){t.push({label:e.label,value:e.label,image:"icon-column"})})),t},select2:{allowClear:!1},editable:function(e){return"expression"!=e.get("key_type")||(setTimeout((function(){e.set("pt_column",void 0)}),10),!1)}},{id:"expression",label:e("Expression"),type:"text",cell:o.Extension.StringDepCell,cellHeaderClasses:"width_percent_45",deps:["key_type"],editable:function(e){return"column"!=e.get("key_type")||(setTimeout((function(){e.set("expression",void 0)}),10),!1)}}],validate:function(){var t,a=this.get("key_type"),r=this.get("pt_column"),i=this.get("expression");return this.errorModel.clear(),n.isUndefined(a)||n.isNull(a)||""==String(a).replace(/^\s+|\s+$/g,"")?(t=e("Partition key type cannot be empty."),this.errorModel.set("key_type",t),t):"column"==a&&n.isUndefined(r)||n.isNull(r)||""==String(r).replace(/^\s+|\s+$/g,"")?(t=e("Partition key column cannot be empty."),this.errorModel.set("pt_column",t),t):"expression"==a&&n.isUndefined(i)||n.isNull(i)||""==String(i).replace(/^\s+|\s+$/g,"")?(t=e("Partition key expression cannot be empty."),this.errorModel.set("expression",t),t):null}}),i.PartitionsModel=r.Node.Model.extend({idAttribute:"oid",defaults:{oid:void 0,is_attach:!1,partition_name:void 0,is_default:void 0,values_from:void 0,values_to:void 0,values_in:void 0,values_modulus:void 0,values_remainder:void 0,is_sub_partitioned:!1,sub_partition_type:"range"},keys:["partition_name"],schema:[{id:"oid",label:e("OID"),type:"text",mode:["properties"]},{id:"is_attach",label:e("Operation"),cell:"switch",type:"switch",options:{onText:e("Attach"),offText:e("Create"),width:65},cellHeaderClasses:"width_percent_5",editable:function(e){return!(!(e instanceof a.Model&&e.isNew())||e.top.isNew())},disabled:function(e){return!(e instanceof a.Model&&e.isNew()&&!e.top.isNew())}},{id:"partition_name",label:e("Name"),type:"text",cell:"string",cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e instanceof a.Model&&e.isNew())},cellFunction:function(e){if(e.get("is_attach")){var t=[];return e.set({partition_name:void 0},{silent:!0}),n.each(e.top.table_options,(function(e){t.push([e.label,e.value])})),o.Extension.Select2Cell.extend({optionValues:t})}return o.StringCell},disabled:function(e){return!(e instanceof a.Model&&e.isNew())}},{id:"is_default",label:e("Default"),type:"switch",cell:"switch",cellHeaderClasses:"width_percent_5",min_version:11e4,options:{onText:e("Yes"),offText:e("No")},editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&("range"===e.handler.top.attributes.partition_type||"list"===e.handler.top.attributes.partition_type)&&e instanceof a.Model&&e.isNew()&&e.handler.top.node_info.server.version>=11e4)},disabled:function(e){return!(e.handler&&e.handler.top&&e.handler.top.attributes&&("range"===e.handler.top.attributes.partition_type||"list"===e.handler.top.attributes.partition_type)&&e instanceof a.Model&&e.isNew()&&e.handler.top.node_info.server.version>=11e4)}},{id:"values_from",label:e("From"),type:"text",cell:o.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"range"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew()&&!0!==e.get("is_default"))},disabled:function(e){return!(e.handler&&e.handler.top&&e.handler.top.attributes&&"range"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew()&&!0!==e.get("is_default"))}},{id:"values_to",label:e("To"),type:"text",cell:o.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"range"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew()&&!0!==e.get("is_default"))},disabled:function(e){return!(e.handler&&e.handler.top&&e.handler.top.attributes&&"range"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew()&&!0!==e.get("is_default"))}},{id:"values_in",label:e("In"),type:"text",cell:o.Extension.StringDepCell,deps:["is_default"],cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"list"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew()&&!0!==e.get("is_default"))},disabled:function(e){return!(e.handler&&e.handler.top&&e.handler.top.attributes&&"list"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew()&&!0!==e.get("is_default"))}},{id:"values_modulus",label:e("Modulus"),type:"int",cell:o.Extension.StringDepCell,cellHeaderClasses:"width_percent_15",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"hash"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew())},disabled:function(e){return!(e.handler&&e.handler.top&&e.handler.top.attributes&&"hash"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew())}},{id:"values_remainder",label:e("Remainder"),type:"int",cell:o.Extension.StringDepCell,cellHeaderClasses:"width_percent_15 width_percent_20",editable:function(e){return!!(e.handler&&e.handler.top&&e.handler.top.attributes&&"hash"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew())},disabled:function(e){return!(e.handler&&e.handler.top&&e.handler.top.attributes&&"hash"===e.handler.top.attributes.partition_type&&e instanceof a.Model&&e.isNew())}},{id:"is_sub_partitioned",label:e("Partitioned table?"),cell:"switch",group:"Partition",type:"switch",mode:["properties","create","edit"],deps:["is_attach"],disabled:function(e){return!e.isNew()||!!e.get("is_attach")&&(setTimeout((function(){e.set("is_sub_partitioned",!1)}),10),!0)}},{id:"sub_partition_type",label:e("Partition Type"),editable:!1,type:"select2",select2:{allowClear:!1},group:"Partition",deps:["is_sub_partitioned"],options:function(){var t=[{label:e("Range"),value:"range"},{label:e("List"),value:"list"}];return!n.isUndefined(this.node_info)&&!n.isUndefined(this.node_info.server)&&!n.isUndefined(this.node_info.server.version)&&this.node_info.server.version>=11e4&&t.push({label:e("Hash"),value:"hash"}),t},visible:function(e){return!!e.isNew()},disabled:function(e){return!e.isNew()||!e.get("is_sub_partitioned")}},{id:"sub_partition_keys",label:e("Partition Keys"),model:i.PartitionKeyModel,subnode:i.PartitionKeyModel,editable:!0,type:"collection",group:"Partition",mode:["properties","create","edit"],deps:["is_sub_partitioned","sub_partition_type"],canEdit:!1,canDelete:!0,control:"sub-node-collection",canAdd:function(e){return!(!e.isNew()||!e.get("is_sub_partitioned"))},canAddRow:function(e){var t=e.top.get("columns"),a=e.top.get("typname"),r=!1,i=1e3;return e.get("sub_partition_type")&&"list"==e.get("sub_partition_type")&&(i=1),t.length<=0&&!n.isUndefined(a)&&!n.isNull(a)&&e.of_types_tables.length>0?n.each(e.of_types_tables,(function(e){e.label==a&&e.oftype_columns.length>0&&(r=!0)})):t.length>0&&(r=n.some(t.pluck("name"))),e.get("sub_partition_keys")&&e.get("sub_partition_keys").length<i&&r},disabled:function(e){e.get("sub_partition_keys")&&e.get("sub_partition_keys").models.length>0&&setTimeout((function(){var t=e.get("sub_partition_keys");t.remove(t.filter((function(){return!0})))}),10)},visible:function(e){return!!e.isNew()}},{id:"sub_partition_scheme",label:e("Partition Scheme"),type:"note",group:"Partition",mode:["edit"],visible:function(e){return!e.isNew()&&!n.isUndefined(e.get("sub_partition_scheme"))&&""!=e.get("sub_partition_scheme")},disabled:function(e){e.isNew()||(this.text=e.get("sub_partition_scheme"))}}],validate:function(){var t,a=this.get("partition_name"),r=this.get("is_default"),i=this.get("values_from"),o=this.get("values_to"),s=this.get("values_in"),l=this.get("values_modulus"),d=this.get("values_remainder"),c=this.get("is_sub_partitioned"),u=this.get("sub_partition_keys");if(this.errorModel.clear(),this.top.errorModel.clear(),n.isUndefined(a)||n.isNull(a)||""===String(a).replace(/^\s+|\s+$/g,""))return t=e("Partition name cannot be empty."),this.errorModel.set("partition_name",t),t;if(c&&this.isNew()&&!n.isNull(u)&&u.length<=0)return t=e("Please specify at least one key for partitioned table."),this.top.errorModel.set("sub_partition_keys",t),t;if("range"===this.top.get("partition_type")){if(!0!==r&&(n.isUndefined(i)||n.isNull(i)||""===String(i).replace(/^\s+|\s+$/g,"")))return t=e("For range partition From field cannot be empty."),this.errorModel.set("values_from",t),t;if(!0!==r&&(n.isUndefined(o)||n.isNull(o)||""===String(o).replace(/^\s+|\s+$/g,"")))return t=e("For range partition To field cannot be empty."),this.errorModel.set("values_to",t),t}else if("list"===this.top.get("partition_type")){if(!0!==r&&(n.isUndefined(s)||n.isNull(s)||""===String(s).replace(/^\s+|\s+$/g,"")))return t=e("For list partition In field cannot be empty."),this.errorModel.set("values_in",t),t}else if("hash"===this.top.get("partition_type")){if(n.isUndefined(l)||n.isNull(l)||""===String(l).replace(/^\s+|\s+$/g,""))return t=e("For hash partition Modulus field cannot be empty."),this.errorModel.set("values_modulus",t),t;if(n.isUndefined(d)||n.isNull(d)||""===String(d).replace(/^\s+|\s+$/g,""))return t=e("For hash partition Remainder field cannot be empty."),this.errorModel.set("values_remainder",t),t}return null}})}.apply(t,a))||(e.exports=r)},92741:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.show_advanced_tab=function(e){if(function(e){return!r.isUndefined(e.node_info)&&!r.isUndefined(e.node_info.server)&&"gpdb"===e.node_info.server.server_type}(e))return!1;return!0};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(64492));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}},4201:(e,t,n)=>{var a,r;n(82772),n(69600),n(21249),n(74916),n(15306),n(23123),a=[n(91669),n(28008),n(19755),n(64492),n(55112),n(30381),n(58894),n(58307),n(12030),n(71158)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d){if(o.Nodes["coll-pga_schedule"]||(o.Nodes["coll-pga_schedule"]=o.Collection.extend({node:"pga_schedule",label:e("Schedules"),type:"coll-pga_schedule",columns:["jscid","jscname","jscenabled"],hasStatistics:!1,canDropCascade:!1})),!o.Nodes.pga_schedule){var c=[e("Sunday"),e("Monday"),e("Tuesday"),e("Wednesday"),e("Thursday"),e("Friday"),e("Saturday")],u=[e("1st"),e("2nd"),e("3rd"),e("4th"),e("5th"),e("6th"),e("7th"),e("8th"),e("9th"),e("10th"),e("11th"),e("12th"),e("13th"),e("14th"),e("15th"),e("16th"),e("17th"),e("18th"),e("19th"),e("20th"),e("21st"),e("22nd"),e("23rd"),e("24th"),e("25th"),e("26th"),e("27th"),e("28th"),e("29th"),e("30th"),e("31st"),e("Last day")],p=[e("January"),e("February"),e("March"),e("April"),e("May"),e("June"),e("July"),e("August"),e("September"),e("October"),e("November"),e("December")],f=[e("00"),e("01"),e("02"),e("03"),e("04"),e("05"),e("06"),e("07"),e("08"),e("09"),e("10"),e("11"),e("12"),e("13"),e("14"),e("15"),e("16"),e("17"),e("18"),e("19"),e("20"),e("21"),e("22"),e("23")],g=[e("00"),e("01"),e("02"),e("03"),e("04"),e("05"),e("06"),e("07"),e("08"),e("09"),e("10"),e("11"),e("12"),e("13"),e("14"),e("15"),e("16"),e("17"),e("18"),e("19"),e("20"),e("21"),e("22"),e("23"),e("24"),e("25"),e("26"),e("27"),e("28"),e("29"),e("30"),e("31"),e("32"),e("33"),e("34"),e("35"),e("36"),e("37"),e("38"),e("39"),e("40"),e("41"),e("42"),e("43"),e("44"),e("45"),e("46"),e("47"),e("48"),e("49"),e("50"),e("51"),e("52"),e("53"),e("54"),e("55"),e("56"),e("57"),e("58"),e("59")],b=d.Extension.MomentCell.extend({editor:d.Extension.DatetimePickerEditor,render:function(){this.$el.empty();var t=this.model;return this.$el.text(this.formatter.fromRaw(t.get(this.column.get("name")),t)||e("<any>")),this.delegateEvents(),this}}),h=d.Extension.MomentCell.extend({editor:d.Extension.DatetimePickerEditor}),m=function(e,t){var n=this;return n.selector=e,n.indexes=t,this.fromRaw=function(e){if(!a.isArray(e))return e;for(var t=[],r=0,i=[];r<e.length;r++)e[r]&&(t.push(n.selector[r]),i.push(r+1));return n.indexes?i:t.join(", ")},this.toRaw=function(e){if(!n.indexes)return e;for(var t=[],r=0,i=n.selector.length;r<i;r++)t.push(-1!=a.indexOf(e,String(r+1)));return t},n},_=function(e){var t=e.field.get("selector"),n=e.model.get(e.field.get("name")),r=[];return t&&(r=a.map(t,(function(e,t){return{label:e,value:t+1,selected:n[t]}}))),r},v=o.Node.Model.extend({defaults:{jexid:void 0,jexdate:null,jextime:null},idAttribute:"jexid",schema:[{id:"jexdate",type:"text",label:e("Date"),editable:!0,placeholder:e("<any>"),cell:b,options:{format:"YYYY-MM-DD"},displayFormat:"YYYY-MM-DD",modelFormat:"YYYY-MM-DD",cellHeaderClasses:"width_percent_50",allowEmpty:!0},{id:"jextime",type:"text",placeholder:e("<any>"),label:e("Time"),editable:!0,cell:b,options:{format:"HH:mm",buttons:{showToday:!1}},displayFormat:"HH:mm",modelFormat:"HH:mm:ss",displayInUTC:!0,allowEmpty:!0,cellHeaderClasses:"width_percent_50",modalInUTC:!0}],validate:function(){var t,n=this,a=this.collection,r=!1,i=this.get("jexdate")||"<any>",o=this.get("jextime")||"<any>",s=this.get("jexid")||this.cid;return n.errorModel.unset("jscdate"),i==o&&"<any>"==i?(t=e("Please specify date/time."),n.errorModel.set("jscdate",t),t):(a.each((function(a){r||s==(a.get("jexid")||a.cid)||i==(a.get("jexdate")||"<any>")&&o==(a.get("jextime")||"<any>")&&(t=e("Please specify unique set of exceptions."),a.errorModel.get("jscdate")!=t&&n.errorModel.set("jscdate",t),r=!0)})),t)}}),y=l.Control.extend({template:a.template(["<div>","  <%=infotext%>","</div>"].join("\n")),className:"pgadmin-control-group"});o.Nodes.pga_schedule=o.Node.extend({parent_type:"pga_job",type:"pga_schedule",dialogHelp:t("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!1,canDrop:!0,label:e("Schedule"),node_image:"icon-pga_schedule",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_pga_schedule_on_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}},{name:"create_pga_schedule_on_coll",node:"coll-pga_schedule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}},{name:"create_pga_schedule",node:"pga_schedule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Schedule..."),icon:"wcTabIcon icon-pga_schedule",data:{action:"create"}}]))},model:o.Node.Model.extend({defaults:{jscid:null,jscjobid:null,jscname:"",jscdesc:"",jscenabled:!0,jscstart:null,jscend:null,jscweekdays:a.map(c,(function(){return!1})),jscmonthdays:a.map(u,(function(){return!1})),jscmonths:a.map(p,(function(){return!1})),jschours:a.map(f,(function(){return!1})),jscminutes:a.map(g,(function(){return!1})),jscexceptions:[]},idAttribute:"jscid",parse:function(e){if(e.jscexceptions=[],e.jexid&&e.jexid.length)for(var t=0;t<e.jexid.length;t++)e.jscexceptions.push({jexid:e.jexid[t],jexdate:e.jexdate[t],jextime:e.jextime[t]});return delete e.jexid,delete e.jexdate,delete e.jextime,o.Node.Model.prototype.parse.apply(this,arguments)},schema:[{id:"jscid",label:e("ID"),type:"int",cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jscname",label:e("Name"),type:"text",cellHeaderClasses:"width_percent_45",disabled:function(){return!1}},{id:"jscenabled",label:e("Enabled?"),type:"switch",disabled:function(){return!1},cellHeaderClasses:"width_percent_5"},{id:"jscstart",label:e("Start"),type:"text",control:"datetimepicker",cell:h,disabled:function(){return!1},displayInUTC:!1,displayFormat:"YYYY-MM-DD HH:mm:ss Z",modelFormat:"YYYY-MM-DD HH:mm:ss Z",options:{format:"YYYY-MM-DD HH:mm:ss Z",minDate:i().add(0,"m")},cellHeaderClasses:"width_percent_25"},{id:"jscend",label:e("End"),type:"text",control:"datetimepicker",cell:h,disabled:function(){return!1},displayInUTC:!1,displayFormat:"YYYY-MM-DD HH:mm:ss Z",options:{format:"YYYY-MM-DD HH:mm:ss Z",minDate:i().add(0,"m")},cellHeaderClasses:"width_percent_25",modelFormat:"YYYY-MM-DD HH:mm:ss Z"},{id:"jscweekdays",label:e("Week days"),type:"text",control:l.Control.extend({formatter:new m(c,!1)}),mode:["properties"]},{id:"jscmonthdays",label:e("Month days"),type:"text",control:l.Control.extend({formatter:new m(u,!1)}),mode:["properties"]},{id:"jscmonths",label:e("Months"),type:"text",control:l.Control.extend({formatter:new m(p,!1)}),mode:["properties"]},{id:"jschours",label:e("Hours"),type:"text",control:l.Control.extend({formatter:new m(f,!1)}),mode:["properties"]},{id:"jscminutes",label:e("Minutes"),type:"text",control:l.Control.extend({formatter:new m(g,!1)}),mode:["properties"]},{id:"jscexceptions",label:e("Exceptions"),type:"text",control:l.Control.extend({formatter:new function(){return this.fromRaw=function(e){var t,n="",a=0;if(!e)return n;for(;a<e.length;a++)t=e[a],a&&(n+=", "),n+="["+String((t.jexdate||"")+" "+(t.jextime||"")).replace(/^\s+|\s+$/g,"")+"]";return n},this.toRaw=function(e){return e},this}}),mode:["properties"]},{type:"control",mode:["create","edit"],group:e("Repeat"),infotext:e("Schedules are specified using a <strong>cron-style</strong> format.<br/><ul><li>For each selected time or date element, the schedule will execute.<br/>e.g. To execute at 5 minutes past every hour, simply select ‘05’ in the Minutes list box.<br/></li><li>Values from more than one field may be specified in order to further control the schedule.<br/>e.g. To execute at 12:05 and 14:05 every Monday and Thursday, you would click minute 05, hours 12 and 14, and weekdays Monday and Thursday.</li><li>For additional flexibility, the Month Days check list includes an extra Last Day option. This matches the last day of the month, whether it happens to be the 28th, 29th, 30th or 31st.</li></ul>"),control:y},{type:"nested",label:e("Days"),group:e("Repeat"),mode:["create","edit"],control:l.FieldsetControl.extend({render:function(){var e=l.FieldsetControl.prototype.render.apply(this,arguments);return e}}),schema:[{id:"jscweekdays",label:e("Week Days"),cell:"select2",group:e("Days"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:e("Select the weekdays..."),width:"style",dropdownAdapter:n.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(c,!0),selector:c,options:_},{id:"jscmonthdays",label:e("Month Days"),cell:"select2",group:e("Days"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:e("Select the month days..."),width:"style",showOnScroll:!1,dropdownAdapter:n.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(u,!0),selector:u,options:_},{id:"jscmonths",label:e("Months"),cell:"select2",group:e("Days"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:e("Select the months..."),width:"style",dropdownAdapter:n.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(p,!0),selector:p,options:_}]},{type:"nested",control:"fieldset",label:e("Times"),group:e("Repeat"),mode:["create","edit"],schema:[{id:"jschours",label:e("Hours"),cell:"select2",group:e("Times"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:e("Select the hours..."),width:"style",showOnScroll:!1,dropdownAdapter:n.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(f,!0),selector:f,options:_},{id:"jscminutes",label:e("Minutes"),cell:"select2",group:e("Times"),control:"select2",type:"array",select2:{first_empty:!1,multiple:!0,allowClear:!0,placeholder:e("Select the minutes..."),width:"style",showOnScroll:!1,dropdownAdapter:n.fn.select2.amd.require("select2/selectAllAdapter")},formatter:new m(g,!0),selector:g,options:_}]},{id:"jscexceptions",type:"collection",mode:["edit","create"],label:"",canEdit:!1,model:v,canAdd:!0,group:e("Exceptions"),canDelete:!0,cols:["jexdate","jextime"],control:"sub-node-collection"},{id:"jscdesc",label:e("Comment"),type:"multiline"}],validate:function(){var t,n=this.get("jscname"),r=null;if(a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,"")?(t=e("Name cannot be empty."),this.errorModel.set("jscname",t),r=t):this.errorModel.unset("jscname"),n=this.get("jscstart"),a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,"")?(t=e("Please enter the start time."),""==n&&this.set("jscstart",void 0),this.errorModel.set("jscstart",t),r=r||t):this.errorModel.unset("jscstart"),!r){if(n=this.get("jscend"),a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,""))return void(""==n&&this.set("jscend",null));var o=this.get("jscstart"),s=this.get("jscend"),l=o.split(" "),d=s.split(" ");l=i(l[0]+" "+l[1]),(d=i(d[0]+" "+d[1])).isBefore(l)&&(r=e("Start time must be less than end time"),this.errorModel.set("jscstart",r))}return r}})})}return o.Nodes.pga_schedule}.apply(t,a))||(e.exports=r)},26814:(e,t,n)=>{var a,r;n(74916),n(15306),a=[n(91669),n(28008),n(19755),n(64492),n(55112),n(58894),n(55455),n(33944),n(4201)],void 0===(r=function(e,t,n,a,r,i,o){return i.Nodes["coll-pga_job"]||(i.Nodes["coll-pga_job"]=i.Collection.extend({node:"pga_job",label:e("pga_jobs"),type:"coll-pga_job",columns:["jobid","jobname","jobenabled","jlgstatus","jobnextrun","joblastrun","jobdesc"],hasStatistics:!1,canDrop:!0,canDropCascade:!1})),i.Nodes.pga_job||(i.Nodes.pga_job=i.Node.extend({parent_type:"server",type:"pga_job",dialogHelp:t("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!0,hasCollectiveStatistics:!0,width:"80%",height:"80%",canDrop:!0,label:e("pgAgent Job"),node_image:function(){return"icon-pga_job"},Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_pga_job_on_coll",node:"coll-pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("pgAgent Job..."),icon:"wcTabIcon icon-pga_job",data:{action:"create"}},{name:"create_pga_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("pgAgent Job..."),icon:"wcTabIcon icon-pga_job",data:{action:"create"}},{name:"run_now_pga_job",node:"pga_job",module:this,applies:["object","context"],callback:"run_pga_job_now",priority:4,label:e("Run now"),data:{action:"create"},icon:"fa fa-play-circle"}]))},model:i.Node.Model.extend({defaults:{jobname:"",jobid:void 0,jobenabled:!0,jobhostagent:"",jobjclid:1,jobcreated:void 0,jobchanged:void 0,jobnextrun:void 0,joblastrun:void 0,jlgstatus:void 0,jobrunningat:void 0,jobdesc:"",jsteps:[],jschedules:[]},idAttribute:"jobid",parse:function(){var t=i.Node.Model.prototype.parse.apply(this,arguments);return t&&(t.jobrunningat=t.jagagent||e("Not running currently."),t.jlgstatus=t.jlgstatus||e("Unknown")),t},schema:[{id:"jobname",label:e("Name"),type:"text",cellHeaderClasses:"width_percent_30"},{id:"jobid",label:e("ID"),mode:["properties"],type:"int"},{id:"jobenabled",label:e("Enabled?"),type:"switch",cellHeaderClasses:"width_percent_5"},{id:"jobclass",label:e("Job class"),type:"text",mode:["properties"]},{id:"jobjclid",label:e("Job class"),type:"int",control:"node-ajax-options",url:"classes",url_with_id:!1,cache_node:"server",mode:["create","edit"],select2:{allowClear:!1},helpMessage:e("Please select a class to categorize the job. This option will not affect the way the job runs.")},{id:"jobhostagent",label:e("Host agent"),type:"text",mode:["edit","create"],helpMessage:e("Enter the hostname of a machine running pgAgent if you wish to ensure only that machine will run this job. Leave blank if any host may run the job.")},{id:"jobhostagent",label:e("Host agent"),type:"text",mode:["properties"]},{id:"jobcreated",type:"text",mode:["properties"],label:e("Created")},{id:"jobchanged",type:"text",mode:["properties"],label:e("Changed")},{id:"jobnextrun",type:"text",mode:["properties"],label:e("Next run"),cellHeaderClasses:"width_percent_20"},{id:"joblastrun",type:"text",mode:["properties"],label:e("Last run"),cellHeaderClasses:"width_percent_20"},{id:"jlgstatus",type:"text",label:e("Last result"),cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jobrunningat",type:"text",mode:["properties"],label:e("Running at")},{id:"jobdesc",label:e("Comment"),type:"multiline",cellHeaderClasses:"width_percent_15"},{id:"jsteps",label:"",group:e("Steps"),type:"collection",mode:["edit","create"],model:i.Nodes.pga_jobstep.model,canEdit:!0,control:"sub-node-collection",canAdd:!0,canDelete:!0,showError:!1,columns:["jstname","jstenabled","jstkind","jstconntype","jstonerror"]},{id:"jschedules",label:"",group:e("Schedules"),type:"collection",mode:["edit","create"],control:"sub-node-collection",canAdd:!0,canDelete:!0,canEdit:!0,model:i.Nodes.pga_schedule.model,showError:!1,columns:["jscname","jscenabled","jscstart","jscend"]}],validate:function(){var t=this.get("jobname");if(a.isUndefined(t)||a.isNull(t)||""==String(t).replace(/^\s+|\s+$/g,"")){var n=e("Name cannot be empty.");return this.errorModel.set("jobname",n),n}return this.errorModel.unset("jobname"),null}}),run_pga_job_now:function(e){var t=e||{},a=i.tree,r=t.item||a.selected(),s=r&&1==r.length?a.itemData(r):void 0;return s&&n.ajax({url:this.generate_url(r,"run_now",s,!0),method:"PUT"}).done((function(){a.unload(r)})).fail((function(e,t,n){o.pgRespErrorNotify(e,n),a.unload(r)})),!1}})),i.Nodes.pga_job}.apply(t,a))||(e.exports=r)},33944:(e,t,n)=>{var a,r;n(69826),n(74916),n(15306),n(32564),a=[n(91669),n(28008),n(19755),n(64492),n(55112),n(58894),n(58307),n(95283),n(83879),n(12030),n(71158)],void 0===(r=function(e,t,n,a,r,i,o,s,l){i.Nodes["coll-pga_jobstep"]||(i.Nodes["coll-pga_jobstep"]=i.Collection.extend({node:"pga_jobstep",label:e("Steps"),type:"coll-pga_jobstep",columns:["jstid","jstname","jstenabled","jstkind","jstconntype","jstonerror"],hasStatistics:!1,canDropCascade:!1}));var d=l.Extension.SwitchCell.extend({initialize:function(){l.Extension.SwitchCell.prototype.initialize.apply(this,arguments),l.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){var e=this.model,t=this.column,n=this.column.get("editable"),r=this.$el.find("input[type=checkbox]").first(),i=t.get("name");return(a.isFunction(n)?!!n.apply(t,[e]):!!n)?(this.$el.addClass("editable"),r.bootstrapToggle("disabled",!1)):(this.$el.removeClass("editable"),r.bootstrapToggle("disabled",!0),setTimeout((function(){e.set(i,!0)}),10)),this.delegateEvents(),this},remove:l.Extension.DependentCell.prototype.remove});return i.Nodes.pga_jobstep||(i.Nodes.pga_jobstep=i.Node.extend({parent_type:"pga_job",type:"pga_jobstep",dialogHelp:t("help.static",{filename:"pgagent_jobs.html"}),hasSQL:!0,hasDepends:!1,hasStatistics:!0,hasCollectiveStatistics:!0,width:"70%",height:"80%",canDrop:!0,label:e("Step"),node_image:function(){return"icon-pga_jobstep"},Init:function(){this.initialized||(this.initialized=!0,i.add_menus([{name:"create_pga_jobstep_on_job",node:"pga_job",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobstep"},{name:"create_pga_jobstep_on_coll",node:"coll-pga_jobstep",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobstep"},{name:"create_pga_jobstep",node:"pga_jobstep",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Job Step..."),data:{action:"create"},icon:"wcTabIcon icon-pga_jobstep"}]))},model:i.Node.Model.extend({defaults:{jstid:null,jstjobid:null,jstname:"",jstdesc:"",jstenabled:!0,jstkind:!0,jstconntype:!0,jstcode:"",jstconnstr:null,jstdbname:null,jstonerror:"f",jstnextrun:""},initialize:function(){if(i.Node.Model.prototype.initialize.apply(this,arguments),this.isNew()&&this.get("jstconntype")){var e=arguments.length>1&&arguments[1];e&&(a.isUndefined(e.node_info)&&a.isUndefined(e.collection.top.node_info)||this.set("jstdbname",(e.node_info||e.collection.top.node_info).server.db))}},idAttribute:"jstid",schema:[{id:"jstid",label:e("ID"),type:"int",cellHeaderClasses:"width_percent_5",mode:["properties"]},{id:"jstname",label:e("Name"),type:"text",disabled:!1,cellHeaderClasses:"width_percent_60"},{id:"jstenabled",label:e("Enabled?"),type:"switch",disabled:function(){return!1}},{id:"jstkind",label:e("Kind"),type:"switch",options:{onText:e("SQL"),offText:e("Batch"),onColor:"primary",offColor:"primary"},control:s.SwitchControl,disabled:function(){return!1}},{id:"jstconntype",label:e("Connection type"),type:"switch",deps:["jstkind"],mode:["properties"],disabled:function(e){return!e.get("jstkind")},options:{onText:e("Local"),offText:e("Remote"),onColor:"primary",offColor:"primary",width:"65"}},{id:"jstconntype",label:e("Connection type"),type:"switch",deps:["jstkind"],mode:["create","edit"],disabled:function(e){return!e.get("jstkind")},cell:d,editable:function(e){return e.get("jstkind")},options:{onText:e("Local"),offText:e("Remote"),onColor:"primary",offColor:"primary",width:"65"},helpMessage:e("Select <strong>Local</strong> if the job step will execute on the local database server, or <strong>Remote</strong> to specify a remote database server.")},{id:"jstdbname",label:e("Database"),type:"text",mode:["properties"],disabled:function(){return!1}},{id:"jstconnstr",type:"text",mode:["properties"],label:e("Connection string")},{id:"jstdbname",label:e("Database"),type:"text",control:"node-list-by-name",node:"database",cache_node:"database",select2:{allowClear:!0,placeholder:""},disabled:function(e){return!e.get("jstkind")||!e.get("jstconntype")},deps:["jstkind","jstconntype"],mode:["create","edit"],helpMessage:e("Please select the database on which the job step will run.")},{id:"jstconnstr",label:e("Connection string"),type:"text",deps:["jstkind","jstconntype"],disabled:function(e){return!e.get("jstkind")||e.get("jstconntype")},helpMessage:e('Please specify the connection string for the remote database server. Each parameter setting is in the form keyword = value. Spaces around the equal sign are optional. To write an empty value, or a value containing spaces, surround it with single quotes, e.g., keyword = \'a value\'. Single quotes and backslashes within the value must be escaped with a backslash, i.e., \' and \\.<br>For more information, please see the documentation on <a href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING" target="_blank">libpq connection strings</a>.'),mode:["create","edit"]},{id:"jstonerror",label:e("On error"),cell:"select2",control:"select2",options:[{label:e("Fail"),value:"f"},{label:e("Success"),value:"s"},{label:e("Ignore"),value:"i"}],select2:{allowClear:!1},disabled:function(){return!1}},{id:"jstdesc",label:e("Comment"),type:"multiline"},{id:"jstcode",label:"",cell:"string",deps:["jstkind"],type:"text",group:e("Code"),tabPanelCodeClass:"sql-code-control",control:s.SqlCodeControl}],validate:function(){var t,n=this.get("jstname"),r=null;if(a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,"")?(r=e("Name cannot be empty."),this.errorModel.set("jstname",r)):this.errorModel.unset("jstname"),this.get("jstkind"))if(this.get("jstconntype"))this.errorModel.unset("jstconnstr"),n=this.get("jstdbname"),a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,"")?(t=e("Please select a database."),r=r||t,this.errorModel.set("jstdbname",t)):this.errorModel.unset("jstdbname");else{this.errorModel.unset("jstdbname");var i=/\s*\b(\w+)\s*=\s*('([^'\\]*(?:\\.[^'\\]*)*)'|[\w|\.]*)/g;if(n=this.get("jstconnstr"),a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,""))t=e("Please enter a connection string.");else if(""!=String(n).replace(i,""))t=e("Please enter a valid connection string.");else for(var o,s={host:!0,hostaddr:!0,port:!0,dbname:!0,user:!0,password:!0,connect_timeout:!0,client_encoding:!0,application_name:!0,options:!0,fallback_application_name:!0,sslmode:!0,sslcert:!0,sslkey:!0,sslrootcert:!0,sslcrl:!0,keepalives:!0,service:!0,keepalives_idle:!0,keepalives_interval:!0,keepalives_count:!0,sslcompression:!0,requirepeer:!0,krbsrvname:!0,gsslib:!0};o=i.exec(n);){if(s[o[1]]){if(o[2])continue;t=e("Please enter a valid connection string.");break}t=e("Invalid parameter in the connection string - %s.",o[1]);break}t?(r=r||t,this.errorModel.set("jstconnstr",t)):this.errorModel.unset("jstconnstr")}else this.errorModel.unset("jstconnstr"),this.errorModel.unset("jstdbname");return n=this.get("jstcode"),a.isUndefined(n)||a.isNull(n)||""==String(n).replace(/^\s+|\s+$/g,"")?(t=e("Please specify code to execute."),r=r||t,this.errorModel.set("jstcode",t)):this.errorModel.unset("jstcode"),n=this.get("jstonerror"),a.isUndefined(n)||a.isNull(n)||""!=String(n).replace(/^\s+|\s+$/g,"")?this.errorModel.unset("jstonerror"):(t=e("Please select valid on error option."),this.errorModel.set("jstonerror",t)),r}})})),i.Nodes.pga_job}.apply(t,a))||(e.exports=r)},64532:(e,t,n)=>{n(89554),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var a=l(n(19755)),r=l(n(64492)),i=l(n(55112)),o=l(n(1950)),s=n(44092);function l(e){return e&&e.__esModule?e:{default:e}}var d=i.default.Browser=i.default.Browser||{};t.pgBrowser=d;r.default.extend(d,{inactivity_timeout_at:null,logging_activity:!1,inactivity_timeout_daemon_running:!1,is_pgadmin_timedout:function(){return!o.default.pgAdmin},is_inactivity_timeout:function(){return o.default.pgAdmin.Browser.inactivity_timeout_at<this.get_epoch_now()},get_epoch_now:function(){return(0,s.getEpoch)()},log_activity:function(){var e=this;this.logging_activity||(this.logging_activity=!0,this.inactivity_timeout_at=this.get_epoch_now()+i.default.user_inactivity_timeout,setTimeout((function(){e.logging_activity=!1}),1e3))},register_to_activity_listener:function(e,t){var n=["mousemove","mousedown","keydown"],a=this;n.forEach((function(r){e.addEventListener(r,(function r(){a.is_pgadmin_timedout()?(n.forEach((function(t){e.removeEventListener(t,r,!0)})),t()):o.default.pgAdmin.Browser.log_activity()}),!0)}))},override_activity_event_decorator:function(e){return function(){return i.default.override_user_inactivity_timeout&&o.default.pgAdmin.Browser.log_activity(),e.apply(this,arguments)}},logout_inactivity_user:function(){r.default.isUndefined(d.utils)||r.default.isUndefined(d.utils.logout_url)||(window.location.href=d.utils.logout_url)},start_inactivity_timeout_daemon:function(){var e=this;if(i.default.user_inactivity_timeout>0&&!e.inactivity_timeout_daemon_running)var t=setInterval((function(){e.inactivity_timeout_daemon_running=!0,e.is_inactivity_timeout()&&(clearInterval(t),e.inactivity_timeout_daemon_running=!1,(0,a.default)(window).off("beforeunload"),e.logout_inactivity_user())}),1e3)}})},37294:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(69826),n(24812),n(32564);var r=g(n(64492)),i=g(n(55112)),o=g(n(19755)),s=g(n(42441)),l=f(n(44092)),d=g(n(89087)),c=f(n(72945)),u=g(n(1950));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function g(e){return e&&e.__esModule?e:{default:e}}var b=i.default.Browser=i.default.Browser||{};b.keyboardNavigation=b.keyboardNavigation||{},r.default.extend(b.keyboardNavigation,{init:function(){s.default.reset(),b.preferences_cache.length>0&&(this.keyboardShortcut={file_shortcut:l.parseShortcutValue(b.get_preference("browser","main_menu_file").value),object_shortcut:l.parseShortcutValue(b.get_preference("browser","main_menu_object").value),tools_shortcut:l.parseShortcutValue(b.get_preference("browser","main_menu_tools").value),help_shortcut:l.parseShortcutValue(b.get_preference("browser","main_menu_help").value),left_tree_shortcut:l.parseShortcutValue(b.get_preference("browser","browser_tree").value),tabbed_panel_backward:l.parseShortcutValue(b.get_preference("browser","tabbed_panel_backward").value),tabbed_panel_forward:l.parseShortcutValue(b.get_preference("browser","tabbed_panel_forward").value),sub_menu_query_tool:l.parseShortcutValue(b.get_preference("browser","sub_menu_query_tool").value),sub_menu_view_data:l.parseShortcutValue(b.get_preference("browser","sub_menu_view_data").value),sub_menu_search_objects:l.parseShortcutValue(b.get_preference("browser","sub_menu_search_objects").value),sub_menu_properties:l.parseShortcutValue(b.get_preference("browser","sub_menu_properties").value),sub_menu_create:l.parseShortcutValue(b.get_preference("browser","sub_menu_create").value),sub_menu_delete:l.parseShortcutValue(b.get_preference("browser","sub_menu_delete").value),sub_menu_refresh:l.parseShortcutValue(b.get_preference("browser","sub_menu_refresh").value),context_menu:l.parseShortcutValue(b.get_preference("browser","context_menu").value),direct_debugging:l.parseShortcutValue(b.get_preference("browser","direct_debugging").value),drop_multiple_objects:l.parseShortcutValue(b.get_preference("browser","grid_menu_drop_multiple").value),drop_cascade_multiple_objects:l.parseShortcutValue(b.get_preference("browser","grid_menu_drop_cascade_multiple").value),add_grid_row:l.parseShortcutValue(b.get_preference("browser","add_grid_row").value),open_quick_search:l.parseShortcutValue(b.get_preference("browser","open_quick_search").value)},this.shortcutMethods={bindMainMenu:{shortcuts:[this.keyboardShortcut.file_shortcut,this.keyboardShortcut.object_shortcut,this.keyboardShortcut.tools_shortcut,this.keyboardShortcut.help_shortcut]},bindRightPanel:{shortcuts:[this.keyboardShortcut.tabbed_panel_backward,this.keyboardShortcut.tabbed_panel_forward]},bindLeftTree:{shortcuts:this.keyboardShortcut.left_tree_shortcut},bindSubMenuQueryTool:{shortcuts:this.keyboardShortcut.sub_menu_query_tool},bindSubMenuViewData:{shortcuts:this.keyboardShortcut.sub_menu_view_data},bindSubMenuSearchObjects:{shortcuts:this.keyboardShortcut.sub_menu_search_objects},bindSubMenuProperties:{shortcuts:this.keyboardShortcut.sub_menu_properties},bindSubMenuCreate:{shortcuts:this.keyboardShortcut.sub_menu_create},bindSubMenuDelete:{shortcuts:this.keyboardShortcut.sub_menu_delete},bindSubMenuRefresh:{shortcuts:this.keyboardShortcut.sub_menu_refresh,bindElem:"#tree"},bindContextMenu:{shortcuts:this.keyboardShortcut.context_menu},bindDirectDebugging:{shortcuts:this.keyboardShortcut.direct_debugging},bindDropMultipleObjects:{shortcuts:this.keyboardShortcut.drop_multiple_objects},bindDropCascadeMultipleObjects:{shortcuts:this.keyboardShortcut.drop_cascade_multiple_objects},bindAddGridRow:{shortcuts:this.keyboardShortcut.add_grid_row},bindOpenQuickSearch:{shortcuts:this.keyboardShortcut.open_quick_search}},this.bindShortcuts())},bindShortcuts:function(){var e=this;r.default.each(e.shortcutMethods,(function(t,n){e._bindWithMousetrap(t.shortcuts,e[n],t.bindElem)}));(0,o.default)(".pg-navbar").on("keydown",(function(t){switch(t.keyCode){case 37:e.bindMainMenuLeft(t);break;case 38:e.bindMainMenuUpDown(t,"up");break;case 39:e.bindMainMenuRight(t);break;case 40:e.bindMainMenuUpDown(t,"down")}}))},_bindWithMousetrap:function(e,t,n){var a=this;if(s.default.unbind(e),n){var r=document.querySelector(n);(0,s.default)(r).bind(e,function(){t.apply(this,arguments)}.bind(r))}else s.default.bind(e,(function(){t.apply(a,arguments)}))},unbindShortcuts:function(){r.default.each(this.mousetrapInstances,(function(e){e.instance.reset()})),this.mousetrapInstances=[]},bindMainMenu:function(e,t){var n=this.keyboardShortcut;t===n.file_shortcut&&(0,o.default)("#mnu_file a.dropdown-toggle").dropdown("toggle"),t===n.object_shortcut&&(0,o.default)("#mnu_obj a.dropdown-toggle").first().dropdown("toggle"),t===n.tools_shortcut&&(0,o.default)("#mnu_tools a.dropdown-toggle").dropdown("toggle"),t===n.help_shortcut&&(0,o.default)("#mnu_help a.dropdown-toggle").dropdown("toggle")},bindRightPanel:function(e,t){var n=0,a=i.default.Browser.docker.findPanels().length-1,o=0,s=!1,l=this.keyboardShortcut;r.default.each(i.default.Browser.docker.findPanels(),(function(e,t){e.isVisible()&&!s&&"browser"!==e._type&&(o=t,s=!0)})),t===l.tabbed_panel_backward?n=o>0?o-1:1:t===l.tabbed_panel_forward&&(n=o<a?o+1:a),i.default.Browser.docker.findPanels()[n].focus(),setTimeout((function(){document.activeElement instanceof HTMLIFrameElement&&document.activeElement.blur()}),1e3)},bindMainMenuLeft:function(e){if((0,o.default)(e.target).hasClass("nav-link")){var t=(0,o.default)(e.target).closest(".nav-item");for(c._stopEventPropagation(e),t=t.prev(".nav-item");t.hasClass("d-none");)t=t.prev(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,o.default)(e.target).closest(".dropdown-menu").length>0){var n=(0,o.default)(e.target).closest("li");c._stopEventPropagation(e);var a=n.closest(".dropdown-menu");a.closest(".dropdown-submenu").length>0&&(a.removeClass("show"),a.closest(".dropdown-submenu").removeClass("dropdown-submenu-visible"),(n=a.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}},bindMainMenuRight:function(e){if((0,o.default)(e.target).hasClass("nav-link")){var t=(0,o.default)(e.target).closest(".nav-item");for(c._stopEventPropagation(e),t=t.next(".nav-item");t.hasClass("d-none");)t=t.next(".nav-item");t.find(".dropdown-toggle").first().dropdown("toggle")}else if((0,o.default)(e.target).closest(".dropdown-menu").length>0){var n=(0,o.default)(e.target).closest("li");c._stopEventPropagation(e),n.hasClass("dropdown-submenu")&&(n.addClass("dropdown-submenu-visible"),n.find(".dropdown-menu").addClass("show"),n.find(".dropdown-menu .dropdown-item").first().trigger("focus"))}},bindMainMenuUpDown:function(e,t){if((0,o.default)(e.target).closest(".dropdown-menu").length>0){c._stopEventPropagation(e);var n=(0,o.default)(e.target).closest("li"),a=(0,o.default)(e.target).closest(".dropdown-menu");for(a.find(".show").removeClass("show"),a.find(".dropdown-submenu").removeClass("dropdown-submenu-visible"),"up"===t?n=n.prev():"down"===t&&(n=n.next());n.hasClass("dropdown-divider")||n.find(".dropdown-item").first().hasClass("disabled");)"up"===t?n=n.prev():"down"===t&&(n=n.next());n.find(".dropdown-item").trigger("focus")}},bindLeftTree:function(){var e=this.getTreeDetails();(0,o.default)("#tree").trigger("focus"),e.t.focus(e.i),e.t.select(e.i)},bindSubMenuQueryTool:function(){var e=this.getTreeDetails();e.d&&i.default.DataGrid.show_query_tool("",e.i)},bindSubMenuViewData:function(){var e=this.getTreeDetails();e.d&&i.default.DataGrid.show_data_grid({mnuid:1},e.i)},bindSubMenuSearchObjects:function(){var e=this.getTreeDetails();e.d&&i.default.SearchObjects.show_search_objects("",e.i)},bindSubMenuProperties:function(){var e=this.getTreeDetails();e.d&&!0!==i.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&i.default.Browser.Node.callbacks.show_obj_properties.call(i.default.Browser.Nodes[e.t.itemData(e.i)._type],{action:"edit"})},bindSubMenuCreate:function(){var e=this.getTreeDetails(),t=i.default.Browser.Nodes[e.t.itemData(e.i)._type];if(e.d){if(!0===t.collection_node){if(!t.node)return;t=i.default.Browser.Nodes[t.node]}i.default.Browser.Node.callbacks.show_obj_properties.call(t,{action:"create",item:e.i})}},bindSubMenuDelete:function(){var e=this.getTreeDetails();e.d&&!0!==i.default.Browser.Nodes[e.t.itemData(e.i)._type].collection_node&&i.default.Browser.Node.callbacks.delete_obj.call(i.default.Browser.Nodes[e.t.itemData(e.i)._type])},bindSubMenuRefresh:function(e){e.preventDefault();var t=b.keyboardNavigation.getTreeDetails();i.default.Browser.Node.callbacks.refresh.call(i.default.Browser.Nodes[t.t.itemData(t.i)._type])},bindContextMenu:function(e){var t=this.getTreeDetails(),n=e.srcElement||e.target,a=(0,o.default)(n).find(".aciTreeEntry").position().left+70,r=(0,o.default)(n).find(".aciTreeEntry").position().top+70;t.t.blur(t.i),(0,o.default)("#tree").trigger("blur"),t.i.children().contextMenu({x:a,y:r})},bindDirectDebugging:function(){var e=this.getTreeDetails(),t=e.t.itemData(e.i)._type;!e.d||"function"!==t&&"procedure"!==t||i.default.Tools.Debugger.can_debug(e.d,e.i,{debug_type:"direct"})&&i.default.Tools.Debugger.get_function_information(i.default.Browser.Nodes[t])},bindDropMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,o.default)("button.delete_multiple").length>0&&(0,o.default)("button.delete_multiple").click()},bindDropCascadeMultipleObjects:function(){!0===this.isPropertyPanelVisible()&&(0,o.default)("button.delete_multiple_cascade").length>0&&(0,o.default)("button.delete_multiple_cascade").click()},bindAddGridRow:function(){var e=(0,o.default)(document.activeElement).closest(".object.subnode");(0,o.default)(e).length&&(0,o.default)(e).find(".add").click()},isPropertyPanelVisible:function(){var e=!1;return r.default.each(i.default.Browser.docker.findPanels(),(function(t){"properties"===t._type&&(e=t.isVisible())})),e},getTreeDetails:function(){var e=i.default.Browser.tree,t=e.selected().length>0?e.selected():e.first(),n=t&&1===t.length?e.itemData(t):void 0;return{t:e,i:t,d:n}},getDialogTabNavigator:function(e){var t=u.default.pgAdmin.Browser.get_preference("browser","dialog_tab_backward").value,n=u.default.pgAdmin.Browser.get_preference("browser","dialog_tab_forward").value;return new d.default.dialogTabNavigator(e,t,n)},bindOpenQuickSearch:function(){(0,o.default)("#search_icon").trigger("click")}}),e.exports=i.default.Browser.keyboardNavigation},59434:(e,t,n)=>{var a=n(64492);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(68309),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var i=p(n(55112)),o=p(n(28008)),s=p(n(19755)),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(55455)),d=p(n(91669));n(35816);var c=p(n(1950));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function p(e){return e&&e.__esModule?e:{default:e}}var f=i.default.Browser=i.default.Browser||{};t.pgBrowser=f;var g=window.wcDocker;a.extend(f,{lock_layout_levels:{PREVENT_DOCKING:"docking",FULL:"full",NONE:"none"},buildDefaultLayout:function(e){var t=e.addPanel("browser",g.DOCK.LEFT),n=e.addPanel("dashboard",g.DOCK.RIGHT,t);e.addPanel("properties",g.DOCK.STACKED,n,{tabOrientation:g.TAB.TOP}),e.addPanel("sql",g.DOCK.STACKED,n),e.addPanel("statistics",g.DOCK.STACKED,n),e.addPanel("dependencies",g.DOCK.STACKED,n),e.addPanel("dependents",g.DOCK.STACKED,n)},save_current_layout:function(e,t){if(t){var n={setting:e,value:t.save()};s.default.ajax({type:"POST",url:(0,o.default)("settings.store_bulk"),data:n})}},restore_layout:function(e,t,n){if(""!=t)try{e.restore(t)}catch(t){e.clear(),n&&n(e)}else n&&n(e);var a=c.default.pgAdmin.Browser,r=setInterval((function(){a.get_preferences_for_module("browser")&&(clearInterval(r),a.reflectLocklayoutChange(e),a.onPreferencesChange("browser",(function(){a.reflectLocklayoutChange(e)})))}),500)},reflectLocklayoutChange:function(e){var t=c.default.pgAdmin.Browser,n=t.get_preferences_for_module("browser");t.lock_layout(e,n.lock_layout)},lock_layout:function(e,t){var n=this.menus.file.mnu_locklayout.menu_items;switch(t){case this.lock_layout_levels.PREVENT_DOCKING:e.lockLayout(g.LOCK_LAYOUT_LEVEL.PREVENT_DOCKING);break;case this.lock_layout_levels.FULL:e.lockLayout(g.LOCK_LAYOUT_LEVEL.FULL);break;case this.lock_layout_levels.NONE:e.lockLayout(g.LOCK_LAYOUT_LEVEL.NONE)}a.each(n,(function(e){e.name!="mnu_lock_"+t?e.change_checked(!1):e.change_checked(!0)}))},save_lock_layout:function(e){var t=c.default.pgAdmin.Browser;s.default.ajax({url:(0,o.default)("browser.lock_layout"),method:"PUT",contentType:"application/json",data:JSON.stringify({value:e})}).done((function(){t.cache_preferences("browser")})).fail((function(e,t){l.pgNotifier(t,e,(0,d.default)("Failed to save the lock layout setting."))}))},mnu_lock_docking:function(){this.lock_layout(this.docker,this.lock_layout_levels.PREVENT_DOCKING),this.save_lock_layout(this.lock_layout_levels.PREVENT_DOCKING)},mnu_lock_full:function(){this.lock_layout(this.docker,this.lock_layout_levels.FULL),this.save_lock_layout(this.lock_layout_levels.FULL)},mnu_lock_none:function(){this.lock_layout(this.docker,this.lock_layout_levels.NONE),this.save_lock_layout(this.lock_layout_levels.NONE)}})},33240:(e,t,n)=>{var a=n(64492);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(83710),n(68309),n(47941),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var i=f(n(55112)),o=f(n(28008)),s=f(n(19755)),l=p(n(55455)),d=p(n(81240)),c=f(n(1950));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function f(e){return e&&e.__esModule?e:{default:e}}var g=n(23602),b=i.default.Browser=i.default.Browser||{};t.pgBrowser=b,a.extend(b,{preferences_cache:[],prefcache_version:0,generate_preference_version:function(){return(new Date).getTime()},preference_version:function(e){if(!e)return this.prefcache_version;this.prefcache_version=e},get_preference:function(e,t){return a.findWhere(this.preferences_cache,{module:e,name:t})},get_preferences_for_module:function(e){var t={};if(a.each(a.where(this.preferences_cache,{module:e}),(function(e){t[e.name]=e.value})),Object.keys(t).length>0)return t},get_preference_for_id:function(e){return a.findWhere(this.preferences_cache,{id:e})},cache_preferences:function(e){var t=this,n={};n[i.default.csrf_token_header]=i.default.csrf_token,setTimeout((function(){s.default.ajax({url:(0,o.default)("preferences.get_all"),headers:n}).done((function(n){t.preferences_cache=n,t.preference_version(t.generate_preference_version()),b.keyboardNavigation.init(),b.tree&&(g.modifyAcitreeAnimation(t),g.modifyAlertifyAnimation(t)),b.browserTreeState.init(),e&&("string"==typeof e?s.default.event.trigger("prefchange:"+e):a.each(e,(function(e,t){s.default.event.trigger("prefchange:"+t)})))})).fail((function(e,t,n){l.pgRespErrorNotify(e,n)}))}),500)},reflectPreferences:function(e){var t=this;if("sqleditor"===e||null==e){var n=t.get_preferences_for_module("sqleditor");(0,s.default)(t.editor.getWrapperElement()).css("font-size",d.calcFontSize(n.sql_font_size)),t.editor.setOption("tabSize",n.tab_size),t.editor.setOption("lineWrapping",n.wrap_code),t.editor.setOption("autoCloseBrackets",n.insert_pair_brackets),t.editor.setOption("matchBrackets",n.brace_matching),t.editor.refresh()}},onPreferencesChange:function(e,t){(0,s.default)(c.default).on("prefchange:"+e,(function(e){t(e)}))}})},39538:(e,t,n)=>{n(32564);var a=o(n(67294)),r=o(n(73935)),i=n(58069);function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e,t){console.warn("URL = "+e),console.warn(t)};setTimeout((function(){document.getElementById("quick-search-component")&&r.default.render(a.default.createElement(i.Search,{onResult:s}),document.getElementById("quick-search-component"))}),500)},27331:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(30489),n(68304),Object.defineProperty(t,"__esModule",{value:!0}),t.Iframe=void 0;var r,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),o=(r=n(45697))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,n,a,r=u(s);function s(){return l(this,s),r.apply(this,arguments)}return t=s,a=[{key:"propTypes",get:function(){return{id:o.default.string.isRequired,srcURL:o.default.string.isRequired,onLoad:o.default.func.isRequired}}}],(n=[{key:"render",value:function(){var e=this.props,t=e.id,n=e.srcURL,a=e.onLoad;return i.default.createElement("iframe",{id:t,src:n,onLoad:a,width:"20",height:"20",style:{border:"0",display:"block",position:"absolute",opacity:"0"}})}}])&&d(t.prototype,n),a&&d(t,a),s}(i.Component);t.Iframe=g},95778:(e,t,n)=>{n(92222),n(89554),n(91038),n(82772),n(69070),n(74916),n(78783),n(15306),n(73210),n(54747),Object.defineProperty(t,"__esModule",{value:!0}),t.menuSearch=function(e,t){var n;e=e.trim();var a=t.setState,i=[];window.pgAdmin.Browser.utils.app_name&&(n=(0,r.default)("About "+window.pgAdmin.Browser.utils.app_name));var s=function(t,r){Array.from(t.children).forEach((function(t){var s,c;"UL"==t.tagName?(s=l(t),c="".concat(r,"/").concat(s),d(t,c)):"LI"==t.tagName&&(t.classList.contains("dropdown-submenu")?(s=l(t),c="".concat(r,"/").concat(s),d(t,c)):function(t,r){var s=l(t);if(s&&-1!=s.toLowerCase().indexOf(e.toLowerCase())){var d={};d[s]=r,d.element=t.children[0],i.push(d)}s===n&&a((function(e){return o(o({},e),{},{fetched:!0,data:i})}))}(t,r))}))},d=function(e,t){Array.from(e.children).forEach((function(e){"UL"==e.tagName&&s(e,t)}))},c=document.querySelector(".navbar-nav");Array.from(c.children).forEach((function(e){d(e,l(e))}))};var a,r=(a=n(91669))&&a.__esModule?a:{default:a};function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(e){var t,n=e.getElementsByTagName("a");return n.length>0&&(t=(t=n[0].text.trim()).replace(/\.+$/g,"")),t}},9129:(e,t,n)=>{n(92222),n(69600),n(69070),n(74916),n(23123),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.onlineHelpSearch=function(e,t){e=e.split(" ").join("+");var n=t.setState,s=(0,o.default)("help.static",{filename:"search.html"}),l="".concat(s,"?q=").concat(e),c=!1;document.getElementById("hidden-quick-search-iframe")&&document.getElementById("hidden-quick-search-iframe").contentDocument.location.reload(!0);r.default.render(a.default.createElement(i.Iframe,{id:"hidden-quick-search-iframe",srcURL:l,onLoad:function(){if(c)return!1;c=!0;var e=document.getElementById("hidden-quick-search-iframe"),t=(e.contentWindow||e.contentDocument).document;window.pooling=setInterval((function(){var e=t.getElementById("search-results"),a=e.getElementsByTagName("h2"),i=e&&e.getElementsByTagName("LI"),s=window.pooling;if(i&&i.length>0){var u=function(e){for(var t={},n=0;n<e.length;n++){var a=e[n].getElementsByTagName("A");if(0==a.length)break;var r=a[0].text,i=(0,o.default)("help.static",{filename:a[0].getAttribute("href")});t[r]=i}return t}(i);"Searching"!=a[0].childNodes[0].textContent?(window.clearInterval(s),n((function(e){return d(d({},e),{},{fetched:!0,clearedPooling:!0,url:l,data:u})})),c=!1,r.default.unmountComponentAtNode(document.getElementById("quick-search-iframe-container"))):n((function(e){return d(d({},e),{},{fetched:!0,clearedPooling:!1,url:l,data:u})}))}else"Search Results"==a[0].childNodes[0].textContent&&(n((function(e){return d(d({},e),{},{fetched:!0,clearedPooling:!0,url:l,data:{}})})),r.default.unmountComponentAtNode(document.getElementById("quick-search-iframe-container")),c=!1,window.clearInterval(s))}),500)}}),document.getElementById("quick-search-iframe-container"))};var a=s(n(67294)),r=s(n(73935)),i=n(27331),o=s(n(28008));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},58069:(e,t,n)=>{n(79753),n(21249),n(47941),n(74916),n(23123),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.Search=function(){var e=(0,a.useRef)(null),t=b((0,a.useState)(""),2),n=t[0],d=t[1],c=b((0,a.useState)(!1),2),p=c[0],g=c[1],h=[],m=[],_=b((0,a.useState)(!1),2),v=_[0],y=_[1],w=b((0,a.useState)(!1),2),x=w[0],k=w[1],C=b((0,a.useState)({fetched:!1,data:[]}),2),S=C[0],D=C[1],j=b((0,a.useState)({fetched:!1,clearedPooling:!0,url:"",data:[]}),2),N=j[0],T=j[1],E=b((0,a.useState)(!1),2),P=E[0],O=E[1],M=function(){D((function(e){return f(f({},e),{},{fetched:!1,data:[]})})),T((function(e){return f(f({},e),{},{fetched:!1,clearedPooling:!0,url:"",data:{}})}))};(0,a.useEffect)((function(){h=Object.keys(N.data);for(var e=0;e<h.length;e++)m.push(a.default.createElement("a",{href:"",target:"_blank",rel:"noreferrer"},"helpLinkTitles[i]"));1==S.fetched&&y(!1),1==N.fetched&&k(!1)}),[S,N]);(0,r.useDelayDebounce)((function(e){y(!0),k(!0),(0,i.onlineHelpSearch)(e,{state:N,setState:T}),(0,o.menuSearch)(e,{state:S,setState:D})}),n,1e3);var A=function(){var e=window.pooling;e&&window.clearInterval(e),document.getElementsByClassName("live-search-field")[0].value="",setTimeout((function(){document.getElementById("live-search-field").focus()}),100),M(),O(!P),y(!1),k(!1),g(!1)},B=function(e){if(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++)r==t.length-1?n.push(t[r]):n.push(a.default.createElement("span",{key:"menu-span-sub"+r}," ",t[r]," ",a.default.createElement("i",{className:"fa fa-angle-right","aria-hidden":"true"})," "));return n}};return function(e){(0,a.useEffect)((function(){function t(t){if(!e.current||e.current.contains(t.target));else{var n=document.getElementById("live-search-field");if(null==n)return;var a=n.value;a&&a.length>0&&A()}}return document.addEventListener("mousedown",t),function(){document.removeEventListener("mousedown",t)}}),[e])}(e),a.default.createElement("ul",{id:"quick-search-container",ref:e,className:"test",role:"menu"},a.default.createElement("li",null,a.default.createElement("ul",{id:"myDropdown"},a.default.createElement("li",{className:"dropdown-item-input"},a.default.createElement("input",{tabIndex:"0",autoFocus:!0,type:"text",autoComplete:"off",className:"form-control live-search-field","aria-label":"live-search-field",id:"live-search-field",placeholder:(0,l.default)("Quick Search"),onChange:function(e){!function(e){var t=window.pooling;t&&window.clearInterval(t);M(),d(""),e.length>=3?(d(e),y(!0),k(!0),g(!1)):(y(!1),k(!1));e.length<3&&e.length>0&&g(!0);0==e.length&&g(!1)}(e.target.value)}})),a.default.createElement("div",{style:{marginBottom:0}},a.default.createElement("div",null,p?a.default.createElement("div",{className:"pad-12 no-results"},a.default.createElement("span",{className:"fa fa-info-circle"})," Please enter minimum 3 characters to search"):"",a.default.createElement("div",null,1==S.fetched&&0==v?a.default.createElement("div",null,a.default.createElement("div",{className:"menu-groups"},a.default.createElement("span",{className:"fa fa-window-maximize"}),"  ",(0,l.default)("MENU ITEMS")," (",S.data.length,")"),function(e){if(e.length>0){var t=function(){for(var t=[],n=function(n){Object.keys(e[n]).map((function(r){"element"!=r&&"No object selected"!=r&&t.push(a.default.createElement("li",{key:"li-menu-"+n},a.default.createElement("a",{tabIndex:"0",id:"li-menu-"+n,href:"#",className:1==e[n].element.classList.contains("disabled")?"dropdown-item menu-groups-a disabled":"dropdown-item menu-groups-a",key:"menu-"+n,onClick:function(){e[n].element.click(),A()}},r,a.default.createElement("span",{key:"menu-span-"+n},B(e[n][r]))),1==e[n].element.classList.contains("disabled")&&null!=e[n].element.getAttribute("data-disabled")?a.default.createElement("i",{className:"fa fa-info-circle quick-search-tooltip","data-toggle":"tooltip",title:e[n].element.getAttribute("data-disabled"),"aria-label":"Test data tooltip","aria-hidden":"true"}):""))}))},r=0;r<e.length;r++)n(r);return(0,s.default)('[data-toggle="tooltip"]').tooltip(),{v:t}}();if("object"===u(t))return t.v}}(S.data)):v?a.default.createElement("div",{className:"pad-12"},a.default.createElement("div",{className:"search-icon"},(0,l.default)("Searching..."))):"",0==S.data.length&&1==S.fetched&&0==v?a.default.createElement("div",{className:"pad-12 no-results"},a.default.createElement("span",{className:"fa fa-info-circle"})," ",(0,l.default)("No search results")):"",1==N.fetched&&0==x?a.default.createElement("div",null,a.default.createElement("div",{className:"help-groups"},a.default.createElement("span",{className:"fa fa-question-circle"}),"  ",(0,l.default)("HELP ARTICLES")," ",Object.keys(N.data).length>10?a.default.createElement("span",null,"(10 of ",Object.keys(N.data).length," )"):"("+Object.keys(N.data).length+")"," ",N.clearedPooling?"":a.default.createElement("img",{src:"/static/img/loading.gif",alt:(0,l.default)("Loading..."),className:"help_loading_icon"}),Object.keys(N.data).length>10?a.default.createElement("a",{href:N.url,className:"pull-right no-padding",target:"_blank",rel:"noreferrer"},(0,l.default)("Show all"),"  ",a.default.createElement("span",{className:"fas fa-external-link-alt"})):""),Object.keys(N.data).map((function(e,t){if(t<=9)return a.default.createElement("li",{key:"li-help-"+t},a.default.createElement("a",{tabIndex:"0",href:N.data[e],key:"help-"+t,className:"dropdown-item",target:"_blank",rel:"noreferrer"},e))})),0==Object.keys(N.data).length?a.default.createElement("div",{className:"pad-12 no-results"},a.default.createElement("span",{className:"fa fa-info-circle"})," ",(0,l.default)("No search results")):""):x&&0==v?a.default.createElement("div",null,a.default.createElement("div",{className:"help-groups"},a.default.createElement("span",{className:"fa fa-question-circle"})," HELP ARTICLES",Object.keys(N.data).length>10?"(10 of "+Object.keys(N.data).length+")":"("+Object.keys(N.data).length+")",Object.keys(N.data).length>10?a.default.createElement("a",{href:N.url,className:"pull-right no-padding",target:"_blank",rel:"noreferrer"},"Show all  ",a.default.createElement("span",{className:"fas fa-external-link-alt"})):""),a.default.createElement("div",{className:"pad-12"},a.default.createElement("div",{className:"search-icon"},(0,l.default)("Searching...")))):""))))),a.default.createElement("div",{id:"quick-search-iframe-container"}))};var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=a?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(n,r,i):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n(67294)),r=n(50464),i=n(9129),o=n(95778),s=d(n(19755)),l=d(n(91669));function d(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}},7134:(e,t,n)=>{var a=n(64492);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.pgBrowser=void 0;var i=u(n(55112)),o=u(n(28008)),s=u(n(19755)),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(55455)),d=u(n(91669));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}var p=i.default.Browser=i.default.Browser||{};t.pgBrowser=p,a.extend(p,{send_signal_to_runtime:function(e){s.default.ajax({url:(0,o.default)("browser.signal_runtime"),method:"POST",contentType:"application/json",data:JSON.stringify({command:e})}).fail((function(e,t){l.pgNotifier(t,e,(0,d.default)("Failed to send signal to runtime."))}))},mnu_configure_runtime:function(){this.send_signal_to_runtime("Runtime Open Configuration")},mnu_viewlog_runtime:function(){this.send_signal_to_runtime("Runtime Open View Log")}})},14953:(e,t,n)=>{n(34553),n(68309),Object.defineProperty(t,"__esModule",{value:!0}),t.initializeToolbar=function(e,t){l=e,r.default.each(d,(function(e){u(e)})),r.default.each(c,(function(e){u(e)})),e.on(t.EVENT.BUTTON,(function(e){"name"in e&&e.name===(0,a.default)("Query Tool")?i.default.DataGrid.show_query_tool("",i.default.Browser.tree.selected()):"name"in e&&e.name===(0,a.default)("View Data")?i.default.DataGrid.show_data_grid({mnuid:3},i.default.Browser.tree.selected()):"name"in e&&e.name===(0,a.default)("Filtered Rows")?i.default.DataGrid.show_filtered_row({mnuid:4},i.default.Browser.tree.selected()):"name"in e&&e.name===(0,a.default)("Search objects")&&i.default.SearchObjects.show_search_objects("",i.default.Browser.tree.selected())}))},t.enable=function(e,t){e in s?l.buttonEnable(e,t):console.warn("Developer warning: No tool button found with label: "+e)};var a=o(n(91669)),r=o(n(64492)),i=o(n(55112));function o(e){return e&&e.__esModule?e:{default:e}}var s={},l=null,d=[{label:(0,a.default)("Query Tool"),ariaLabel:(0,a.default)("Query Tool"),btnClass:"pg-font-icon icon-query_tool",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,a.default)("View Data"),ariaLabel:(0,a.default)("View Data"),btnClass:"pg-font-icon sql-icon-lg icon-view_data",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,a.default)("Filtered Rows"),ariaLabel:(0,a.default)("Filtered Rows"),btnClass:"pg-font-icon icon-row_filter",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1},{label:(0,a.default)("Search objects"),ariaLabel:(0,a.default)("Search objects"),btnClass:"fa fa-search",text:"",toggled:!1,toggleClass:"",parentClass:"pg-toolbar-btn btn-primary-icon",enabled:!1}],c=[];function u(e){(!(e.label in s)||r.default.findIndex(l._buttonList,{name:e.label})<0)&&(l.addButton(e.label,e.btnClass,e.text,e.label,e.toggled,e.toggleClass,e.parentClass,e.enabled,e.ariaLabel),s[e.label]=e)}},34236:(e,t,n)=>{var a,r;n(69826),n(82772),n(5735),n(32564),n(83753),a=[n(64492),n(19755),n(72316),n(55112),n(58894),n(91669),n(44092)],void 0===(r=function(e,t,n,a,r,i,o){return r.WizardPage=n.Model.extend({defaults:{id:void 0,page_title:void 0,view:void 0,html:void 0,image:void 0,disable_prev:!1,disable_next:!1,disable_cancel:!1,show_progress_bar:"",onLoad:function(){return!0},beforeNext:function(){return!0},onNext:function(){},onBefore:function(){},beforePrev:function(){return!0}}}),r.Wizard=n.View.extend({options:{title:"Wizard",image:"left_panel.png",curr_page:0,disable_next:!1,disable_prev:!1,disable_finish:!1,disable_cancel:!1,show_header_cancel_btn:!1,show_header_maximize_btn:!1,dialog_api:null,height:400,width:650,show_left_panel:!0,wizard_help:""},tmpl:e.template('    <div class="pgadmin-wizard" style="height: <%= this.options.height %>px;    width: <%= this.options.width %>px">      <div class="wizard-header wizard-badge">        <div class="d-flex">          <div>              <h3><span id="main-title"><%= this.options.title %></span> -              <span id="step-title"><%= page_title %></span></h3>          </div>          <% if (this.options.show_header_cancel_btn) { %>            <div class="ml-auto">              <button aria-label="'+i("Close")+'" tabindex="0" class="ajs-close wizard-cancel-event pull-right"                title="'+i("Close")+'"></button>              <% if (this.options.show_header_maximize_btn) { %>                <button aria-label="'+i("Maximize")+'" tabindex="0"  class="ajs-maximize wizard-maximize-event mr-1 pull-right"                  title="'+i("Maximize")+'"></button>              <% } %>            </div>          <% } %>        </div>      </div>      <div class="wizard-content row m-0">        <% if (this.options.show_left_panel) { %>          <div class="col-sm-3 wizard-left-panel">              <img src="<%= this.options.image %>"                alt="'+i("Left panel logo")+'"></div>        <% } %>        <div class="col-sm-<% if (this.options.show_left_panel) { %>9<% }          else { %>12<% } %> wizard-right-panel">          <% if ( typeof show_description !=  "undefined" && show_description != ""){ %>            <div class="wizard-description">              <%= show_description %>            </div>          <% } %>          <div class="wizard-progress-bar"><% if (show_progress_bar) { %>            <p role="status" class="alert alert-info col-sm-12"><%= show_progress_bar %></p><% } %>          </div>          <div class="wizard-right-panel_content">          </div>        </div>      </div>      <div class="wizard-footer pg-prop-footer">        <div class="pg-prop-status-bar" style="visibility:hidden">          <div class="error-in-footer">             <div class="d-flex px-2 py-1">               <div class="pr-2">                 <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true" role="img"></i>               </div>               <div role="alert" class="alert-text"></div>               <div class="ml-auto close-error-bar">                 <a aria-label="'+i("Close error bar")+'" class="close-error fa fa-times text-danger"></a>               </div>             </div>           </div>         </div>        <div class="wizard-buttons d-flex">          <div>            <button tabindex="0" aria-label="'+i("Help")+'" title = "'+i("Help for this dialog.")+'"              class="btn btn-primary-icon pull-left wizard-help" <%=this.options.wizard_help ? "" : "disabled" %>>              <span class="fa fa-lg fa-question" role="img"></span></button>          </div>          <div class="ml-auto">              <button class="btn btn-secondary wizard-cancel" <%=this.options.disable_cancel ? "disabled" : ""%>>                <i class="fa fa-times" role="img"></i>&nbsp;'+i("Cancel")+'</button>              <button class="btn btn-secondary wizard-back" <%=this.options.disable_prev ? "disabled" : ""%>>                <i class="fa fa-backward" role="img"></i>&nbsp;'+i("Back")+'</button>              <button class="btn btn-secondary wizard-next" <%=this.options.disable_next ? "disabled" : ""%>>                '+i("Next")+'                &nbsp;<i class="fa fa-forward"></i></button>              <button class="btn btn-primary wizard-finish" <%=this.options.disable_finish ? "disabled" : ""%>>                <i class="fa fa-check" role="img"></i>&nbsp;'+i("Finish")+"</button>          </div>        </div>      </div>    </div>"),events:{"click button.wizard-next":"nextPage","click button.wizard-back":"prevPage","click button.wizard-cancel":"onCancel","click button.wizard-cancel-event":"onCancel","click button.wizard-maximize-event":"onMaximize","click button.wizard-finish":"finishWizard","click button.wizard-help":"onDialogHelp","click a.close-error":"closeErrorMsg",keydown:"keydownHandler"},initialize:function(t){this.options=e.extend({},this.options,t.options),this.currPage=this.collection.at(this.options.curr_page).toJSON()},render:function(){var e=this,n=this.currPage;return this.options.disable_next=!!this.options.disable_next||this.evalASFunc(this.currPage.disable_next),this.options.disable_prev=!!this.options.disable_prev||this.evalASFunc(this.currPage.disable_prev),this.options.disable_cancel=!!this.currPage.canCancel||this.evalASFunc(this.currPage.disable_cancel),n.html?n.content=n.html:n.view&&(n.content=n.view.render().el),t(this.el).html(this.tmpl(n)),t(this.el).find(".wizard-right-panel_content").html(n.content),this.onLoad(),setTimeout((function(){var n=t(e.el);o.findAndSetFocus(n)}),500),this},nextPage:function(){if(!this.beforeNext())return!1;var e=this.onNext();return e?(this.currPage=this.collection.get(e).toJSON(),this.options.curr_page=this.collection.indexOf(this.collection.get(e))):this.options.curr_page<this.collection.length-1&&(this.options.curr_page=this.options.curr_page+1,this.currPage=this.collection.at(this.options.curr_page).toJSON()),this.enableDisableNext(),this.enableDisablePrev(),this.render()},prevPage:function(){if(!this.beforePrev())return!1;var e=this.onPrev();return e?(this.currPage=this.collection.get(e).toJSON(),this.options.curr_page=this.collection.indexOf(this.collection.get(e))):this.options.curr_page>0&&(this.options.curr_page=this.options.curr_page-1,this.currPage=this.collection.at(this.options.curr_page).toJSON()),this.enableDisableNext(),this.enableDisablePrev(),this.render()},finishWizard:function(){return this.onFinish(),this.remove(),this.off(),delete this.$el,delete this.el,!0},keydownHandler:function(e){o.handleKeyNavigation(e)},enableDisableNext:function(e){void 0!==e?this.options.disable_next=e:this.options.curr_page>=this.collection.length-1?this.options.disable_next=!0:this.options.disable_next=!1},enableDisablePrev:function(e){void 0!==e?this.options.disable_prev=e:this.options.curr_page<=0?this.options.disable_prev=!0:this.options.disable_prev=!1},closeErrorMsg:function(){t(this.el).find(".pg-prop-status-bar .alert-text").empty(),t(this.el).find(".pg-prop-status-bar").css("visibility","hidden")},beforeNext:function(){return this.evalASFunc(this.currPage.beforeNext)},beforePrev:function(){return this.evalASFunc(this.currPage.beforePrev)},onPrev:function(){return this.evalASFunc(this.currPage.onPrev)},onNext:function(){return this.evalASFunc(this.currPage.onNext)},onLoad:function(){return this.evalASFunc(this.currPage.onLoad)},onFinish:function(){return!0},onCancel:function(){return this.$el.remove(),!0},onMaximize:function(){var e=this.options.dialog_api,t=this.$el.find(".wizard-maximize-event");e&&(e.isMaximized()?(t.removeClass("ajs-maximized"),e.restore()):(t.addClass("ajs-maximized "+t.attr("class")),e.maximize()))},evalASFunc:function(t,n){return n=n||this.currPage,e.isFunction(t)?t.apply(n,[this]):t},onDialogHelp:function(){window.open(this.options.wizard_help,"pgadmin_help")}}),r}.apply(t,a))||(e.exports=r)},70655:(e,t,n)=>{var a,r;n(69826),a=[n(19755),n(58307),n(55112),n(91669),n(28008),n(44092)],void 0===(r=function(e,t,n,a,r,i){if(!(n=n||window.pgAdmin||{}).About)return n.About={about_show:function(){t.aboutDialog||t.dialog("aboutDialog",(function(){return{main:function(e,t){this.set("title",e),this.message=t},setup:function(){return{buttons:[{text:a("OK"),key:27,className:"btn btn-primary fa fa-lg fa-check pg-alertify-button"}],options:{modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1}}},build:function(){t.pgDialogBuild.apply(this)},hooks:{onshow:function(){var t=e(this.elements.footer).find("button:not([disabled])");i.findAndSetFocus(t)}},prepare:function(){this.setContent(this.message)}}})),e.get(r("about.index"),(function(e){t.aboutDialog(a("About %s",n.Browser.utils.app_name),e).resizeTo(n.Browser.stdW.md,n.Browser.stdH.md)}))}},n.About}.apply(t,a))||(e.exports=r)},11034:(e,t,n)=>{n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(67294)),r=o(n(73935)),i=o(n(15412));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n,a,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];s(this,e),this.container=t,this.preferences=n,this.sid=a,this.did=r,this.pageVisible=i}var t,n,o;return t=e,(n=[{key:"render",value:function(){this.container&&this.preferences.show_graphs&&r.default.render(a.default.createElement(i.default,{sid:this.sid,did:this.did,preferences:this.preferences,pageVisible:this.pageVisible}),this.container)}},{key:"unmount",value:function(){this.container&&r.default.unmountComponentAtNode(this.container)}},{key:"setSidDid",value:function(e,t){this.sid=e,this.did=t,this.render()}},{key:"reflectPreferences",value:function(e){this.preferences=e,e.show_graphs?this.render():this.unmount()}},{key:"setPageVisible",value:function(e){this.pageVisible=e,this.render()}}])&&l(t.prototype,n),o&&l(t,o),e}();t.default=d},15412:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(92222),n(89554),n(66992),n(69600),n(21249),n(47042),n(47941),n(41539),n(91058),n(54747),n(33948),Object.defineProperty(t,"__esModule",{value:!0}),t.transformData=x,t.legendCallback=k,t.getStatsUrl=C,t.statsReducer=S,t.default=j,t.GraphsWrapper=N,t.POINT_SIZE=t.X_AXIS_LENGTH=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=n(10416),o=n(9109),s=f(n(28008)),l=f(n(9669)),d=f(n(91669)),c=n(44092),u=n(50464),p=f(n(45697));function f(e){return e&&e.__esModule?e:{default:e}}function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}t.X_AXIS_LENGTH=75;function x(e,t){var n=["#00BCD4","#9CCC65","#E64A19"],a=Object.keys(e).map((function(t,a){return{label:t,data:e[t]||[],borderColor:n[a],backgroundColor:n[a],pointHitRadius:2}}))||[];return{labels:v(Array(75).keys()),datasets:a,refreshRate:t}}function k(e){var t=[];t.push('<div class="'+e.id+'-legend d-flex">');for(var n=0;n<e.data.datasets.length;n++)t.push('<div class="legend-value"><span style="background-color:'+e.data.datasets[n].backgroundColor+'">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),e.data.datasets[n].label&&t.push('<span class="legend-label">'+e.data.datasets[n].label+"</span>"),t.push("</div>");return t.push("</div>"),t.join("")}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(0,s.default)("dashboard.dashboard_stats");return a+="/"+e,a+=t>0?"/"+t:"",a+="?chart_names="+n.join(",")}function S(e,t){if(t.reset)return t.reset;if(!t.incoming)return e;t.counterData||(t.counterData=t.incoming);var n={};return Object.keys(t.incoming).forEach((function(a){e[a]?n[a]=[t.counter?t.incoming[a]-t.counterData[a]:t.incoming[a]].concat(v(e[a].slice(0,74))):n[a]=[t.counter?t.incoming[a]-t.counterData[a]:t.incoming[a]]})),n}t.POINT_SIZE=2;var D={session_stats:{Total:[],Active:[],Idle:[]},tps_stats:{Transactions:[],Commits:[],Rollbacks:[]},ti_stats:{Inserts:[],Updates:[],Delete:[]},to_stats:{Fetched:[],Returned:[]},bio_stats:{Reads:[],Hits:[]}};function j(e){var t=e.preferences,n=e.sid,a=e.did,i=e.pageVisible,o=e.enablePoll,s=void 0===o||o,p=(0,r.useRef)(null),f=(0,u.usePrevious)(t),g=_((0,r.useReducer)(S,D.session_stats),2),b=g[0],m=g[1],v=_((0,r.useReducer)(S,D.tps_stats),2),y=v[0],w=v[1],k=_((0,r.useReducer)(S,D.ti_stats),2),j=k[0],T=k[1],E=_((0,r.useReducer)(S,D.to_stats),2),P=E[0],O=E[1],M=_((0,r.useReducer)(S,D.bio_stats),2),A=M[0],B=M[1],R=_((0,r.useState)({}),2),I=R[0],L=R[1],z=_((0,r.useState)(null),2),q=z[0],U=z[1],F=_((0,r.useState)(1e3),2),H=F[0],V=F[1],G=_((0,r.useState)(!1),2),$=G[0],K=G[1];return(0,r.useEffect)((function(){var e=!1;f?(f.session_stats_refresh!=t.session_stats_refresh&&(m({reset:D.session_stats}),e=!0),f.tps_stats_refresh!=t.tps_stats_refresh&&(w({reset:D.tps_stats}),e=!0),f.ti_stats_refresh!=t.ti_stats_refresh&&(T({reset:D.ti_stats}),e=!0),f.to_stats_refresh!=t.to_stats_refresh&&(O({reset:D.to_stats}),e=!0),f.bio_stats_refresh!=t.bio_stats_refresh&&(B({reset:D.bio_stats}),e=!0)):e=!0,e&&V(1e3*(0,c.getGCD)(Object.keys(D).map((function(e){return t[e+"_refresh"]}))))}),[t]),(0,r.useEffect)((function(){i&&!$&&K(!0)}),[i]),(0,u.useInterval)((function(){var e=(0,c.getEpoch)();if(null===p.current){var r={};Object.keys(D).forEach((function(t){r[t]=e})),p.current=r}var i=[];Object.keys(D).forEach((function(n){e>=p.current[n]&&(i.push(n),p.current[n]=e+t[n+"_refresh"])}));var o=C(n,a,i);l.default.get(o).then((function(e){var t=e.data;U(null),m({incoming:t.session_stats}),w({incoming:t.tps_stats,counter:!0,counterData:I.tps_stats}),T({incoming:t.ti_stats,counter:!0,counterData:I.ti_stats}),O({incoming:t.to_stats,counter:!0,counterData:I.to_stats}),B({incoming:t.bio_stats,counter:!0,counterData:I.bio_stats}),L((function(e){return h(h({},e),t)}))})).catch((function(e){if(!q)if(m({reset:D.session_stats}),w({reset:D.tps_stats}),T({reset:D.ti_stats}),O({reset:D.to_stats}),B({reset:D.bio_stats}),L({}),e.response)428===e.response.status?U((0,d.default)("Please connect to the selected server to view the graph.")):U((0,d.default)("An error occurred whilst rendering the graph."));else{if(e.request)return void U((0,d.default)("Not connected to the server or the connection to the server has been closed."));console.error(e)}}))}),s?H:-1),r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{"data-testid":"graph-poll-delay",className:"d-none"},H),$&&r.default.createElement(N,{sessionStats:x(b,t.session_stats_refresh),tpsStats:x(y,t.tps_stats_refresh),tiStats:x(j,t.ti_stats_refresh),toStats:x(P,t.to_stats_refresh),bioStats:x(A,t.bio_stats_refresh),errorMsg:q,showTooltip:t.graph_mouse_track,showDataPoints:t.graph_data_points,isDatabase:a>0}))}function N(e){var t=(0,r.useRef)(),n=(0,r.useRef)(),a=(0,r.useRef)(),s=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useMemo)((function(){return{normalized:!0,legendCallback:k,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{display:!1},elements:{point:{radius:e.showDataPoints?2:0}},tooltips:{enabled:e.showTooltip,callbacks:{title:function(e,t){var n="";try{n=parseInt(e[0].xLabel)*t.refreshRate+(0,d.default)(" seconds ago")}catch(e){n=""}return n}}},scales:{yAxes:[{ticks:{min:0,userCallback:function(e){if(Math.floor(e)===e)return e},fontColor:getComputedStyle(document.documentElement).getPropertyValue("--color-fg")},gridLines:{drawBorder:!1,zeroLineColor:getComputedStyle(document.documentElement).getPropertyValue("--border-color"),color:getComputedStyle(document.documentElement).getPropertyValue("--border-color")}}],xAxes:[{display:!1,gridLines:{display:!1},ticks:{display:!1,reverse:!0}}]}}}),[e.showTooltip,e.showDataPoints]),u=(0,r.useMemo)((function(){return{duration:0}}),[]),p=(0,r.useCallback)((function(e){return function(t){e.current.innerHTML=t.generateLegend()}}));return r.default.createElement(r.default.Fragment,null,r.default.createElement(o.DashboardRow,null,r.default.createElement(o.DashboardRowCol,{breakpoint:"md",parts:6},r.default.createElement(o.ChartContainer,{id:"sessions-graph",title:e.isDatabase?(0,d.default)("Database sessions"):(0,d.default)("Server sessions"),legendRef:t,errorMsg:e.errorMsg},r.default.createElement(i.LineChart,{options:c,data:e.sessionStats,updateOptions:u,onInit:p(t)}))),r.default.createElement(o.DashboardRowCol,{breakpoint:"md",parts:6},r.default.createElement(o.ChartContainer,{id:"tps-graph",title:(0,d.default)("Transactions per second"),legendRef:n,errorMsg:e.errorMsg},r.default.createElement(i.LineChart,{options:c,data:e.tpsStats,updateOptions:u,onInit:p(n)})))),r.default.createElement(o.DashboardRow,null,r.default.createElement(o.DashboardRowCol,{breakpoint:"md",parts:4},r.default.createElement(o.ChartContainer,{id:"ti-graph",title:(0,d.default)("Tuples in"),legendRef:a,errorMsg:e.errorMsg},r.default.createElement(i.LineChart,{options:c,data:e.tiStats,updateOptions:u,onInit:p(a)}))),r.default.createElement(o.DashboardRowCol,{breakpoint:"md",parts:4},r.default.createElement(o.ChartContainer,{id:"to-graph",title:(0,d.default)("Tuples out"),legendRef:s,errorMsg:e.errorMsg},r.default.createElement(i.LineChart,{options:c,data:e.toStats,updateOptions:u,onInit:p(s)}))),r.default.createElement(o.DashboardRowCol,{breakpoint:"md",parts:4},r.default.createElement(o.ChartContainer,{id:"bio-graph",title:(0,d.default)("Block I/O"),legendRef:l,errorMsg:e.errorMsg},r.default.createElement(i.LineChart,{options:c,data:e.bioStats,updateOptions:u,onInit:p(l)})))))}j.propTypes={preferences:p.default.object.isRequired,sid:p.default.oneOfType([p.default.string.isRequired,p.default.number.isRequired]),did:p.default.oneOfType([p.default.string.isRequired,p.default.number.isRequired]),enablePoll:p.default.bool};var T=p.default.shape({labels:p.default.array.isRequired,datasets:p.default.array,refreshRate:p.default.number.isRequired});N.propTypes={sessionStats:T.isRequired,tpsStats:T.isRequired,tiStats:T.isRequired,toStats:T.isRequired,bioStats:T.isRequired,errorMsg:p.default.string,showTooltip:p.default.bool.isRequired,showDataPoints:p.default.bool.isRequired,isDatabase:p.default.bool.isRequired}},71151:(e,t,n)=>{var a,r;n(92222),n(69826),n(24812),n(68309),n(74916),n(64765),n(32564),a=[n(28008),n(91669),n,n(19755),n(64492),n(55112),n(72316),n(83879),n(55455),n(12030),n(90585),n(1950),n(11034),n(58894),n(43734),n(35816)],void 0===(r=function(e,t,a,r,i,o,s,l,d,c,u,p,f){o.Browser=o.Browser||{};var g=o.Browser;if(!o.Dashboard){var b,h,m=!0,_="",v="",y=!1,w=!1,x=!1,k=l.Extension.DeleteCell.extend({render:function(){this.$el.empty();var e=this;return"cancel"===e.column.get("cell_action")?this.$el.html("<i class='fa fa-stop' data-toggle='tooltip' title='"+t("Cancel the active query")+"' aria-label='"+t("Cancel the active query")+"'></i>"):this.$el.html("<i class='fa fa-times-circle text-danger' data-toggle='tooltip' title='"+t("Terminate the session")+"' aria-label='"+t("Terminate the session")+"'></i>"),this.$el.attr("tabindex",0),this.$el.on("keydown",(function(t){32==t.keyCode&&e.$el.click()})),this.delegateEvents(),this},deleteRow:function(e){var n,a,i,o,s,c=this,u=c.column.get("cell_action");if(e.preventDefault(),l.callByNeed(c.column.get("canDeleteRow"),c.column,c.model)){"cancel"===u?(n=t("Cancel Active Query?"),a=t("Are you sure you wish to cancel the active query?"),i=t("Active query cancelled successfully."),o=t("An error occurred whilst cancelling the active query."),s=_+c.model.get("pid")):(n=t("Terminate Session?"),a=t("Are you sure you wish to terminate the session?"),i=t("Session terminated successfully."),o=t("An error occurred whilst terminating the active query."),s=v+c.model.get("pid")),d.confirm(n,a,(function(){r.ajax({url:s,type:"DELETE"}).done((function(e){e==t("Success")?(d.success(i),r("#btn_refresh").trigger("click")):d.error(o)})).fail((function(e,t,n){d.pgRespErrorNotify(e,n)}))}),(function(){return!0}))}}}),C=l.Extension.ObjectCell.extend({enterEditMode:function(){this.model.trigger("enteringEditMode",[this]),l.Cell.prototype.enterEditMode.apply(this,arguments),this.delegateEvents();var e=l.callByNeed(this.column.editable(),this.column,this.model);e&&(this.$el.html("<i class='fa fa-caret-down subnode-edit-in-process'></i>"),this.model.trigger("pg-sub-node:opened",this.model,this))},render:function(){return this.$el.empty(),this.$el.html("<i class='fa fa-caret-right' data-toggle='tooltip' title='"+t("View the active session details")+"' aria-label='"+t("View the active session details")+"'></i>"),this.delegateEvents(),this.grabFocus&&this.$el.trigger("focus"),this}}),S=s.Model.extend({defaults:{version:null},schema:[{id:"backend_type",label:t("Backend type"),type:"text",editable:!0,readonly:!0,group:t("Details"),visible:function(){return this.version>=1e5}},{id:"query_start",label:t("Query started at"),type:"text",editable:!1,readonly:!0,group:t("Details")},{id:"state_change",label:t("Last state changed at"),type:"text",editable:!0,readonly:!0,group:t("Details")},{id:"query",label:t("SQL"),type:"text",editable:!0,readonly:!0,control:c.SqlFieldControl,group:t("Details")}]});return o.Dashboard={init:function(){if(!this.initialized){this.initialized=!0,this.chartsDomObj=null,this.sid=this.did=-1,this.version=-1;var n=this.object_selected.bind(this),a=this.object_disconnected.bind(this);g.Events.on("pgadmin-browser:tree:selected",n),g.Events.on("pgadmin:server:disconnect",a);var i=e("dashboard.index"),o=g.panels.dashboard.panel;if(o){var s=o.layout().scene().find(".pg-panel-content");if(s){r(s).html('<div class="pg-panel-message" role="alert">'+t("Loading dashboard...")+"</div>"),function e(){r.ajax({url:i,type:"GET",dataType:"html"}).done((function(e){r(s).html(e)})).fail((function(n,a){d.pgNotifier(a,n,t("An error occurred whilst loading the dashboard."),(function(n){"CRYPTKEY_SET"===n?e():r(s).html('<div class="pg-panel-message" role="alert">'+t("An error occurred whilst loading the dashboard.")+"</div>")}))}))}(),r(o).data("sid",-1),r(o).data("did",-1)}}}},object_disconnected:function(){var e=g.tree.selected(),t=e&&g.tree.itemData(e);0!=e.length&&this.object_selected(e,t,g.Nodes[t._type])},object_selected:function(n,a,o){var s=this;if(a&&a._type){var l=o.getTreeNodeHierarchy(n),c=u.url(a,n,l);if(null===c){c=e("dashboard.index"),s.version=l.server&&l.server.version||0,_=c+"cancel_query/",v=c+"terminate_session/";var p=l.server;h=p&&p.db||null,p&&p.user&&p.user.is_superuser?y=!0:(y=!1,b=p&&p.user?p.user.name:null),"database"in l?(s.sid=l.server._id,s.did=l.database._id,w=!1,x=!0,c+=s.sid+"/"+s.did,_+=s.sid+"/"+s.did+"/",v+=s.sid+"/"+s.did+"/"):"server"in l?(s.sid=l.server._id,s.did=-1,w=!0,x=!1,c+=s.sid,_+=s.sid+"/",v+=s.sid+"/"):w=x=!1}else w=x=!1;var f=g.panels.dashboard.panel;if(f){var m=f.layout().scene().find(".pg-panel-content");if(m){if(a.connected||i.isUndefined(a.connected)){if(c!==r(f).data("dashboard_url")||c===r(f).data("dashboard_url")&&0==r(f).data("server_status")){this.chartsDomObj&&this.chartsDomObj.unmount(),r(m).empty();r(m).html('<div class="pg-panel-message" role="alert">'+t("Loading dashboard...")+"</div>"),function e(){r.ajax({url:c,type:"GET",dataType:"html"}).done((function(e){r(m).html(e),s.init_dashboard()})).fail((function(n,a){d.pgNotifier(a,n,t("An error occurred whilst loading the dashboard."),(function(n){"CRYPTKEY_SET"===n?e():r(m).html('<div class="pg-panel-message" role="alert">'+t("An error occurred whilst loading the dashboard.")+"</div>")}))}))}(),r(f).data("server_status",!0)}}else this.chartsDomObj&&this.chartsDomObj.unmount(),r(m).html('<div class="pg-panel-message" role="alert">'+t("Please connect to the selected server to view the dashboard.")+"</div>"),r(f).data("server_status",!1);r(f).data("dashboard_url",c)}}}},add_new_server:function(){if(g&&g.tree){for(var e=0!=g.tree.selected().length?g.tree.selected():g.tree.first(null,!1),t=n(59719),a=g.tree.itemData(e);a&&"server_group"!=a._type;)e=g.tree.next(e),a=g.tree.itemData(e);if(!a)return;t&&t.callbacks.show_obj_properties.apply(t,[{action:"create"},e])}},render_grid:function(e,n,a){var i=s.Model.extend({}),o=this,d=n+o.sid;-1!=o.did&&(d+="/"+o.did);var c=new(s.Collection.extend({model:i,url:d,mode:"client"})),u=new l.Grid({emptyText:t("No data found"),columns:a,collection:c,className:"backgrid presentation table table-bordered table-noouter-border table-hover"});r(e).empty(),r(e).append(u.render().el);var p=new l.Extension.ClientSideFilter({collection:c});p.setCustomSearchBox(r("#txtGridSearch")),r(e).data("data",c),r(e).data("grid",u),r(e).data("filter",p)},render_grid_data:function(e){var n=r(e).data("data"),a=r(e).data("grid"),s=r(e).data("filter");if(i.isUndefined(n))return null;n.fetch({reset:!0,success:function(){r(e).hasClass("grid-error")&&(r(e).removeClass("grid-error"),r(e).html(a.render().el),r(s.el).show()),s.search()},error:function(a,l){var d="",c="info";0===l.readyState?d=t("Not connected to the server or the connection to the server has been closed."):(d=JSON.parse(l.responseText).errormsg,428===l.status?(i.isUndefined(d)||i.isNull(d))&&(d=t("Please connect to the selected server to view the table.")):(d=t("An error occurred whilst rendering the table."),c="error")),r(e).hasClass("grid-error")||(r(s.el).hide(),r(e).addClass("grid-error")),r(e).html('<div class="pg-panel-'+c+' pg-panel-message" role="alert">'+d+"</div>"),setTimeout((function(){o.Dashboard.render_grid_data(e,n)}),5e3)}})},init_dashboard:function(){var e=this;this.chartsDomObj=new f.default(document.getElementById("dashboard-graphs"),e.preferences,e.sid,e.did,!(r(".dashboard-container")[0].clientHeight<=0));var t=setInterval((function(){try{p.default.pgAdmin.Browser.preference_version()>0&&(clearInterval(t),e.reflectPreferences())}catch(e){throw clearInterval(t),e}}),0);g.onPreferencesChange("dashboards",(function(){e.reflectPreferences()}))},reflectPreferences:function(){var e=this;e.preferences=p.default.pgAdmin.Browser.get_preferences_for_module("dashboards"),this.chartsDomObj.reflectPreferences(e.preferences),(w||x)&&(e.preferences.show_activity&&r("#dashboard-activity").hasClass("dashboard-hidden")?r("#dashboard-activity").removeClass("dashboard-hidden"):e.preferences.show_activity||r("#dashboard-activity").addClass("dashboard-hidden"),e.preferences.show_activity&&r("#dashboard-activity").hasClass("dashboard-hidden")?r("#dashboard-activity").removeClass("dashboard-hidden"):e.preferences.show_activity||r("#dashboard-activity").addClass("dashboard-hidden"),w?e.reflectPreferencesServer():x&&e.reflectPreferencesDatabase())},reflectPreferencesServer:function(){var n=this,a=r(".dashboard-container"),s=a.find("#server_activity").get(0),l=a.find("#server_locks").get(0),d=a.find("#server_prepared").get(0),u=a.find("#server_config").get(0),p={tab_server_activity:s,tab_server_locks:l,tab_server_prepared:d,tab_server_config:u};if(n.preferences.show_activity){var f=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"datname",label:t("Database"),editable:!1,cell:"string"},{name:"usename",label:t("User"),editable:!1,cell:"string"},{name:"application_name",label:t("Application"),editable:!1,cell:"string"},{name:"client_addr",label:t("Client"),editable:!1,cell:"string"},{name:"backend_start",label:t("Backend start"),editable:!1,cell:"string"},{name:"state",label:t("State"),editable:!1,cell:"string"}];f=n.version<90600?f.concat([{name:"waiting",label:t("Waiting?"),editable:!1,cell:"string"}]):f.concat([{name:"wait_event",label:t("Wait event"),editable:!1,cell:"string"},{name:"blocking_pids",label:t("Blocking PIDs"),editable:!1,cell:"string"}]);var g=new S,b=c.generateViewSchema(null,g,"create",null,null,!0);i.each(b[0].fields,(function(e){e.version=n.version})),f.unshift({name:"pg-backform-expand",label:"",cell:C,cell_priority:-1,postgres_version:n.version,schema:b}),f.unshift({name:"pg-backform-delete",label:"",cell:k,cell_action:"cancel",editable:!1,cell_priority:-1,canDeleteRow:o.Dashboard.can_take_action,postgres_version:n.version}),f.unshift({name:"pg-backform-delete",label:"",cell:k,cell_action:"terminate",editable:!1,cell_priority:-1,canDeleteRow:o.Dashboard.can_take_action,postgres_version:n.version});var h=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"datname",label:t("Database"),editable:!1,cell:"string"},{name:"locktype",label:t("Lock type"),editable:!1,cell:"string"},{name:"relation",label:t("Target relation"),editable:!1,cell:"string"},{name:"page",label:t("Page"),editable:!1,cell:"string"},{name:"tuple",label:t("Tuple"),editable:!1,cell:"string"},{name:"virtualxid",label:t("vXID (target)"),editable:!1,cell:"string"},{name:"transactionid",label:t("XID (target)"),editable:!1,cell:"string"},{name:"classid",label:t("Class"),editable:!1,cell:"string"},{name:"objid",label:t("Object ID"),editable:!1,cell:"string"},{name:"virtualtransaction",label:t("vXID (owner)"),editable:!1,cell:"string"},{name:"mode",label:t("Mode"),editable:!1,cell:"string"},{name:"granted",label:t("Granted?"),editable:!1,cell:"string"}],m=[{name:"git",label:t("Name"),editable:!1,cell:"string"},{name:"database",label:t("Database"),editable:!1,cell:"string"},{name:"Owner",label:t("Owner"),editable:!1,cell:"string"},{name:"transaction",label:t("XID"),editable:!1,cell:"string"},{name:"prepared",label:t("Prepared at"),editable:!1,cell:"string"}],_=[{name:"name",label:t("Name"),editable:!1,cell:"string"},{name:"category",label:t("Category"),editable:!1,cell:"string"},{name:"setting",label:t("Setting"),editable:!1,cell:"string"},{name:"unit",label:t("Unit"),editable:!1,cell:"string"},{name:"short_desc",label:t("Description"),editable:!1,cell:"string"}];r(s).addClass("pg-el-container"),r(s).attr("el","sm"),o.Dashboard.render_grid(s,e("dashboard.activity"),f),o.Dashboard.render_grid(l,e("dashboard.locks"),h),o.Dashboard.render_grid(d,e("dashboard.prepared"),m),o.Dashboard.render_grid(u,e("dashboard.config"),_),o.Dashboard.render_grid_data(s),r('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){var t=p[r(e.relatedTarget).attr("aria-controls")];r(t).data("filtertext",r("#txtGridSearch").val());var n=p[r(e.target).attr("aria-controls")];r("#txtGridSearch").val(r(n).data("filtertext")),o.Dashboard.render_grid_data(n)})),r("#btn_refresh").off("click").on("click",(function(){var e=p[r("#dashboard-activity .nav-tabs .active").attr("aria-controls")];o.Dashboard.render_grid_data(e)}))}},reflectPreferencesDatabase:function(){var n=this,a=document.getElementById("database_activity"),s=document.getElementById("database_locks"),l=document.getElementById("database_prepared"),d={tab_database_activity:a,tab_database_locks:s,tab_database_prepared:l};if(n.preferences.show_activity){var u=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"usename",label:t("User"),editable:!1,cell:"string"},{name:"application_name",label:t("Application"),editable:!1,cell:"string"},{name:"client_addr",label:t("Client"),editable:!1,cell:"string"},{name:"backend_start",label:t("Backend start"),editable:!1,cell:"string"},{name:"state",label:t("State"),editable:!1,cell:"string"}];u=n.version<90600?u.concat([{name:"waiting",label:t("Waiting?"),editable:!1,cell:"string"}]):u.concat([{name:"wait_event",label:t("Wait event"),editable:!1,cell:"string"},{name:"blocking_pids",label:t("Blocking PIDs"),editable:!1,cell:"string"}]);var p=new S,f=c.generateViewSchema(null,p,"create",null,null,!0);i.each(f[0].fields,(function(e){e.version=n.version})),u.unshift({name:"pg-backform-expand",label:"",cell:C,cell_priority:-1,postgres_version:n.version,schema:f}),u.unshift({name:"pg-backform-delete",label:"",cell:k,cell_action:"cancel",editable:!1,cell_priority:-1,canDeleteRow:o.Dashboard.can_take_action,postgres_version:n.version}),u.unshift({name:"pg-backform-delete",label:"",cell:k,cell_action:"terminate",editable:!1,cell_priority:-1,canDeleteRow:o.Dashboard.can_take_action,postgres_version:n.version});var g=[{name:"pid",label:t("PID"),editable:!1,cell:"string"},{name:"locktype",label:t("Lock type"),editable:!1,cell:"string"},{name:"relation",label:t("Target relation"),editable:!1,cell:"string"},{name:"page",label:t("Page"),editable:!1,cell:"string"},{name:"tuple",label:t("Tuple"),editable:!1,cell:"string"},{name:"virtualxid",label:t("vXID (target)"),editable:!1,cell:"string"},{name:"transactionid",label:t("XID (target)"),editable:!1,cell:"string"},{name:"classid",label:t("Class"),editable:!1,cell:"string"},{name:"objid",label:t("Object ID"),editable:!1,cell:"string"},{name:"virtualtransaction",label:t("vXID (owner)"),editable:!1,cell:"string"},{name:"mode",label:t("Mode"),editable:!1,cell:"string"},{name:"granted",label:t("Granted?"),editable:!1,cell:"string"}],b=[{name:"git",label:t("Name"),editable:!1,cell:"string"},{name:"Owner",label:t("Owner"),editable:!1,cell:"string"},{name:"transaction",label:t("XID"),editable:!1,cell:"string"},{name:"prepared",label:t("Prepared at"),editable:!1,cell:"string"}];r(a).addClass("pg-el-container"),r(a).attr("el","sm"),o.Dashboard.render_grid(a,e("dashboard.activity"),u),o.Dashboard.render_grid(s,e("dashboard.locks"),g),o.Dashboard.render_grid(l,e("dashboard.prepared"),b),o.Dashboard.render_grid_data(a),r('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){var t=d[r(e.relatedTarget).attr("aria-controls")];r(t).data("filtertext",r("#txtGridSearch").val());var n=d[r(e.target).attr("aria-controls")];r("#txtGridSearch").val(r(n).data("filtertext")),o.Dashboard.render_grid_data(n)})),r("#btn_refresh").off("click").on("click",(function(){var e=d[r("#dashboard-activity .nav-tabs .active").attr("aria-controls")];o.Dashboard.render_grid_data(e)}))}},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(m=e,t)this.chartsDomObj&&this.chartsDomObj.unmount();else{var n=g.tree,a=n.selected(),r=a&&n.itemData(a),i=a&&r&&g.Nodes[r._type];this.chartsDomObj&&this.chartsDomObj.setPageVisible(m),this.object_selected(a,r,i)}},can_take_action:function(e){var n,a=e.collection.where({state:"active"}),r=this.get("postgres_version")||null,i="cancel"===(this.get("cell_action")||null);return r&&r>=1e5&&!e.get("datname")?(n=t(i?"You cannot cancel background worker processes.":"You cannot terminate background worker processes."),d.info(n),!1):h==e.get("datname")&&"active"==e.get("state")&&1==a.length?(n=t(i?"You are not allowed to cancel the main active session.":"You are not allowed to terminate the main active session."),d.error(n),!1):i&&"idle"==e.get("state")?(d.info(t("The session is already in idle state.")),!1):!!y||(!(!b||b!=e.get("usename"))||(n=t(i?"Superuser privileges are required to cancel another users query.":"Superuser privileges are required to terminate another users query."),d.error(n),!1))}},o.Dashboard}}.apply(t,a))||(e.exports=r)},9109:(e,t,n)=>{n(92222),Object.defineProperty(t,"__esModule",{value:!0}),t.ChartContainer=o,t.ChartError=s,t.DashboardRow=l,t.DashboardRowCol=d;var a=i(n(67294)),r=i(n(45697));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return a.default.createElement("div",{className:"card dashboard-graph",role:"object-document",tabIndex:"0","aria-labelledby":e.id},a.default.createElement("div",{className:"card-header"},a.default.createElement("div",{className:"d-flex"},a.default.createElement("div",{id:e.id},e.title),a.default.createElement("div",{className:"ml-auto my-auto legend",ref:e.legendRef}))),a.default.createElement("div",{className:"card-body dashboard-graph-body"},a.default.createElement("div",{className:"chart-wrapper "+(e.errorMsg?"d-none":"")},e.children),a.default.createElement(s,{message:e.errorMsg})))}function s(e){return null===e.message?a.default.createElement(a.default.Fragment,null):a.default.createElement("div",{className:"pg-panel-error pg-panel-message",role:"alert"},e.message)}function l(e){var t=e.children;return a.default.createElement("div",{className:"row dashboard-row"},t)}function d(e){var t=e.breakpoint,n=e.parts,r=e.children;return a.default.createElement("div",{className:"col-".concat(t,"-").concat(n)},r)}o.propTypes={id:r.default.string.isRequired,title:r.default.string.isRequired,legendRef:r.default.oneOfType([r.default.func,r.default.shape({current:r.default.any})]).isRequired,children:r.default.node.isRequired,errorMsg:r.default.string},s.propTypes={message:r.default.string},l.propTypes={children:r.default.node.isRequired},d.propTypes={breakpoint:r.default.oneOf(["xs","sm","md","lg","xl"]).isRequired,parts:r.default.number.isRequired,children:r.default.node.isRequired}},68363:(e,t,n)=>{n(74916),n(15306),Object.defineProperty(t,"__esModule",{value:!0}),t.getHelpUrl=function(e,t,n,a){var r=Math.floor(n/1e4),i=Math.floor(n/100)-100*r,o=n-(1e4*r+100*i),s="",l=r+"."+i;"ppas"==a&&r<10?l=r+"."+i+"."+o:"pg"==a&&r>=10&&(l=r);"/"!=(s=e.replace("$VERSION$",l)).substr(-1)&&(s+="/");return s+t}},24149:(e,t,n)=>{var a,r;n(92222),n(69826),n(69600),n(83710),n(24812),n(41539),n(54678),n(91058),n(24603),n(74916),n(39714),n(32564),a=[n(55112),n(91669),n(28008),n(64492),n(19755),n(58894),n(58307)],void 0===(r=function(e,t,n,a,r,i,o){if(i.BackgroundProcessObsorver=i.BackgroundProcessObsorver||{},i.BackgroundProcessObsorver.initialized)return i.BackgroundProcessObsorver;var s="True"==e.server_mode,l=window.wcDocker,d=function(e,t){var n=this;setTimeout((function(){n.initialize.apply(n,[e,t])}),1)};return a.extend(d.prototype,{success_status_tpl:a.template('\n      <div class="d-flex px-2 py-1 bg-success-light border border-success rounded">\n        <div class="pr-2">\n          <i class="fa fa-check text-success pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),failed_status_tpl:a.template('\n      <div class="d-flex px-2 py-1 bg-danger-lighter border border-danger rounded">\n        <div class="pr-2">\n          <i class="fa fa-times fa-lg text-danger pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),other_status_tpl:a.template('\n      <div class="d-flex px-2 py-1 bg-primary-light border border-primary rounded">\n        <div class="pr-2">\n          <i class="fa fa-info fa-lg text-primary pg-bg-status-icon" aria-hidden="true" role="img"></i>\n        </div>\n        <div class="mx-auto pg-bg-status-text alert-text-body"><%-status_text%></div>\n      </div>'),initialize:function(e,t){a.extend(this,{details:!1,notify:a.isUndefined(t)||t,curr_status:null,state:0,completed:!1,current_storage_dir:null,id:e.id,type_desc:null,desc:null,detailed_desc:null,stime:null,exit_code:null,acknowledge:e.acknowledge,execution_time:null,out:-1,err:-1,lot_more:!1,notifier:null,container:null,panel:null,logs:r("<ol></ol>",{class:"pg-bg-process-logs"})}),this.notify&&(i.Events&&i.Events.on("pgadmin-bgprocess:started:"+this.id,(function(e){e.notifier||e.show.apply(e)})),i.Events&&i.Events.on("pgadmin-bgprocess:finished:"+this.id,(function(e){e.notifier||e.show.apply(e)})));var n=this;setTimeout((function(){n.update.apply(n,[e])}),1)},bgprocess_url:function(e){switch(e){case"status":return this.details&&-1!=this.out&&-1!=this.err?n("bgprocess.detailed_status",{pid:this.id,out:this.out,err:this.err}):n("bgprocess.status",{pid:this.id});case"acknowledge":return n("bgprocess.acknowledge",{pid:this.id});case"stop_process":return n("bgprocess.stop_process",{pid:this.id});default:return n("bgprocess.list")}},update:function(n){var r=this,o=[],s=[];"stime"in n&&(r.stime=new Date(n.stime)),"execution_time"in n&&(r.execution_time=parseFloat(n.execution_time)),"type_desc"in n&&(r.type_desc=n.type_desc),"desc"in n&&(r.desc=n.desc),"details"in n&&(r.detailed_desc=n.details),"exit_code"in n&&(r.exit_code=n.exit_code),"process_state"in n&&(r.state=n.process_state),"current_storage_dir"in n&&(r.current_storage_dir=n.current_storage_dir),"out"in n&&(r.out=n.out&&n.out.pos,n.out&&n.out.lines&&(o=n.out.lines)),"err"in n&&(r.err=n.err&&n.err.pos,n.err&&n.err.lines&&(s=n.err.lines)),r.completed=r.completed||"err"in n&&"out"in n&&n.err.done&&n.out.done||!r.details&&!a.isNull(r.exit_code);for(var l=0,d=0,c=[],u=document.createElement("textarea"),p=function(e){return u.textContent=e,u.innerHTML};l<o.length&&d<s.length;)if(e.natural_sort(o[l][0],s[d][0])<=0)c.push('<li class="pg-bg-res-out">'+p(o[l++][1])+"</li>");else{var f=p(s[d++][1]);new RegExp(": ("+t("error")+"|"+t("fatal")+"):","i").test(f)?c.push('<li class="pg-bg-res-err">'+f+"</li>"):c.push('<li class="pg-bg-res-out">'+f+"</li>")}for(;l<o.length;)c.push('<li class="pg-bg-res-out">'+p(o[l++][1])+"</li>");for(;d<s.length;){var g=p(s[d++][1]);new RegExp(": ("+t("error")+"|"+t("fatal")+"):","i").test(g)?c.push('<li class="pg-bg-res-err">'+g+"</li>"):c.push('<li class="pg-bg-res-out">'+g+"</li>")}c.length&&(r.logs.append(c.join("")),setTimeout((function(){r.logs[0].scrollTop=r.logs[0].scrollHeight}))),r.logs_loading&&(r.logs_loading.remove(),r.logs_loading=null),r.stime&&(r.curr_status=r.other_status_tpl({status_text:t("Started")}),r.execution_time>=2&&(r.curr_status=r.other_status_tpl({status_text:t("Running...")})),a.isNull(r.exit_code)?a.isNull(r.exit_code)&&3===r.state&&(r.curr_status=r.other_status_tpl({status_text:t("Terminating the process...")})):3===r.state?r.curr_status=r.failed_status_tpl({status_text:t("Terminated by user.")}):0==r.exit_code?r.curr_status=r.success_status_tpl({status_text:t("Successfully completed.")}):r.curr_status=r.failed_status_tpl({status_text:t("Failed (exit code: %s).",String(r.exit_code))}),0==r.state&&r.stime&&(r.state=1,i.Events&&i.Events.trigger("pgadmin-bgprocess:started:"+r.id,r,r)),1!=r.state||a.isNull(r.exit_code)||(r.state=2,i.Events&&i.Events.trigger("pgadmin-bgprocess:finished:"+r.id,r,r)),setTimeout((function(){r.show.apply(r)}),10)),r.completed||setTimeout((function(){r.status.apply(r)}),1e3)},status:function(){var e=this;r.ajax({typs:"GET",timeout:3e4,url:e.bgprocess_url("status"),cache:!1,async:!0,contentType:"application/json"}).done((function(t){setTimeout((function(){e.update(t)}),10)})).fail((function(t){410!=t.status&&setTimeout((function(){e.update(t)}),1e4)}))},show:function(){var e=this;if(e.notify&&!e.details){if(!e.notifier){var n=r('\n            <div class="card">\n              <div class="card-header bg-primary d-flex">\n                <div>'.concat(e.type_desc,'</div>\n                <div class="ml-auto">\n                  <button class="btn btn-sm-sq btn-primary pg-bg-close" aria-label=\'close\'><i class="fa fa-lg fa-times" role="img"></i></button>\n                </div>\n              </div>\n              <div class="card-body px-2">\n                <div class="py-1">').concat(e.desc,'</div>\n                <div class="py-1">').concat(e.stime.toString(),'</div>\n                <div class="d-flex py-1">\n                  <div class="my-auto mr-2">\n                    <span class="fa fa-clock fa-lg" role="img"></span>\n                  </div>\n                  <div class="pg-bg-etime my-auto mr-2"></div>\n                  <div class="ml-auto">\n                    <button class="btn btn-secondary pg-bg-more-details" title="More Details"><span class="fa fa-info-circle" role="img"></span>&nbsp;')+t("More details...")+'</button>\n                    <button class="btn btn-danger bg-process-stop" disabled><span class="fa fa-times-circle" role="img" title="Stop the operation"></span>&nbsp;'+t("Stop Process")+'</button>\n                  </div>\n                </div>\n                <div class="pg-bg-status py-1">\n                </div>\n              </div>\n            </div>\n            '),a=n.find(".pg-bg-more-details"),i=n.find(".pg-bg-close");e.container=n,e.notifier=o.notify(n.get(0),"bg-bgprocess",0,null),a.on("click",function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation(),this.notifier.dismiss(),this.notifier=null,this.completed=!1,this.show_detailed_view.apply(this)}.bind(e)),i.on("click",function(){this.notifier.dismiss(),this.notifier=null,this.acknowledge_server.apply(this)}.bind(this)),e.container.on("click",(function(e){(e=e||window.event).cancelBubble=!0,e.stopPropagation()})),n.find(".bg-process-stop").off("click").on("click",e.stop_process.bind(this))}e.container.find(".pg-bg-etime").empty().append(r("<span></span>").text(String(e.execution_time))).append(r("<span></span>").text(" "+t("seconds"))),r(e.container.find(".pg-bg-status")).html(e.curr_status);var s=r(e.container.find(".bg-process-stop"));1===parseInt(e.state)?s.attr("disabled",!1):s.attr("disabled",!0)}else e.show_detailed_view.apply(e)},show_detailed_view:function(){var e=this,n=this.panel,a=!1;e.panel||(a=!0,(n=this.panel=i.BackgroundProcessObsorver.create_panel()).title(t("Process Watcher - %s",e.type_desc)),n.focus());var o=n.$container,d=o.find(".bg-process-watcher"),c=o.find(".bg-process-details"),u=o.find(".bg-process-footer"),p=o.find(".bg-process-stop"),f=o.find(".bg-process-storage-manager");if(e.current_storage_dir&&s){if(0==f.length){o.find(".bg-process-details .bg-btn-section").prepend('<button id="bg-process-storage-manager" class="btn btn-secondary bg-process-storage-manager" title="Click to open file location" aria-label="Storage Manager" tabindex="0" disabled><span class="pg-font-icon icon-storage_manager" role="img"></span></button>&nbsp;'),f=o.find(".bg-process-storage-manager")}1===parseInt(e.state)?f.attr("disabled",!0):f.attr("disabled",!1),f.off("click").on("click",e.storage_manager.bind(this))}if(1===parseInt(e.state)?p.attr("disabled",!1):p.attr("disabled",!0),p.off("click").on("click",e.stop_process.bind(this)),a&&(d.html(e.logs),setTimeout((function(){e.logs[0].scrollTop=e.logs[0].scrollHeight})),e.logs_loading=r('<li class="pg-bg-res-out loading-logs">'+t("Loading process logs...")+"</li>"),e.logs.append(e.logs_loading),c.find(".bg-detailed-desc").html(e.detailed_desc)),c.find(".bg-process-stats .bgprocess-start-time").html(e.stime),u.find(".bg-process-status").html(e.curr_status),u.find(".bg-process-exec-time p").empty().append(r("<span></span>").text(String(e.execution_time))).append(r("<span></span>").text(" "+t("seconds"))),a){e.details=!0,e.err=0,e.out=0,setTimeout((function(){e.status.apply(e)}),1e3);var g=function(e,t,n){var a=t.outerHeight()+n.outerHeight();e.css("padding-bottom",a)}.bind(n,d,c,u);n.on(l.EVENT.RESIZED,g),n.on(l.EVENT.ATTACHED,g),n.on(l.EVENT.DETACHED,g),g(),n.on(l.EVENT.CLOSED,function(e){e.panel=null,e.details=!1,null!=e.exit_code&&e.acknowledge_server.apply(e)}.bind(n,this))}},acknowledge_server:function(){r.ajax({type:"PUT",timeout:3e4,url:this.bgprocess_url("acknowledge"),cache:!1,async:!0,contentType:"application/json"}).done((function(){})).fail((function(){console.warn(arguments)}))},stop_process:function(){this.state=3,r.ajax({type:"PUT",timeout:3e4,url:this.bgprocess_url("stop_process"),cache:!1,async:!0,contentType:"application/json"}).done((function(){})).fail((function(){console.warn(arguments)}))},storage_manager:function(){this.current_storage_dir&&i.Events.trigger("pgadmin:tools:storage_manager",this.current_storage_dir)}}),a.extend(i.BackgroundProcessObsorver,{bgprocesses:{},init:function(){var e=this;e.initialized||(e.initialized=!0,setTimeout((function(){e.update_process_list.apply(e)}),1e3),i.Events.on("pgadmin-bgprocess:created",(function(){setTimeout((function(){i.BackgroundProcessObsorver.update_process_list(!0)}),1e3)})))},update_process_list:function(e){var t=this;r.ajax({typs:"GET",timeout:3e4,url:n("bgprocess.list"),cache:!1,async:!0,contentType:"application/json"}).done((function(n){if(n&&a.isArray(n)){for(var r in n){var i=n[r];"id"in i&&(i.id in t.bgprocesses||(t.bgprocesses[i.id]=new d(i)))}e&&0==n.length&&setTimeout((function(){t.update_process_list(!1)}),3e3)}})).fail((function(){console.warn(arguments)}))},create_panel:function(){return this.register_panel(),i.docker.addPanel("bg_process_watcher",l.DOCK.FLOAT,null,{w:screen.width<700?.95*screen.width:.5*screen.width,h:screen.height<500?.95*screen.height:.5*screen.height,x:screen.width<700?"2%":"25%",y:screen.height<500?"2%":"25%"})},register_panel:function(){var e=i.docker.findPanels("bg_process_watcher");e&&e.length>=1||new i.Panel({name:"bg_process_watcher",showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,content:'<div class="bg-process-details"><div class="bg-detailed-desc"></div><div class="bg-process-stats d-flex py-1"><div class="my-auto mr-2"><span class="fa fa-clock fa-lg" role="img"></span></div><div class="pg-bg-etime my-auto mr-2"><span>'+t("Start time")+': <span class="bgprocess-start-time"></span></span></div><div class="ml-auto bg-btn-section"><button type="button" class="btn btn-danger bg-process-stop" disabled><span class="fa fa-times-circle" role="img"></span>&nbsp;'+t("Stop Process")+'</button></div></div></div><div class="bg-process-watcher"></div><div class="bg-process-footer p-2 d-flex"><div class="bg-process-status flex-grow-1"></div><div class="bg-process-exec-time ml-4 my-auto"><div class="exec-div"><span>'+t("Execution time")+":</span><p></p></div></div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow p-2")}}).load(i.docker)}}),i.BackgroundProcessObsorver}.apply(t,a))||(e.exports=r)},5878:(e,t,n)=>{var a,r;n(69826),n(40561),n(74916),n(15306),n(32564),a=[n(91669),n(64492),n(19755),n(72316),n(55112),n(58894),n(55455),n(71158),n(44092)],void 0===(r=function(e,t,n,a,r,i,o,s,l){if(i.NodeDependencies)return i.NodeDependencies;var d=window.wcDocker;return i.NodeDependencies=i.NodeDependencies||{},t.extend(i.NodeDependencies,{init:function(){if(!this.initialized){this.initialized=!0,this.dependenciesPanel=i.docker.findPanels("dependencies")[0],t.bindAll(this,"showDependencies","__updateCollection","__loadMoreRows","__appendGridToPanel","toggleVisibility");var e=a.Model.extend({defaults:{icon:"icon-unknown",type:void 0,name:void 0,field:void 0},parse:function(e){var n=i.Nodes[e.type];return null!=e.icon&&""!=e.icon||(e.icon=n?t.isFunction(n.node_image)?n.node_image.apply(n,[null,null]):n.node_image||"icon-"+e.type:"icon-"+e.type),e.type=l.titleize(e.type.replace(/_/g," "),!0),e}});this.dependenciesCollection=new(a.Collection.extend({model:e}))(null),this.dependenciesPanel&&this.toggleVisibility(this.dependenciesPanel.isVisible())}},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.dependenciesPanel=i.docker.findPanels("dependencies")[0];var a=i.tree,r=a.selected(),o=r&&a.itemData(r),s=r&&o&&i.Nodes[o._type];this.showDependencies(r,o,s),i.Events.on("pgadmin-browser:tree:selected",this.showDependencies)}else t&&n(this.dependenciesPanel).data("node-prop",""),i.Events.off("pgadmin-browser:tree:selected",this.showDependencies)},__appendGridToPanel:function(){var t=this.dependenciesPanel.layout().scene().find(".pg-panel-content").find(".pg-panel-dependencies-container"),a=new s.Grid({emptyText:e("No data found"),columns:[{name:"type",label:e("Type"),cell:s.Cell.extend({render:function(){return s.Cell.prototype.render.apply(this,arguments),this.$el.prepend(n("<i>",{class:"wcTabIcon "+this.model.get("icon")})),this}}),editable:!1},{name:"name",label:e("Name"),cell:"string",editable:!1},{name:"field",label:e("field"),cell:"string",editable:!1}],collection:this.dependenciesCollection,className:"backgrid table presentation table-bordered table-noouter-border table-hover"});return this.dependenciesGrid=a,t.empty(),t.append(a.render().el),!0},showDependencies:function(e,t,n){var a=this;n&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){a.__updateCollection(n.generate_url(e,"dependency",t,!0),n,e,t._type)}),400))},__updateCollection:function(a,s,l,c){var u=this,p=e("Please select an object in the tree view."),f=this.dependenciesPanel,g=f.layout().scene().find(".pg-panel-content"),b=g.find(".pg-panel-depends-message"),h=g.find(".pg-panel-dependencies-container"),m=s.getTreeNodeHierarchy(l);if(s&&(p=e("No dependency information is available for the selected object."),s.hasDepends)){var _={node_type:c,url:a};if(t.isEqual(n(f).data("node-prop"),_))return;n(f).data("node-prop",_),u.__appendGridToPanel(),this.dependenciesGrid.columns.models[2].set({label:e("Restriction")}),b.addClass("d-none"),h.removeClass("d-none");var v="";!function t(){n.ajax({url:a,type:"GET",beforeSend:function(t){t.setRequestHeader(r.csrf_token_header,r.csrf_token),v=setTimeout((function(){b.text(e("Fetching dependency information from the server...")),b.removeClass("d-none"),p=""}),1e3)}}).done((function(e){clearTimeout(v),e.length>0?(b.hasClass("d-none")||b.addClass("d-none"),h.removeClass("d-none"),u.dependenciesData=e,u.dependenciesCollection.reset(u.dependenciesData.splice(0,100),{parse:!0}),i.Events.on("pgadmin-browser:panel-dependencies:"+d.EVENT.SCROLLED,u.__loadMoreRows)):(i.Events.off("pgadmin-browser:panel-dependencies:"+d.EVENT.SCROLLED),u.dependenciesCollection.reset({silent:!0}),b.text(p),b.removeClass("d-none"),h.hasClass("d-none")||h.addClass("d-none"))})).fail((function(n,a,r){var s=m[c].label;i.Events.trigger("pgadmin:node:retrieval:error","depends",n,a,r),o.pgHandleItemError(n,a,r,{item:l,info:m})||o.pgNotifier(a,n,e("Error retrieving data from the server: %s",r||s),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)})),b.text(e("Failed to retrieve data from the server."))}))}()}""!=p&&(b.text(p),b.removeClass("d-none"),h.hasClass("d-none")||h.addClass("d-none"))},__loadMoreRows:function(){if(!(this.dependenciesPanel.length<1)){var e=this.dependenciesPanel.$container.find(".pg-panel-dependencies-container").closest(".wcFrameCenter")[0];e.scrollHeight-10<e.scrollTop+e.offsetHeight&&this.dependenciesData.length>0&&this.dependenciesCollection.add(this.dependenciesData.splice(0,100),{parse:!0})}}}),i.NodeDependencies}.apply(t,a))||(e.exports=r)},24482:(e,t,n)=>{var a,r;n(69826),n(40561),n(74916),n(15306),n(32564),a=[n(91669),n(64492),n(19755),n(72316),n(55112),n(58894),n(55455),n(71158),n(44092)],void 0===(r=function(e,t,n,a,r,i,o,s,l){if(i.NodeDependents)return i.NodeDependents;var d=window.wcDocker;return i.NodeDependents=i.NodeDependents||{},t.extend(i.NodeDependents,{init:function(){if(!this.initialized){this.initialized=!0,this.dependentsPanel=i.docker.findPanels("dependents")[0],t.bindAll(this,"showDependents","__updateCollection","__loadMoreRows","__appendGridToPanel","toggleVisibility");var e=a.Model.extend({defaults:{icon:"icon-unknown",type:void 0,name:void 0,field:void 0},parse:function(e){var n=i.Nodes[e.type];return null!=e.icon&&""!=e.icon||(e.icon=n?t.isFunction(n.node_image)?n.node_image.apply(n,[null,null]):n.node_image||"icon-"+e.type:"icon-"+e.type),e.type=l.titleize(e.type.replace(/_/g," "),!0),e}});this.dependentCollection=new(a.Collection.extend({model:e}))(null),this.dependentsPanel&&this.toggleVisibility(this.dependentsPanel.isVisible())}},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.dependentsPanel=i.docker.findPanels("dependents")[0];var a=i.tree,r=a.selected(),o=r&&a.itemData(r),s=r&&o&&i.Nodes[o._type];this.showDependents(r,o,s),i.Events.on("pgadmin-browser:tree:selected",this.showDependents)}else t&&n(this.dependentsPanel).data("node-prop",""),i.Events.off("pgadmin-browser:tree:selected",this.showDependents)},__appendGridToPanel:function(){var t=this.dependentsPanel.layout().scene().find(".pg-panel-content").find(".pg-panel-dependents-container"),a=new s.Grid({emptyText:e("No data found"),columns:[{name:"type",label:e("Type"),cell:s.Cell.extend({render:function(){return s.Cell.prototype.render.apply(this,arguments),this.$el.prepend(n("<i>",{class:"wcTabIcon "+this.model.get("icon")})),this}}),editable:!1},{name:"name",label:e("Name"),cell:"string",editable:!1},{name:"field",label:e("field"),cell:"string",editable:!1}],collection:this.dependentCollection,className:"backgrid table presentation table-bordered table-noouter-border table-hover"});return this.dependentGrid=a,t.empty(),t.append(a.render().el),!0},showDependents:function(e,t,n){var a=this;n&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){a.__updateCollection(n.generate_url(e,"dependent",t,!0),n,e,t._type)}),400))},__updateCollection:function(a,s,l,c){var u=this,p=e("Please select an object in the tree view."),f=this.dependentsPanel,g=f.layout().scene().find(".pg-panel-content"),b=g.find(".pg-panel-depends-message"),h=g.find(".pg-panel-dependents-container"),m=s.getTreeNodeHierarchy(l);if(s&&(p=e("No dependent information is available for the selected object."),s.hasDepends)){var _={node_type:c,url:a};if(t.isEqual(n(f).data("node-prop"),_))return;n(f).data("node-prop",_),this.__appendGridToPanel(),"tablespace"==s.type||"role"==s.type?this.dependentGrid.columns.models[2].set({label:e("Database")}):this.dependentGrid.columns.models[2].set({label:e("Restriction")}),b.addClass("d-none"),h.removeClass("d-none");var v="";!function t(){n.ajax({url:a,type:"GET",beforeSend:function(t){t.setRequestHeader(r.csrf_token_header,r.csrf_token),v=setTimeout((function(){b.text(e("Fetching dependent information from the server...")),b.removeClass("d-none"),p=""}),1e3)}}).done((function(e){clearTimeout(v),e.length>0?(b.hasClass("d-none")||b.addClass("d-none"),h.removeClass("d-none"),u.dependentData=e,u.dependentCollection.reset(u.dependentData.splice(0,100),{parse:!0}),i.Events.on("pgadmin-browser:panel-dependents:"+d.EVENT.SCROLLED,u.__loadMoreRows)):(i.Events.off("pgadmin-browser:panel-dependents:"+d.EVENT.SCROLLED),u.dependentCollection.reset({silent:!0}),b.text(p),b.removeClass("d-none"),h.hasClass("d-none")||h.addClass("d-none"))})).fail((function(n,a,r){var s=m[c].label;i.Events.trigger("pgadmin:node:retrieval:error","depends",n,a,r),o.pgHandleItemError(n,a,r,{item:l,info:m})||o.pgNotifier(a,n,e("Error retrieving data from the server: %s",r||s),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)})),b.text(e("Failed to retrieve data from the server."))}))}()}""!=p&&(b.text(p),b.removeClass("d-none"),h.hasClass("d-none")||h.addClass("d-none"))},__loadMoreRows:function(){if(!(this.dependentsPanel.length<1)){var e=this.dependentsPanel.$container.find(".pg-panel-dependents-container").closest(".wcFrameCenter")[0];e.scrollHeight-10<e.scrollTop+e.offsetHeight&&this.dependentData.length>0&&this.dependentCollection.add(this.dependentData.splice(0,100),{parse:!0})}}}),i.NodeDependents}.apply(t,a))||(e.exports=r)},65894:(e,t,n)=>{var a=n(64492);n(69826),n(26699),n(94986),n(74916),n(32023),n(23123);var r=c(n(91669)),i=c(n(28008)),o=c(n(19755)),s=c(n(55455)),l=c(n(55112)),d=n(48987);function c(e){return e&&e.__esModule?e:{default:e}}e.exports=s.default.dialog("createModeDlg",(function(){return{setup:function(){return{buttons:[{text:(0,r.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times file_manager_create_cancel pg-alertify-button"},{text:(0,r.default)("Create"),key:13,className:"btn btn-primary fa fa-file file_manager_create file_manager_ok pg-alertify-button disabled"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}},replace_file:function(){var e=(0,o.default)(".replace_file .btn_yes"),t=(0,o.default)(".replace_file .btn_no");(0,o.default)(".storage_dialog #uploader .input-path").attr("disabled",!0),(0,o.default)(".file_manager_ok").addClass("disabled"),(0,o.default)(".replace_file, .fm_dimmer").show(),e.on("click",(function(){(0,o.default)(".replace_file, .fm_dimmer").hide(),e.off(),t.off();var n=(0,o.default)(".storage_dialog #uploader .input-path").val();l.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",n),(0,o.default)(".file_manager_create_cancel").trigger("click"),(0,o.default)(".storage_dialog #uploader .input-path").attr("disabled",!1),(0,o.default)(".file_manager_ok").removeClass("disabled")})),t.on("click",(function(){(0,o.default)(".replace_file, .fm_dimmer").hide(),e.off(),t.off(),(0,o.default)(".storage_dialog #uploader .input-path").attr("disabled",!1),(0,o.default)(".file_manager_ok").removeClass("disabled")}))},is_file_exist:function(){var e=(0,o.default)(".storage_dialog #uploader .input-path").val(),t=e.substr(0,e.lastIndexOf("/")+1),n=e.substr(e.lastIndexOf("/")+1),a=!1,r={path:t,name:n,mode:"is_file_exist"};return o.default.ajax({type:"POST",data:JSON.stringify(r),url:(0,i.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/x-download; charset=utf-8",async:!1}).done((function(e){var t=e.data.result;a=1===t.Code})),a},check_permission:function(e){var t=!1,n={path:e,mode:"permission"};return o.default.ajax({type:"POST",data:JSON.stringify(n),url:(0,i.default)("file_manager.filemanager",{trans_id:this.trans_id}),dataType:"json",contentType:"application/json; charset=utf-8",async:!1}).done((function(e){var n=e.data.result;1===n.Code?t=!0:((0,o.default)(".file_manager_ok").addClass("disabled"),s.default.error(n.Error))})).fail((function(){(0,o.default)(".file_manager_ok").addClass("disabled"),s.default.error((0,r.default)("Error occurred while checking access permission."))})),t},callback:function(e){if(e.cancel=!1,e.button.text==(0,r.default)("Create"))if("refresh_list"!=document.activeElement.id){var t,n=(0,o.default)(".storage_dialog #uploader .input-path").val(),i={path:(0,o.default)(".currentpath").val()},s=(0,o.default)(".allowed_file_types select").val();if(n.includes(".")&&n.split(".").pop()==s||"*"==s||(n=n+"."+s,(0,o.default)(".storage_dialog #uploader .input-path").val(n)),!this.check_permission(n))return void(e.cancel=!0);!a.isUndefined(n)&&""!==n&&this.is_file_exist()?(this.replace_file(),this.$container.find(".replace_file").find(".btn_yes").trigger("focus"),e.cancel=!0):(l.default.Browser.Events.trigger("pgadmin-storage:finish_btn:create_file",n),t=(0,o.default)(this.elements.body).find(".storage_content"),(0,o.default)(t).find("*").off(),t.remove(),(0,d.removeTransId)(this.trans_id)),(0,d.set_last_traversed_dir)(i,this.trans_id)}else e.cancel=!0;else e.button.text==(0,r.default)("Cancel")&&(t=(0,o.default)(this.elements.body).find(".storage_content"),(0,o.default)(t).find("*").off(),t.remove(),(0,d.removeTransId)(this.trans_id),l.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:create_file"))}}}),!0,"fileSelectionDlg")},48987:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getTransId=function(e){return r.default.ajax({data:e,type:"POST",async:!1,url:(0,a.default)("file_manager.get_trans_id"),dataType:"json",contentType:"application/json; charset=utf-8"})},t.removeTransId=function(e){return r.default.ajax({type:"GET",async:!1,url:(0,a.default)("file_manager.delete_trans_id",{trans_id:e}),dataType:"json",contentType:"application/json; charset=utf-8"})},t.set_last_traversed_dir=function(e,t){return r.default.ajax({url:(0,a.default)("file_manager.save_last_dir",{trans_id:t}),type:"POST",data:JSON.stringify(e),contentType:"application/json"})};var a=i(n(28008)),r=i(n(19755));function i(e){return e&&e.__esModule?e:{default:e}}},62032:(e,t,n)=>{var a=n(64492);n(69826),n(32564);var r=c(n(91669)),i=c(n(28008)),o=c(n(19755)),s=c(n(55455)),l=c(n(55112)),d=n(48987);function c(e){return e&&e.__esModule?e:{default:e}}e.exports=s.default.dialog("fileSelectionDlg",(function(){return{main:function(e){a.isUndefined(e.dialog_title)&&(e.dialog_title=(0,r.default)("Select file")),this.dialog_type=e.dialog_type,this.set("title",e.dialog_title),this.params=JSON.stringify(e),this.show()},settings:{label:void 0},settingUpdated:function(e,t,n){switch(e){case"message":this.setMessage(n);break;case"label":this.__internal.buttons[0].element&&(this.__internal.buttons[0].element.innerHTML=n)}},prepare:function(){var e=this;e.$container.find(".storage_content").remove(),e.$container.append("<div class='storage_content'></div>");var t=e.$container.find(".storage_content");t.empty(),(0,o.default)(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties"),o.default.get((0,i.default)("file_manager.index"),(function(e){t.append(e)}));var n,r=(0,d.getTransId)(e.params);4==r.readyState&&(n=JSON.parse(r.responseText)),e.trans_id=a.isUndefined(n)?0:n.data.fileTransId,setTimeout((function(){(0,o.default)(e.$container.find(".file_manager")).on("enter-key",(function(){(0,o.default)((0,o.default)(e.elements.footer).find(".file_manager_ok")).trigger("click")}))}),200),e.__internal.buttons[1]&&(e.__internal.buttons[1].element.disabled=!0)},setup:function(){return{buttons:[{text:(0,r.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,r.default)("Select"),key:13,className:"btn btn-primary fa fa-file file_manager_ok pg-alertify-button disabled"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}},callback:function(e){var t;if(e.cancel=!1,e.button.text==(0,r.default)("Select"))if("refresh_list"!=document.activeElement.id){var n=(0,o.default)(".storage_dialog #uploader .input-path").val(),a={path:(0,o.default)(".currentpath").val()};l.default.Browser.Events.trigger("pgadmin-storage:finish_btn:"+this.dialog_type,n),t=(0,o.default)(this.elements.body).find(".storage_content"),(0,o.default)(t).find("*").off(),t.remove(),(0,d.removeTransId)(this.trans_id),(0,d.set_last_traversed_dir)(a,this.trans_id)}else e.cancel=!0;else e.button.text==(0,r.default)("Cancel")&&(t=(0,o.default)(this.elements.body).find(".storage_content"),(0,o.default)(t).find("*").off(),t.remove(),(0,d.removeTransId)(this.trans_id),l.default.Browser.Events.trigger("pgadmin-storage:cancel_btn:"+this.dialog_type))},build:function(){this.$container=(0,o.default)('<div class="storage_dialog file_selection_dlg"></div>'),this.elements.content.appendChild(this.$container.get(0)),s.default.pgDialogBuild.apply(this)},hooks:{onshow:function(){}}}}))},63867:(e,t,n)=>{var a=i(n(91669)),r=i(n(55455));function i(e){return e&&e.__esModule?e:{default:e}}e.exports=r.default.dialog("fileStorageDlg",(function(){return{settingUpdated:function(e,t,n){"message"==e&&this.setMessage(n)},setup:function(){return{buttons:[{text:(0,a.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"}],options:{closableByDimmer:!1,maximizable:!1,closable:!1,movable:!0,padding:!1,overflow:!1,model:0,resizable:!0,pinnable:!1,modal:!1,autoReset:!1}}}}}),!0,"fileSelectionDlg")},11769:(e,t,n)=>{var a,r;n(24812),n(32564),a=[n(91669),n(64492),n(19755),n(55112),n(58894),n(55455)],void 0===(r=function(e,t,n,a,r,i){if(r.ShowNodeSQL=r.ShowNodeSQL||{},r.ShowNodeSQL.initialized)return r.ShowNodeSQL;var o=window.wcDocker;return t.extend(r.ShowNodeSQL,{init:function(){var e;this.initialized||(this.initialized=!0,t.bindAll(this,"showSQL","sqlPanelVisibilityChanged"),this.sqlPanels=e=r.docker.findPanels("sql"),r.Events.on("pgadmin-browser:panel-sql:"+o.EVENT.VISIBILITY_CHANGED,this.sqlPanelVisibilityChanged),r.Events.on("pgadmin:browser:node:updated",(function(){this.sqlPanels&&this.sqlPanels.length&&(n(this.sqlPanels[0]).data("node-prop",""),this.sqlPanelVisibilityChanged(this.sqlPanels[0]))}),this),0==e.length?r.Events.on("pgadmin-browser:panel-sql:"+o.EVENT.INIT,function(){(e[0].isVisible()||1!=e.length)&&(r.Events.on("pgadmin-browser:tree:selected",this.showSQL),r.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this))}.bind(this)):(e[0].isVisible()||1!=e.length)&&(r.Events.on("pgadmin-browser:tree:selected",this.showSQL),r.Events.on("pgadmin-browser:tree:refreshing",this.refreshSQL,this)))},refreshSQL:function(e,a,r){var i=this,o={node_type:a._type,url:r.generate_url(e,"sql",a,!0)};t.isEqual(n(i.sqlPanels[0]).data("node-prop"),o)&&(n(i.sqlPanels[0]).data("node-prop",""),i.showSQL(e,a,r))},showSQL:function(o,s,l){this.timeout&&clearTimeout(this.timeout);var d=this;this.timeout=setTimeout((function(){var c="-- "+e("Please select an object in the tree view.");if(l){c="-- "+e("No SQL could be generated for the selected object.");var u=s._type,p=l.generate_url(o,"sql",s,!0),f=l.getTreeNodeHierarchy(o),g={node_type:u,url:p};if(t.isEqual(n(d.sqlPanels[0]).data("node-prop"),g))return;if(n(d.sqlPanels[0]).data("node-prop",g),l.hasSQL){var b;c="";!function t(){n.ajax({url:p,type:"GET",beforeSend:function(t){t.setRequestHeader(a.csrf_token_header,a.csrf_token),b=setTimeout((function(){a.Browser.editor.setValue(e("Retrieving data from the server..."))}),1e3)}}).done((function(e){a.Browser.editor.getValue()!=e&&a.Browser.editor.setValue(e),clearTimeout(b)})).fail((function(n,a,s){var l=f[u].label;r.Events.trigger("pgadmin:node:retrieval:error","sql",n,a,s,o),i.pgHandleItemError(n,a,s,{item:o,info:f})||i.pgNotifier(a,n,e("Error retrieving the information - %s",s||l),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)}))}))}()}}""!=c&&a.Browser.editor.setValue(c)}),400)},sqlPanelVisibilityChanged:function(e){if(e.isVisible()){var t=r.tree,n=t.selected(),a=n&&t.itemData(n),i=n&&a&&r.Nodes[a._type];r.ShowNodeSQL.showSQL.apply(r.ShowNodeSQL,[n,a,i]),r.Events.on("pgadmin-browser:tree:selected",r.ShowNodeSQL.showSQL),r.Events.on("pgadmin-browser:tree:refreshing",r.ShowNodeSQL.refreshSQL,this)}else r.Events.off("pgadmin-browser:tree:selected",r.ShowNodeSQL.showSQL),r.Events.off("pgadmin-browser:tree:refreshing",r.ShowNodeSQL.refreshSQL,this)}}),r.ShowNodeSQL}.apply(t,a))||(e.exports=r)},72126:(e,t,n)=>{var a,r;n(69826),n(82772),n(40561),n(68309),n(32564),a=[n(91669),n(64492),n(19755),n(72316),n(55112),n(58894),n(71158),n(58307),n(73870),n(42591)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d){if(i.NodeStatistics)return i.NodeStatistics;if(i.NodeStatistics=i.NodeStatistics||{},i.NodeStatistics.initialized)return i.NodeStatistics;var c=o.SizeFormatter=function(){};t.extend(c.prototype,{fromRaw:function(e){return l(e)},toRaw:function(e){return e}});var u=o.Extension.SwitchCell.extend({defaults:t.extend({},o.Extension.SwitchCell.prototype.defaults)}),p={16:u,20:o.IntegerCell,21:o.IntegerCell,23:o.IntegerCell,700:o.NumberCell,701:o.NumberCell,1700:o.NumberCell,702:o.DatetimeCell,703:o.DatetimeCell,1082:o.DatetimeCell.extend({includeDate:!0,includeTime:!1,includeMilli:!1}),1083:o.DatetimeCell.extend({includeDate:!1,includeTime:!0,includeMilli:!0}),1114:o.DatetimeCell.extend({includeDate:!0,includeTime:!0,includeMilli:!0}),1184:"string",1266:"string"},f=window.wcDocker;return t.extend(u.prototype.defaults.options,{onText:e("True"),offText:e("False"),onColor:"success",offColor:"ternary",size:"mini"}),t.extend(i.NodeStatistics,{init:function(){this.initialized||(this.initialized=!0,t.bindAll(this,"showStatistics","toggleVisibility","__createMultiLineStatistics","__createSingleLineStatistics","__loadMoreRows"),t.extend(this,{collection:new a.Collection(null),statistic_columns:[{editable:!1,name:"statistics",label:e("Statistics"),cell:"string",headerCell:o.Extension.CustomHeaderCell,cellHeaderClasses:"width_percent_25"},{editable:!1,name:"value",label:e("Value"),cell:"string"}],columns:null,grid:null}),this.panel=i.docker.findPanels("statistics"),this.panel.length>0&&this.toggleVisibility(this.panel[0].isVisible()))},toggleVisibility:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){this.panel=i.docker.findPanels("statistics");var a=i.tree,r=a.selected(),o=r&&a.itemData(r),s=r&&o&&i.Nodes[o._type];i.NodeStatistics.showStatistics.apply(i.NodeStatistics,[r,o,s]),i.Events.on("pgadmin-browser:tree:selected",i.NodeStatistics.showStatistics),i.Events.on("pgadmin-browser:tree:refreshing",i.NodeStatistics.refreshStatistics,this)}else t&&n(this.panel[0]).data("node-prop",""),i.Events.off("pgadmin-browser:tree:selected",i.NodeStatistics.showStatistics),i.Events.off("pgadmin-browser:tree:refreshing",i.NodeStatistics.refreshStatistics,this)},__updateCollection:function(a,l,c,u){var p=this.panel[0].layout().scene().find(".pg-panel-content"),g=p.find(".pg-panel-statistics-message"),b=p.find(".pg-panel-statistics-container"),h=this.panel,m=this,_="",v=u;if(l){_=e("No statistics are available for the selected object.");var y=l.getTreeNodeHierarchy(c),w={node_type:u,url:a};if(t.isEqual(n(h[0]).data("node-prop"),w))return;if(n(h[0]).data("node-prop",w),d.nodeHasStatistics(l,c)){var x;_="";!function t(){n.ajax({url:a,type:"GET",beforeSend:function(t){t.setRequestHeader(r.csrf_token_header,r.csrf_token),x=setTimeout((function(){g.text(e("Retrieving data from the server...")),g.removeClass("d-none"),m.grid&&m.grid.remove()}),1e3)}}).done((function(t){if(clearTimeout(x),g.text(""),t.data){var n=m.data=t.data;l.hasCollectiveStatistics||n.rows.length>1?(i.Events.on("pgadmin-browser:panel-statistics:"+f.EVENT.SCROLLED,m.__loadMoreRows),m.__createMultiLineStatistics.call(m,n,l.statsPrettifyFields)):(i.Events.off("pgadmin-browser:panel-statistics:"+f.EVENT.SCROLLED,m.__loadMoreRows),m.__createSingleLineStatistics.call(m,n,l.statsPrettifyFields)),m.grid&&(delete m.grid,m.grid=null),m.grid=new o.Grid({emptyText:e("No data found"),columns:m.columns,collection:m.collection,className:"backgrid presentation table table-bordered table-noouter-border table-hover"}),m.grid.render(),b.empty(),b.append(m.grid.$el),g.hasClass("d-none")||g.addClass("d-none"),b.removeClass("d-none")}else t.info&&(b.hasClass("d-none")||b.addClass("d-none"),g.text(t.info),g.removeClass("d-none"))})).fail((function(n,a,r){var o=y[v].label;i.Events.trigger("pgadmin:node:retrieval:error","statistics",n,a,r,c),s.pgHandleItemError(n,a,r,{item:c,info:y})||s.pgNotifier(a,n,e("Error retrieving the information - %s",r||o),(function(e){"CRYPTKEY_SET"===e?t():console.warn(arguments)})),g.text(e("Failed to retrieve data from the server."))}))}()}}""!=_&&(b.hasClass("d-none")||b.addClass("d-none"),g.removeClass("d-none"),g.text(_))},refreshStatistics:function(e,a,r){var i=this,o={node_type:a._type,url:r.generate_url(e,"stats",a,!0)};t.isEqual(n(i.panel[0]).data("node-prop"),o)&&(n(i.panel[0]).data("node-prop",""),i.showStatistics(e,a,r))},showStatistics:function(e,t,n){var a=this;n&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout((function(){a.__updateCollection.call(a,n.generate_url(e,"stats",t,!0),n,e,t._type)}),400))},__createMultiLineStatistics:function(e,n){var a=e.rows,r=e.columns;for(var i in this.columns=[],r){var o=r[i],s=p[o.type_code]||"string";"PID"==o.name&&(s=s.extend({orderSeparator:""}));var l={editable:!1,name:o.name,cell:s};-1!=t.indexOf(n,o.name)&&(l.formatter=c),this.columns.push(l)}this.collection.reset(a.splice(0,50))},__loadMoreRows:function(){var e=n(".pg-panel-statistics-container").closest(".wcFrameCenter")[0];if(e.scrollHeight-10<e.scrollTop+e.offsetHeight){var t=this.data.rows;t.length>0&&this.collection.add(t.splice(0,50))}},__createSingleLineStatistics:function(e,n){var a,r=e.rows[0],i=e.columns,o=[];for(var s in this.columns=this.statistic_columns,i)a=i[s].name,o.push({statistics:a,value:r&&r[a]?-1!=t.indexOf(n,a)?l(r[a]):r[a]:null});this.collection.reset(o)}}),i.NodeStatistics}.apply(t,a))||(e.exports=r)},76310:(e,t,n)=>{var a,r;n(69826),n(68309),n(9653),n(32564),a=[n(91669),n(28008),n(19755),n(64492),n(72316),n(55455),n(55112),n(12030),n(58894),n(23602),n(7167),n(77019)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c){return o.Preferences||(o.Preferences={init:function(){this.initialized||(this.initialized=!0,i.dialog("preferencesDlg",(function(){var u,p=[],f=n("<div class='preferences_dialog d-flex flex-row'></div>"),g=r.Model.extend({idAttribute:"id",defaults:{id:void 0,value:void 0}}),b={},h=this.preferences=new(r.Collection.extend({model:g,url:t("preferences.index"),updateAll:function(){for(var e in b)this.get(e).save();return!0}}))(null);h.on("reset",(function(){b={}})),h.on("change",(function(e){var t=e.get("id");t in b?a.isEqual(e.get("value"),b[t])&&delete b[t]:b[t]=e._previousAttributes.value}));var m=function e(t,n){var a=n?t.itemData(n):null;a&&a.preferences?t.select(n):(n=t.first(n),e(t,n))},_=function(t,n,i,o){var l,d,c=(i=i||n.selected())?n.itemData(i):null;switch(o){case"selected":if(!c)break;if(c.preferences){f.find(".preferences_content"),l=c.preferences,d=f.find(".preferences_content"),p&&a.each(p,(function(e){"$sel"in e&&e.$sel.data("select2").isOpen()&&e.$sel.data("select2").close(),e.remove()})),d.empty(),p=[],a.each(l,(function(e){var t=h.get(e.id);t.errorModel=new r.Model;var n=new s.Field(a.extend({},e,{id:"value",name:"value"})),i=new(n.get("control"))({field:n,model:t});d.append(i.render().$el),p.push(i)}));break}m(n,i);break;case"added":if(!c)break;c.preferences&&a.isArray(c.preferences)&&a.each(c.preferences,(function(t){h.add({id:t.id,value:t.value,category_id:c.id,mid:c.mid,name:t.name}),t.control||(t.control=function(t){switch(t.type){case"text":return"input";case"boolean":return t.options={onText:e("True"),offText:e("False"),onColor:"success",offColor:"ternary",size:"mini"},"switch";case"node":return t.options={onText:e("Show"),offText:e("Hide"),onColor:"success",offColor:"ternary",size:"mini",width:"56"},"switch";case"integer":case"numeric":return"numeric";case"date":return"datepicker";case"datetime":return"datetimepicker";case"options":var n=[],r=!1;return a.each(t.options,(function(e){if("label"in e&&"value"in e){var a={label:e.label,value:e.value};a.label=e.label,a.value=e.value,"preview_src"in e&&(a.preview_src=e.preview_src),n.push(a),e.value==t.value&&(r=!0)}else n.push({label:e,value:e}),e==t.value&&(r=!0)})),t.select2&&1==t.select2.tags&&t.value&&0==r&&n.push({label:t.value,value:t.value}),t.options=n,"select2";case"select2":var i=[];return a.each(t.options,(function(e){if("label"in e&&"value"in e){var t={label:e.label,value:e.value};t.label=e.label,t.value=e.value,"preview_src"in e&&(t.preview_src=e.preview_src),i.push(t)}else i.push({label:e,value:e})})),t.options=i,"select2";case"multiline":return"textarea";case"switch":return"switch";case"keyboardshortcut":return"keyboardShortcut";case"radioModern":return"radioModern";default:return console&&console.warn&&console.warn("Hmm.. We don't know how to render this type - ''"+t.type+"' of control."),"input"}}(t)),t.help_str&&(t.helpMessage=t.help_str)})),c.sortable=!1;break;case"loaded":setTimeout((function(){m(n,null)}),300)}return!0};return{main:function(){!function(){if(u){try{u.aciTree("destroy")}catch(e){console.warn(e.stack||e)}u.off("acitree",_),h.reset(),p&&a.each(p,(function(e){e.remove()})),p=[],f.empty()}}(),f.append("<div class='pg-el-sm-3 preferences_tree aciTree'></div>").append("<div class='pg-el-sm-9 preferences_content'>"+e("Category is not selected.")+"</div>"),(u=f.find(".preferences_tree")).on("acitree",_),u.aciTree({selectable:!0,expand:!0,fullRow:!0,ajax:{url:t("preferences.index")},animateRoot:!0,unanimated:!1,show:{duration:75},hide:{duration:75},view:{duration:75}}),d.modifyAcitreeAnimation(l,u.aciTree("api")),this.show()},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Preferences"),"aria-label":e("Help"),url:t("help.static",{filename:"preferences.html"})}},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:e("Save"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"}],focus:{element:0},options:{padding:!1,overflow:!1,title:e("Preferences"),closableByDimmer:!1,modal:!1,pinnable:!1}}},callback:function(t){if("dialog_help"==t.button.element.name)return t.cancel=!0,void l.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);if(t.button.text==e("Save")){var n=!1;h.updateAll();var r={};a.each(b,(function(t,a){var s=l.get_preference_for_id(Number(a));"dynamic_tabs"==s.name&&c._set_dynamic_tab(l,!s.value),r[s.module]||(r[s.module]=!0),"theme"==s.name&&(n=!0),"hide_shared_server"==s.name&&i.confirm(e("Browser tree refresh required"),e("A browser tree refresh is required. Do you wish to refresh the tree?"),(function(){o.Browser.tree.destroy({success:function(){return o.Browser.initializeBrowserTree(o.Browser),!0}})}),(function(){return h.reset(),b={},!0})).set("labels",{ok:e("Refresh"),cancel:e("Later")})})),n&&i.confirm(e("Refresh required"),e("A page refresh is required to apply the theme. Do you wish to refresh the page now?"),(function(){return location.reload(),!0}),(function(){return!0})).set("labels",{ok:e("Refresh"),cancel:e("Later")}),l.cache_preferences(r)}},build:function(){this.elements.content.appendChild(f.get(0)),i.pgDialogBuild.apply(this)},hooks:{onshow:function(){}}}})))},show:function(){i.preferencesDlg(!0).resizeTo(o.Browser.stdW.calc(o.Browser.stdW.lg),o.Browser.stdH.calc(o.Browser.stdH.lg))}}),o.Preferences}.apply(t,a))||(e.exports=r)},34408:(e,t,n)=>{var a,r;a=[n(19755),n(55455),n(55112),n(91669),n(28008),n(12030)],void 0===(r=function(e,t,n,a,r){return(n=n||window.pgAdmin||{}).Settings||(n.Settings={init:function(){this.initialized||(this.initialized=!0)},show:function(){t.confirm(a("Reset layout"),a("Are you sure you want to reset the current layout? This will cause the application to reload and any un-saved data will be lost."),(function(){var t=e('<div id="reloading-indicator"></div>');e("body").append(t),e.ajax({url:r("settings.reset_layout"),type:"DELETE",async:!1}).done((function(){e(window).off("unload"),window.onbeforeunload=null,location.reload(!0)})).fail((function(){console.warn("Something went wrong on server while resetting layout.")}))}),(function(){}))}}),n.Settings}.apply(t,a))||(e.exports=r)},63586:(e,t,n)=>{var a,r;a=[n(55112),n(66539),n(14511)],void 0===(r=function(e){var t=function(e){for(var t in e){var n=e[t];n.init&&"function"==typeof n.init?n.init():n.Init&&"function"==typeof n.Init&&n.Init()}};t(e),t(e.Browser),t(e.Tools),e.Browser.create_menus()}.apply(t,a))||(e.exports=r)},20811:(e,t,n)=>{n(69826),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=(a=n(4631))&&a.__esModule?a:{default:a};n(54086),n(64020),n(20017),n(88657),n(89700),n(71707),n(3585),n(69109),n(55292),n(81699),n(32095),n(14568),n(4328),n(82801),n(14504),n(90338),n(18473),r.default.commands.focusOut=function(){event.stopPropagation(),document.activeElement.blur(),event.currentTarget.hasOwnProperty("parents")&&event.currentTarget.parents().find(".sql-code-control")&&event.currentTarget.parents().find(".sql-code-control").focus()},r.default.defineInitHook((function(e){e.addKeyMap({Tab:function(e){e.somethingSelected()?e.execCommand("indentMore"):e.getOption("indentWithTabs")?e.replaceSelection("\t","end","+input"):e.execCommand("insertSoftTab")}})})),r.default.keyMap.default.Esc="focusOut";var i=r.default;t.default=i},73409:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(81812),n(52947),n(33059),n(26491),n(10883),n(98463),n(51827),n(98276),n(4165),n(25080),n(34964),n(35337),n(79387),n(5205);var a=window.Slick;t.default=a},35433:(e,t,n)=>{n(82772),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.Dialog=void 0;var a=s(n(91669)),r=n(13717),i=s(n(12030)),o=n(82794);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a,r,o,s){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i.default;l(this,e),this.errorAlertTitle=t,this.alertify=o,this.pgBrowser=a,this.jquery=r,this.dialogModel=s,this.backform=d,this.dialogContainerSelector=n}var t,n,s;return t=e,(n=[{key:"retrieveAncestorOfTypeServer",value:function(e){var t=null,n=e||this.pgBrowser.treeMenu.selected(),r=this.pgBrowser.treeMenu.findNodeByDomElement(n);if(r){var i,o=r.ancestorNode((function(e){return"database"===(i=e.getData())._type})),s=function(e){return"server"===(i=e.getData())._type};null!==o?i._label.indexOf("=")>=0?this.alertify.alert((0,a.default)(this.errorAlertTitle),(0,a.default)("Databases with = symbols in the name cannot be backed up or restored using this utility.")):o.anyParent(s)&&(t=i):r.anyFamilyMember(s)&&(t=i)}return null===t&&this.alertify.alert((0,a.default)(this.errorAlertTitle),(0,a.default)("Please select server or child node from the browser tree.")),t}},{key:"retrieveAncestorOfTypeDatabase",value:function(e){var t=null,n=e||this.pgBrowser.treeMenu.selected(),r=this.pgBrowser.treeMenu.findNodeByDomElement(n);if(r)if("database"===r.getData()._type)t=r.getData();else{var i=null;r.ancestorNode((function(e){return"database"===(i=e.getData())._type&&(t=i,!0)}))}return null===t&&this.alertify.alert((0,a.default)(this.errorAlertTitle),(0,a.default)("Please select a database or its child node from the browser.")),t}},{key:"hasBinariesConfiguration",value:function(e){var t="paths",n="pg_bin_dir",r=(0,a.default)("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(e.type&&"ppas"===e.type||"ppas"===e.server_type)&&(n="ppas_bin_dir",r=(0,a.default)("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var i=this.pgBrowser.get_preference(t,n);return i?!!i.value||(this.alertify.alert((0,a.default)("Configuration required"),r),!1):(this.alertify.alert((0,a.default)(this.errorAlertTitle),(0,a.default)("Failed to load preference %s of module %s",n,t)),!1)}},{key:"dialogName",value:function(){}},{key:"createOrGetDialog",value:function(e,t){var n=this.dialogName(t);if(!this.alertify[n]){var a=this;this.alertify.dialog(n,(function(){return a.dialogFactory(e,t)}))}return this.alertify[n]}},{key:"dialogFactory",value:function(e,t){return new r.DialogFactory(this.pgBrowser,this.jquery,this.alertify,this.dialogModel,this.backform,this.dialogContainerSelector).create(e,t)}},{key:"canExecuteOnCurrentDatabase",value:function(e){var t=o.getTreeNodeHierarchyFromIdentifier.apply(this.pgBrowser,[e]);return!(t.database&&t.database._label.indexOf("=")>=0&&(this.alertify.alert((0,a.default)(this.errorAlertTitle),(0,a.default)("Databases with = symbols in the name cannot be backed up or restored using this utility.")),1))}}])&&d(t.prototype,n),s&&d(t,s),e}();t.Dialog=c},13717:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.DialogFactory=void 0;var r,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(64951)),o=n(9066),s=(r=n(10713))&&r.__esModule?r:{default:r};function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t,n,a,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pgBrowser=t,this.jquery=n,this.alertify=a,this.dialogModel=r,this.backform=i,this.dialogContainerSelector=o}var t,n,a;return t=e,(n=[{key:"create",value:function(e,t){return"restore"===t?this.createRestoreDialog(e,t):"search_objects"===t?this.createSearchObjectsDialog(e,t):this.createBackupDialog(e,t)}},{key:"createRestoreDialog",value:function(e,t){return new o.RestoreDialogWrapper(this.dialogContainerSelector,e,t,this.jquery,this.pgBrowser,this.alertify,this.dialogModel,this.backform)}},{key:"createBackupDialog",value:function(e,t){return new i.BackupDialogWrapper(this.dialogContainerSelector,e,t,this.jquery,this.pgBrowser,this.alertify,this.dialogModel,this.backform)}},{key:"createSearchObjectsDialog",value:function(e,t){return new s.default(this.dialogContainerSelector,e,t,this.jquery,this.pgBrowser,this.alertify,this.dialogModel,this.backform)}}])&&d(t.prototype,n),a&&d(t,a),e}();t.DialogFactory=c},22378:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(69826),n(68309),n(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.DialogWrapper=void 0;var r,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(44092)),o=(r=n(19755))&&r.__esModule?r:{default:r};function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t,n,a,r,i,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hooks={onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})}},this.dialogContainerSelector=t,this.dialogTitle=n,this.jquery=a,this.pgBrowser=r,this.alertify=i,this.dialogModel=o,this.backform=s}var t,n,a;return t=e,(n=[{key:"build",value:function(){this.alertify.pgDialogBuild.apply(this)}},{key:"wasHelpButtonPressed",value:function(e){return"dialog_help"===e.button.element.name||"object_help"===e.button.element.name}},{key:"getSelectedNodeData",value:function(e){if(this.isNodeSelected(e)){var t=e.getData();return t||void 0}}},{key:"focusOnDialog",value:function(e){var t=(0,o.default)(e.elements.body).find(".backform-tab");t.attr("tabindex",-1),this.pgBrowser.keyboardNavigation.getDialogTabNavigator((0,o.default)(e.elements.dialog));var n=t.find(".tab-content:first > .tab-pane.active:first");0===n.length&&e.elements.content.innerHTML&&(n=(0,o.default)(e.elements.content)),i.findAndSetFocus(n)}},{key:"isNodeSelected",value:function(e){return e}}])&&l(t.prototype,n),a&&l(t,a),e}();t.DialogWrapper=d},61329:(e,t,n)=>{n(92222);var a,r=(a=n(64492))&&a.__esModule?a:{default:a};e.exports={generate_url:function(e,t,n,a,i,o){var s="";return r.default.each(r.default.sortBy(r.default.pick(t,i),(function(e){return e.priority})),(function(e){s="".concat(s,"/").concat(encodeURI(e._id))})),s=o?"".concat(s,"/").concat(o):"".concat(s,"/"),"".concat(e).concat(a,"/").concat(n).concat(s)}}},84059:(e,t,n)=>{n(76456)},76456:(e,t,n)=>{n(42830)},9467:(e,t,n)=>{n(60043)},42830:(e,t,n)=>{n(9467),n(42331)},42331:(e,t,n)=>{n(69070),n(73210),Object.defineProperty(t,"__esModule",{value:!0}),t.ModelValidation=void 0;var a=o(n(91669)),r=o(n(64492)),i=n(30033);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.err={},this.errmsg="",this.model=t}var t,n,o;return t=e,o=[{key:"isEmptyString",value:function(e){return r.default.isUndefined(e)||r.default.isNull(e)||""===String(e).trim()}}],(n=[{key:"validate",value:function(){var t=this.model.get("service"),n=this.model.get("pub");return!this.model.isNew()&&"id"in this.model.sessAttrs?(this.err.id=(0,a.default)("The ID cannot be changed."),this.errmsg=this.err.id):this.model.errorModel.unset("id"),this.checkForEmpty("name",(0,a.default)("Name must be specified.")),e.isEmptyString(t)?(this.setNullValueForEmptyString("service"),this.checkHostAndHostAddress(),this.checkForEmpty("db",(0,a.default)("Maintenance database must be specified.")),this.checkForEmpty("username",(0,a.default)("Username must be specified.")),this.checkForEmpty("port",(0,a.default)("Port must be specified.")),r.default.isUndefined(n)||this.checkForEmpty("pub",(0,a.default)("Publication must be specified."))):(this.checkForEmpty("db",(0,a.default)("Maintenance database must be specified.")),r.default.isUndefined(n)||this.checkForEmpty("pub",(0,a.default)("Publication must be specified.")),this.clearHostAddressAndDbErrors()),this.model.get("use_ssh_tunnel")&&(this.checkForEmpty("tunnel_host",(0,a.default)("SSH Tunnel host must be specified.")),this.checkForEmpty("tunnel_port",(0,a.default)("SSH Tunnel port must be specified.")),this.checkForEmpty("tunnel_username",(0,a.default)("SSH Tunnel username must be specified.")),this.model.get("tunnel_authentication")&&this.checkForEmpty("tunnel_identity_file",(0,a.default)("SSH Tunnel identity file must be specified."))),this.model.errorModel.set(this.err),r.default.size(this.err)?this.errmsg:null}},{key:"setNullValueForEmptyString",value:function(e){var t=this.model.get(e);r.default.isUndefined(t)||r.default.isNull(t)||""===String(t).trim()&&this.model.set(e,null)}},{key:"clearHostAddressAndDbErrors",value:function(){var e=this;r.default.each(["host","hostaddr","db","username","port"],(function(t){e.setNullValueForEmptyString(t),e.model.errorModel.unset(t)}))}},{key:"checkHostAndHostAddress",value:function(){var e=this.model.get("pub"),t=r.default.isUndefined(e)?(0,a.default)("Either Host name, Address or Service must be specified."):(0,a.default)("Host name, Address must be specified.");this.checkForEmpty("host",t)&&this.checkForEmpty("hostaddr",t)?this.errmsg=this.errmsg||t:(this.errmsg=void 0,delete this.err.host,delete this.err.hostaddr),this.checkForValidIp(this.model.get("hostaddr"),(0,a.default)("Host address must be valid IPv4 or IPv6 address."))}},{key:"checkForValidIp",value:function(e,t){if(e)try{new i.Address4(e)}catch(n){try{new i.Address6(e)}catch(e){this.err.hostaddr=t,this.errmsg=t}}else this.model.errorModel.unset("hostaddr")}},{key:"checkForEmpty",value:function(t,n){var a=this.model.get(t);return e.isEmptyString(a)?(this.err[t]=n,this.errmsg=this.errmsg||n,!0):(this.model.errorModel.unset(t),!1)}}])&&s(t.prototype,n),o&&s(t,o),e}();t.ModelValidation=l},10416:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82772),n(47941),Object.defineProperty(t,"__esModule",{value:!0}),t.default=b,t.LineChart=function(e){return r.default.createElement(b,d({},e,{type:"line"}))};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(67294)),i=s(n(17757)),o=s(n(45697));function s(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var g={responsive:!0,maintainAspectRatio:!1,elements:{line:{tension:0,borderWidth:2,fill:!1}},layout:{padding:8},hover:{animationDuration:0}};function b(e){var t=e.type,n=void 0===t?"line":t,a=e.id,o=e.options,s=e.data,l=e.redraw,d=void 0!==l&&l,c=f(e,["type","id","options","data","redraw"]),p=r.default.useRef(),b=r.default.useRef(),h=i.default.helpers.configMerge(g,o),m=function(){var e=p.current.getContext("2d");b.current=new i.default(e,{type:n,data:s,options:h}),c.onInit&&c.onInit(b.current)},_=function(){b.current&&b.current.destroy()};return(0,r.useEffect)((function(){return m(),_}),[]),(0,r.useEffect)((function(){if(void 0!==b.current){b.current.data=s;for(var e=0;e<b.current.data.datasets.length;e++)b.current.data.datasets[e]=u(u({},b.current.data.datasets[e]),s.datasets[e]);b.current.options=h,b.current.update(c.updateOptions||{}),c.onUpdate&&c.onUpdate(b.current)}}),[s,o]),(0,r.useEffect)((function(){d&&(_(),m())}),[d]),r.default.createElement("canvas",{id:a,ref:p})}b.propTypes={type:o.default.string.isRequired,data:o.default.object.isRequired,options:o.default.object,updateOptions:o.default.object,onInit:o.default.func,onUpdate:o.default.func}},86620:(e,t,n)=>{var a,r;n(82772),n(74916),n(15306),n(23157),a=[n(19755),n(64492)],void 0===(r=function(e,t){return function(e,n){if(t.isUndefined(n)||t.isNull(n))return!0;n.startsWith("coll-")&&(n=n.replace("coll-",""));if(t.indexOf(["server_group","server","catalog_object_column"],n)>=0)return!0;var a=e.get_preference("browser","show_node_"+n);return!a||a.value}}.apply(t,a))||(e.exports=r)},90338:(e,t,n)=>{var a,r,i,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e=n.nmd(e),n(82526),n(41817),n(32165),n(82772),n(66992),n(94986),n(41539),n(78783),n(33948),o=function(e){e.registerHelper("fold","sql",(function(t,n){return function(t,n,a){for(var r,i,o=n.line,s=t.getLine(o),l=s.length,d=0,c=a[d].start,u=a[d].end;l>0;){var p=s.lastIndexOf(c,l),f=c,g=u;if(p<n.ch){if(++d>=a.length)return;c=a[d].start,u=a[d].end,l=s.length}else{if(i=t.getTokenAt(e.Pos(o,p+1)).type,!/^(comment|string)/.test(i)){r=p;break}l=p-1}}if(!(null==r||s.lastIndexOf(f)>r)){var b,h,m=1,_=t.lineCount();e:for(var v=o+1;v<_;++v)for(var y=t.getLine(v),w=0;;){var x=y.indexOf(f,w),k=y.indexOf(g,w);if(x<0&&(x=y.length),k<0&&(k=y.length),(w=Math.min(x,k))==y.length)break;if(t.getTokenAt(e.Pos(v,w+1)).type==i)if(w==x)++m;else if(!--m){b=v,h=w;break e}++w}if(null!=b&&b!=o+1)return{from:e.Pos(o,r+c.length),to:e.Pos(b,h)}}}(t,n,[{start:"BEGIN",end:"END;"},{start:"IF",end:"END IF"},{start:"LOOP",end:"END LOOP"},{start:"CASE",end:"END CASE"}])}))},"object"==s(t)&&"object"==s(e)?o(n(4631)):(r=[n(4631)],void 0===(i="function"==typeof(a=o)?a.apply(t,r):a)||(e.exports=i))},18473:(e,t,n)=>{var a;((a=n(4631))&&a.__esModule?a:{default:a}).default.defineExtension("centerOnLine",(function(e){var t=this.getScrollInfo().clientHeight,n=this.charCoords({line:e,ch:0},"local");this.scrollTo(null,(n.top+n.bottom-t)/2)}))},87789:(e,t,n)=>{n(41539),n(88674),Object.defineProperty(t,"__esModule",{value:!0}),t.setPGCSRFToken=function(e,t){if(!t)throw"csrf-token meta tag has not been set";var n=r.default.sync;r.default.sync=function(a,r,i){return i.beforeSend=function(n){n.setRequestHeader(e,t)},n(a,r,i)};var o=r.default.get;r.default.get=function(n,a,r){return r.beforeSend=function(n){n.setRequestHeader(e,t)},o(n,a,r)},a.default.ajaxSetup({beforeSend:function(n){n.setRequestHeader(e,t)}}),i.default.interceptors.request.use((function(n){return n.headers[e]=t,n}),(function(e){return Promise.reject(e)}))};var a=o(n(19755)),r=o(n(72316)),i=o(n(9669));function o(e){return e&&e.__esModule?e:{default:e}}},50464:(e,t,n)=>{n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.useInterval=function(e,t){var n=(0,a.useRef)();(0,a.useEffect)((function(){n.current=e})),(0,a.useEffect)((function(){if(t>-1){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},t.usePrevious=function(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e})),t.current},t.useDelayDebounce=function(e,t,n){(0,a.useEffect)((function(){var a=setTimeout((function(){t&&e(t)}),n);return function(){return clearTimeout(a)}}),[t])};var a=n(67294)},89087:(e,t,n)=>{n(69826),n(24812),n(69070),n(32564);var a=o(n(19755)),r=o(n(42441)),i=n(44092);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dialogContainer=t,this.tabSwitching=!1,this.tabs=this.dialogContainer.find(".nav-tabs:visible"),this.tabs.length>0&&(this.tabs=this.tabs[0]),this.dialogTabBackward=(0,i.parseShortcutValue)(n),this.dialogTabForward=(0,i.parseShortcutValue)(a),(0,r.default)(this.dialogContainer[0]).bind(this.dialogTabBackward,this.onKeyboardEvent.bind(this)),(0,r.default)(this.dialogContainer[0]).bind(this.dialogTabForward,this.onKeyboardEvent.bind(this))}var t,n,o;return t=e,(n=[{key:"onKeyboardEvent",value:function(e,t){var n=this.dialogContainer.find(".tab-content:first > .tab-pane.active:first:visible"),a=this.isActivePaneHasChildTabs(n);this.tabSwitching||(this.tabSwitching=!0,a&&this.navigate(t,a.childTab,a.childTabPane,e)||this.navigate(t,this.tabs,n,e))}},{key:"isActivePaneHasChildTabs",value:function(e){var t=e.find(".nav-tabs:first:visible");return t.length>0?{childTab:t,childTabPane:e.find(".tab-content:first > .tab-pane.active:first:visible")}:null}},{key:"navigate",value:function(e,t,n,a){return e==this.dialogTabBackward?this.navigateBackward(t,n,a):e==this.dialogTabForward&&this.navigateForward(t,n,a)}},{key:"navigateBackward",value:function(e,t,n){var r,o,s=this,l=(0,a.default)(e).find("li").has("a.active").prev("li");return l.length>0?(l.find("a").tab("show"),(o=(r=t.prev()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,i.findAndSetFocus)(o):(0,i.findAndSetFocus)(r),setTimeout((function(){s.tabSwitching=!1}),200),n.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"navigateForward",value:function(e,t,n){var r,o,s=this,l=(0,a.default)(e).find("li").has("a.active").next("li");return l.length>0?(l.find("a").tab("show"),(o=(r=t.next()).find(".tab-content:first > .tab-pane.active:first:visible")).length>0?(0,i.findAndSetFocus)(o):(0,i.findAndSetFocus)(r),setTimeout((function(){s.tabSwitching=!1}),200),n.stopPropagation(),!0):(this.tabSwitching=!1,!1)}},{key:"detach",value:function(){(0,r.default)(this.dialogContainer[0]).unbind(this.dialogTabBackward),(0,r.default)(this.dialogContainer[0]).unbind(this.dialogTabForward)}}])&&s(t.prototype,n),o&&s(t,o),e}();e.exports={dialogTabNavigator:l}},91669:(e,t,n)=>{var a,r;n(69600),n(21249),n(74916),n(23123),a=[n(52536)],void 0===(r=function(e){return function(t){var n=e[t]?e[t]:t;if(1==arguments.length)return n;try{var a=arguments;return n.split("%s").map((function(e,t){return t>0?t<a.length?[a[t],e].join(""):["%s",e].join(""):e})).join("")}catch(e){return console.error(e),n}}}.apply(t,a))||(e.exports=r)},72945:(e,t,n)=>{n(92222),n(57327),n(69826),n(74916),n(64765),Object.defineProperty(t,"__esModule",{value:!0}),t.processEventDebugger=function(e,t,n,r){var i,o,s="";this.validateShortcutKeys(n.edit_grid_values,t)?(this._stopEventPropagation(t),(i=e.find('div.wcPanelTabContent:not(".wcPanelTabContentHidden")')).length&&(o=(0,a.default)(i).find("td.editable:first")).length&&o.trigger("click")):this.validateShortcutKeys(n.move_next,t)?(this._stopEventPropagation(t),s=l(r,"right")):this.validateShortcutKeys(n.move_previous,t)?(this._stopEventPropagation(t),s=l(r,"left")):this.validateShortcutKeys(n.switch_panel,t)&&(this._stopEventPropagation(t),s=l(r,"switch"));return s},t.processEventQueryTool=function(e,t,n,r){if(e.isQueryRunning())return;var i=n.which||n.keyCode,o="",s=e.preferences.execute_query,d=e.preferences.explain_query,c=e.preferences.explain_analyze_query,u=e.preferences.download_results,p=e.preferences.move_next,f=e.preferences.move_previous,g=e.preferences.switch_panel,b=e.preferences.toggle_case,h=e.preferences.commit_transaction,m=e.preferences.rollback_transaction,_=e.preferences.save_data,v=e.preferences.show_query_tool;if(this.validateShortcutKeys(s,n))this._stopEventPropagation(n),t.executeQuery(e);else if(this.validateShortcutKeys(d,n))this._stopEventPropagation(n),t.explain(e);else if(this.validateShortcutKeys(c,n))this._stopEventPropagation(n),t.explainAnalyze(e);else if(this.validateShortcutKeys(u,n))e.is_save_results_to_file_disabled||(this._stopEventPropagation(n),t.download(e));else if(this.validateShortcutKeys(b,n))this._stopEventPropagation(n),t.toggleCaseOfSelectedText(e);else if(this.validateShortcutKeys(h,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeCommit(e));else if(this.validateShortcutKeys(m,n))e.is_transaction_buttons_disabled||(this._stopEventPropagation(n),t.executeRollback(e));else if(this.validateShortcutKeys(_,n))this._stopEventPropagation(n),t.saveDataChanges(e);else if(this.validateShortcutKeys(v,n))this._stopEventPropagation(n),t.openQueryTool(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&191===i)this._stopEventPropagation(n),t.commentBlockCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&191===i)this._stopEventPropagation(n),t.commentLineCode(e);else if((this.isMac()&&!this.isKeyCtrlAltShift(n)&&n.metaKey||!this.isMac()&&!this.isKeyAltShift(n)&&n.ctrlKey)&&190===i)this._stopEventPropagation(n),t.uncommentLineCode(e);else if((this.isMac()&&n.metaKey||!this.isMac()&&n.ctrlKey)&&!n.altKey&&n.shiftKey&&75===i)this._stopEventPropagation(n),t.formatSql(e);else if(27==i)t.focusOut(e),(0,a.default)(n.target).hasClass("dropdown-item")&&(0,a.default)(n.target).closest(".dropdown-submenu").length>0&&(0,a.default)(n.target).closest(".dropdown-submenu").find(".dropdown-menu").removeClass("show");else if(this.validateShortcutKeys(p,n))this._stopEventPropagation(n),o=l(r,"right");else if(this.validateShortcutKeys(f,n))this._stopEventPropagation(n),o=l(r,"left");else if(this.validateShortcutKeys(g,n))this._stopEventPropagation(n),o=l(r,"switch");else if(38===i||40===i){if((0,a.default)(n.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(n);var y=(0,a.default)(n.target).closest("li");for((0,a.default)(n.target).closest(".dropdown-menu").find(".show").removeClass("show"),38===i?y=y.prev():40===i&&(y=y.next());y.hasClass("dropdown-divider")||y.hasClass("d-none")||y.find(".dropdown-item").first().hasClass("disabled");)38===i?y=y.prev():40===i&&(y=y.next());y.find(".dropdown-item").trigger("focus")}}else if(37===i||39===i){if((0,a.default)(n.target).closest(".dropdown-menu").length>0){this._stopEventPropagation(n);var w=(0,a.default)(n.target).closest("li");if(39===i)w.hasClass("dropdown-submenu")&&(w.find(".dropdown-menu").addClass("show"),w.find(".dropdown-menu .dropdown-item").first().trigger("focus"));else if(37===i){var x=w.closest(".dropdown-menu");x.closest(".dropdown-submenu").length>0&&(x.removeClass("show"),(w=x.closest(".dropdown-submenu")).find(".dropdown-item").trigger("focus"))}}}else{var k=this.validateMacros(e,n);!1!==k&&(this._stopEventPropagation(n),t.executeMacro(e,k))}return o},t.focusDockerPanel=l,t.validateShortcutKeys=function(e,t){if(!e)return!1;var n=t.which||t.keyCode;return e.alt==t.altKey&&e.shift==t.shiftKey&&e.control==t.ctrlKey&&e.key.key_code==n},t.validateMacros=function(e,t){var n=t.which||t.keyCode,a=e.macros.filter((function(e){return e.alt==t.altKey&&e.control==t.ctrlKey&&e.key_code==n}));if(1==a.length)return a[0].id;return!1},t._stopEventPropagation=function(e){e.cancelBubble=!0,e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.isMac=function(){return-1!=window.navigator.platform.search("Mac")},t.isKeyCtrlAlt=function(e){return e.ctrlKey||e.altKey},t.isKeyAltShift=function(e){return e.altKey||e.shiftKey},t.isKeyCtrlShift=function(e){return e.ctrlKey||e.shiftKey},t.isKeyCtrlAltShift=function(e){return e.ctrlKey||e.altKey||e.shiftKey},t.isAltShiftBoth=function(e){return e.altKey&&e.shiftKey&&!e.ctrlKey},t.isCtrlShiftBoth=function(e){return e.ctrlKey&&e.shiftKey&&!e.altKey},t.isCtrlAltBoth=function(e){return e.ctrlKey&&e.altKey&&!e.shiftKey},t.shortcut_key=s,t.shortcut_title=function(e,t){var n="";if(null==t)return n;t.alt&&(n=(0,r.default)("Alt")+"+");t.shift&&(n+=(0,r.default)("Shift")+"+");t.control&&(n+=(0,r.default)("Ctrl")+"+");return n+=s(t),"".concat(e," (").concat(n,")")},t.shortcut_accesskey_title=function(e,t){return"".concat(e," (")+(0,r.default)("accesskey")+" + ".concat(s(t),")")};var a=o(n(19755)),r=o(n(91669)),i=n(44092);function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t="";return e.key&&e.key.char&&(t=e.key.char.toUpperCase()),t}function l(e,t){if(e){if(!e._focusFrame){if(0==e._frameList.length&&0==e._frameList[0]._panelList.length)return;e._frameList[0]._panelList[e._frameList[0]._curTab].focus()}var n=e._focusFrame,a=0,r=!1;if("switch"==t){var o,s=e._frameList.length;for(o=0;o<s&&n!==e._frameList[o];o++);a=(n=e._frameList[(0,i.getMod)(o+1,s)])._curTab,r=!0}else"left"==t?a=(0,i.getMod)(n._curTab-1,n._panelList.length):"right"==t&&(a=(0,i.getMod)(n._curTab+1,n._panelList.length));var l=n._panelList[a];return l.$container.find('*[tabindex]:not([tabindex="-1"])').trigger("focus"),l.focus(r),l._type}}},42591:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nodeHasStatistics=function(e,t){if("function"==typeof e.hasStatistics){var n=e.getTreeNodeHierarchy(t);return e.hasStatistics(n)}return e.hasStatistics}},23602:(e,t,n)=>{n(69826);var a=o(n(19755)),r=o(n(64492)),i=o(n(1950));function o(e){return e&&e.__esModule?e:{default:e}}e.exports={modifyAcitreeAnimation:function(e,t){var n=e.get_preference("browser","enable_acitree_animation").value;r.default.isUndefined(t)&&(t=e.tree),n?t.options({animateRoot:!0,unanimated:!1,show:r.default.extend(t.options().show,{duration:75}),hide:r.default.extend(t.options().hide,{duration:75}),view:r.default.extend(t.options().view,{duration:75})}):t.options({animateRoot:!1,unanimated:!0,show:r.default.extend(t.options().show,{duration:0}),hide:r.default.extend(t.options().hide,{duration:0}),view:r.default.extend(t.options().view,{duration:0})})},modifyAlertifyAnimation:function(e){(r.default.isUndefined(e)||r.default.isNull(e))&&(e=i.default.pgAdmin.Browser),e.get_preference("browser","enable_alertify_animation").value?((0,a.default)(document).find("body").removeClass("alertify-no-animation"),r.default.each(document.getElementsByTagName("iframe"),(function(e){(0,a.default)(e.contentDocument).find("body").removeClass("alertify-no-animation")}))):((0,a.default)(document).find("body").addClass("alertify-no-animation"),r.default.each(document.getElementsByTagName("iframe"),(function(e){(0,a.default)(e.contentDocument).find("body").addClass("alertify-no-animation")})))}}},90585:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.url=function(e,t,n){var a=i.default.treeMenu.findNodeByDomElement(t),o=null;a&&a.anyFamilyMember((function(e){var t=e.getData(),a=i.default.Nodes[t._type],s=a&&a.dashboard;return(0,r.isFunction)(s)&&(s=s.apply(a,[e,t,n])),null!==(o=(0,r.isString)(s)?s:null)}));return o};var a,r=n(44092),i=(a=n(58894))&&a.__esModule?a:{default:a}},16194:(e,t,n)=>{var a=n(64492);n(82772),Object.defineProperty(t,"__esModule",{value:!0}),t.enabled=function(e,t,n,i){if(!(0,r.isValidTreeNodeData)(n))return!1;var o=e.findNodeByDomElement(i);if(!o)return!1;return function(e){return"database"===e._type&&e.allowConn||"database"!==e._type}(n)&&-1!==a.indexOf(t,n._type)&&!function(e){return e.anyFamilyMember((function(e){return"catalog"===e.getData()._type}))}(o)};var r=n(79226)},55112:(e,t,n)=>{var a;n(55112);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(82526),n(41817),n(32165),n(66992),n(47042),n(83710),n(41539),n(54678),n(91058),n(74916),n(39714),n(78783),n(4723),n(15306),n(23123),n(33948),void 0===(a=function(){var e=window.pgAdmin=window.pgAdmin||{};function t(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}return function(e,t,n){function a(t,n,a,i){a=a||"width";var o,l,d,p=(n.match(c)||[])[2],f="px"===p?1:u[p+"toPx"];if(f||/r?em/i.test(p)&&!i)t=f?t:"rem"===p?s:"fontSize"===a&&+e.parentNode||t,f=f||parseFloat(r(t,"fontSize")),d=parseFloat(n)*f;else{l=(o=t.style)[a];try{o[a]=n}catch(e){return 0}d=o[a]?parseFloat(r(t,a)):0,o[a]=undefined!==l?l:null}return d}function r(e,t){var n,o,s,l,u,p=["paddingTop","paddingBottom","borderTop","borderBottom"],f=4;if(o=e.style["pixel"+t.charAt(0).toUpperCase()+t.slice(1)],"%"===(s=((n=d?d(e)[t]:o?o+"px":"fontSize"===t?a(e,"1em","left",1)+"px":e.currentStyle[t]).match(c)||[])[2])&&i)if(/^top|bottom/.test(t)){for(l=(u=e.parentNode||e).offsetHeight;f--;)l-=parseFloat(r(u,p[f]));n=parseFloat(n)/100*l+"px"}else n=a(e,n);else("auto"===n||s&&"px"!==s)&&d?n=0:s&&"px"!==s&&!d&&(n=a(e,n)+"px");return n}var i,o=t.createElement("test"),s=t.documentElement,l=t.defaultView,d=l&&l.getComputedStyle,c=/^(-?[\d+\.\-]+)([a-z]+|%)$/i,u={},p=[1/25.4,1/2.54,1/72,1/6],f=["mm","cm","pt","pc","in","mozmm"],g=6;for(s.appendChild(o),d&&(o.style.marginTop="1%",i="1%"===d(o).marginTop);g--;)u[f[g]+"toPx"]=p[g]?p[g]*u.inToPx:a(o,"1"+f[g]);s.removeChild(o),e.toPx=a}(e,window.document),e.natural_sort=function(e,t,n){n=n||{};var a,i,o=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,s=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,c=/^0/,u=function(e){return n.insensitive&&(""+e).toLowerCase()||""+e},p=u(e).replace(s,"")||"",f=u(t).replace(s,"")||"",g=p.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),b=f.replace(o,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),h=parseInt(p.match(d))||1!==g.length&&p.match(l)&&Date.parse(p),m=parseInt(f.match(d))||h&&f.match(l)&&Date.parse(f)||null,_=n.desc?-1:1;if(m){if(h<m)return-1*_;if(h>m)return 1*_}for(var v=0,y=Math.max(g.length,b.length);v<y;v++){if(a=!(g[v]||"").match(c)&&parseFloat(g[v])||g[v]||0,i=!(b[v]||"").match(c)&&parseFloat(b[v])||b[v]||0,isNaN(a)!==isNaN(i))return(isNaN(a)?1:-1)*_;if(r(a)!==r(i)&&(a+="",i+=""),a<i)return-1*_;if(a>i)return 1*_}return 0},e.numeric_comparator=function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:e==t?0:1},Math.round10||(Math.round10=function(e,n){return t("round",e,n)}),Math.floor10||(Math.floor10=function(e,n){return t("floor",e,n)}),Math.ceil10||(Math.ceil10=function(e,n){return t("ceil",e,n)}),e}.apply(t,[]))||(e.exports=a)},75471:(e,t,n)=>{n(47042),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(e.showOnScroll){var t=a.default.fn.select2.amd.require("select2/utils"),n=function(e,t){this.$element=e,this.options=t,this._dataToConvert=t.get("data")||[]},i=null;i=null!=e.data?a.default.fn.select2.amd.require("select2/data/array"):a.default.fn.select2.amd.require("select2/data/select"),t.Extend(n,i),n.prototype.query=function(e,t){var n=[],r=this;e.page||(e.page=1);this.$element.children().each((function(){var t=(0,a.default)(this);if(t.is("option")||t.is("optgroup")){var i=r.item(t),o=r.matches(e,i);null!==o&&n.push(o)}})),t({results:n.slice(20*(e.page-1),20*e.page),pagination:{more:n.length>=20*e.page}})},e.minimumInputLength>0&&(n=t.Decorate(n,a.default.fn.select2.amd.require("select2/data/minimumInputLength"))),e.maximumInputLength>0&&(n=t.Decorate(n,a.default.fn.select2.amd.require("select2/data/maximumInputLength"))),e.maximumSelectionLength>0&&(n=t.Decorate(n,a.default.fn.select2.amd.require("select2/data/maximumSelectionLength"))),e.tags&&(n=t.Decorate(n,a.default.fn.select2.amd.require("select2/data/tags"))),null==e.tokenSeparators&&null==e.tokenizer||(n=t.Decorate(n,a.default.fn.select2.amd.require("select2/data/tokenizer"))),e.dataAdapter=n,r.default.isUndefined(e.ajax)&&(e.ajax={})}return e},n(20454);var a=i(n(19755)),r=i(n(64492));function i(e){return e&&e.__esModule?e:{default:e}}},73870:(e,t)=>{var n;void 0===(n=function(){return function(e){var t=Math.abs(e),n=0,a=["bytes","kB","MB","GB","TB","PB"];if(t<10240)return t+" "+a[n];do{t/=1024,n+=1}while(t>10239);return Math.round(t)+" "+a[n]}}.apply(t,[]))||(e.exports=n)},79387:(e,t,n)=>{var a,r=n(19755);n(69826),n(24812),(a=r).extend(!0,window,{Slick:{Plugins:{HeaderButtons:function(e){var t,n=this,r=new window.Slick.EventHandler,i={buttonCssClass:"slick-header-button"};function o(t,n){var r=n.column;if(r.header&&r.header.buttons)for(var i=r.header.buttons.length;i--;){var o=r.header.buttons[i],s=a("<div></div>").addClass(e.buttonCssClass).data("column",r).data("button",o);o.content&&s.append(o.content),o.showOnHover&&s.addClass("slick-header-button-hidden"),o.image&&s.css("backgroundImage","url("+o.image+")"),o.cssClass&&s.addClass(o.cssClass),o.tooltip&&s.attr("title",o.tooltip),o.command&&s.data("command",o.command),o.handler&&s.bind("click",o.handler),s.bind("click",l).prependTo(n.node)}}function s(t,n){var r=n.column;r.header&&r.header.buttons&&a(n.node).find("."+e.buttonCssClass).remove()}function l(e){var r=a(this).data("command"),i=a(this).data("column"),o=a(this).data("button");null!=r&&(n.onCommand.notify({grid:t,column:i,command:r,button:o},e,n),t.updateColumnHeader(i.id)),e.preventDefault(),e.stopPropagation()}a.extend(this,{init:function(n){e=a.extend(!0,{},i,e),t=n,r.subscribe(t.onHeaderCellRendered,o).subscribe(t.onBeforeHeaderCellDestroy,s),t.setColumns(t.getColumns())},destroy:function(){r.unsubscribeAll()},onCommand:new window.Slick.Event})}}}})},5205:(e,t,n)=>{var a,r=n(19755);n(69826),(a=r).extend(!0,window,{Slick:{AutoColumnSize:function(e){var t,n,r,i={A:65};function o(r){var o,s;r.ctrlKey&&r.shiftKey&&r.keyCode===i.A&&(o=n.find(".slick-header-column"),s=t.getColumns(),o.each((function(n,r){var i=a(r).data("column"),o=d(r),c=t.getColumnIndex(i.id),u=s[c],p=Math.max(o,l(i,c))+1;p=Math.min(e,p),u.width=p})),t.setColumns(s),t.onColumnsResized.notify())}function s(e){var n=a(e.currentTarget).closest(".slick-header-column"),r=n.data("column");if(r&&r.resizable){e.preventDefault(),e.stopPropagation();var i=d(n[0]),o=t.getColumnIndex(r.id),s=t.getColumns(),c=s[o],u=Math.max(i,l(r,o))+1;u!==c.width&&(c.width=u,t.setColumns(s),t.onColumnsResized.notify())}}function l(e,i){var o=[],s=function(){var e=a('<div class="slick-row"><div class="slick-cell"></div></div>');e.find(".slick-cell").css({visibility:"hidden","text-overflow":"initial","white-space":"nowrap"});var t=n.find(".grid-canvas").first();return a(t).append(e),e}(),l=t.getData();window.Slick.Data&&l instanceof window.Slick.Data.DataView&&(l=l.getItems());for(var d=0;d<l.length;d++)o.push(l[d][e.field]);var c=function(e,t){var n=a(e.find(".slick-cell"));return n.append(t),n.find("*").css("position","relative"),n.outerWidth()+1}(s,function(e,t,n,i,o){var s=0,l=null,d=t.formatter;return a(e).each((function(e,c){var u;d&&(c=(u=a("<span>"+d(e,n,c,t,i[e])+"</span>")).text()||c);var p=c?function(e,t){return r.font=e.css("font-size")+" "+e.css("font-family"),r.measureText(t).width}(o,c):0;p>s&&(s=p,l=u||c)})),l}(o,e,i,l,s));return function(e){a(e).remove()}(s),c}function d(e){var t,n=e.cloneNode(!0);return n.style.cssText="position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;",e.parentNode.insertBefore(n,e),t=n.offsetWidth,n.parentNode.removeChild(n),t}return{init:function(i){e=e||200,(n=a((t=i).getContainerNode())).on("dblclick.autosize",".slick-resizable-handle",s),n.keydown(o),r=document.createElement("canvas").getContext("2d")},destroy:function(){n.off()}}}}})},81240:(e,t,n)=>{var a,r;n(69600),n(47042),n(9653),n(54678),n(74916),n(15306),a=[n(19755),n(64492),n(91669),n(28008)],void 0===(r=function(e,t,n,a){var r={epicRandomString:function(e){for(var t=[],n="0123456789abcdef",a=0;a<36;a++)t[a]=n.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=n.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("").replace(/-/g,"").substr(0,e)},getHash:function(e){for(var t=0,n=e.length,a=0;a<n;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return t},calculateColumnWidth:function(t){e("body").append('<span id="pg_text" style="visibility: hidden;">'+t+"</span>");var n=e("#pg_text").width()+23;return e("#pg_text").remove(),n},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},previousStatus:null,fetchConnectionStatus:function(t,i,o){var s=a("sqleditor.connection_status",{trans_id:t.transId});if("visible"===document.visibilityState&&"visible"===i.data("panel-visible")&&!o.hasClass("obtaining-conn")){var l=t;e.ajax({url:s,method:"GET"}).done((function(e){if(e&&e.data){var t=e.data.status,a=e.data.message,s=!1;switch(l.update_notifications(e.data.notifies),t){case 1:t!=r.previousStatus||o.hasClass("fa-hourglass-half")||(o.removeClass().addClass("fa fa-hourglass-half"),s=!0);break;case 2:r.previousStatus==t||o.hasClass("fa-clock")||(o.removeClass().addClass("fa fa-clock"),s=!0);break;case 3:r.previousStatus==t||o.hasClass("fa-exclamation-circle")||(o.removeClass().addClass("fa fa-exclamation-circle"),s=!0);break;case 4:r.previousStatus==t||o.hasClass("fa-exclamation-triangle")||(o.removeClass().addClass("fa fa-exclamation-triangle"),s=!0);break;default:r.previousStatus==t||o.hasClass("fa-query_tool_connected")||(o.removeClass().addClass("pg-font-icon icon-connected"),s=!0)}r.previousStatus=t,s&&(i.popover("hide"),i.attr("data-content",a))}else r.previousStatus=-99,a=n("An unexpected error occurred - ensure you are logged into the application."),i.attr("data-content",a),o.hasClass("icon-disconnected")||(i.popover("hide"),o.removeClass().addClass("pg-icon-font icon-disconnected"))})).fail((function(e){r.previousStatus=-1;var t=n("Transaction status check failed.");0==e.readyState?t=n("Not connected to the server or the connection to the server has been closed."):e.responseJSON&&e.responseJSON.errormsg&&(t=e.responseJSON.errormsg),i.attr("data-content",t),o.hasClass("icon-disconnected")||(i.popover("hide"),o.removeClass().addClass("pg-font-icon icon-disconnected"))}))}},updateConnectionStatusFlag:function(t){var n=e(".connection_status");n.data("panel-visible")!=t&&n.data("panel-visible",t)},calcFontSize:function(e){if(e){e=parseFloat(Math.round(parseFloat(e+"e+2"))+"e-2");var t=Number(e);if(t>0)return t+"em"}return"1em"},addEditableIcon:function(e,n){var a={cssClass:"editable-column-header-icon",content:n?'<i class="fa fa-pencil-alt"></i>':'<i class="fa fa-lock"></i>'};t.isUndefined(e.header)||t.isUndefined(e.header.buttons)?e.header={buttons:[a]}:e.header.buttons.push(a)}};return r}.apply(t,a))||(e.exports=r)},82794:(e,t,n)=>{var a=n(64492);function r(e){var t=0,n=0,r={};do{var o=e.getData();if(o._type in this.Nodes&&this.Nodes[o._type].hasId){var s=i(o._type,n);void 0===r[s]&&(r[s]=a.extend({},o,{priority:t}),t-=1)}n+=1,e=e.hasParent()?e.parent():null}while(e);return r}function i(e,t){return"partition"===e&&t>0?"table":e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTreeNodeHierarchyFromElement=function(e,t){return r.call(e,t)},t.getTreeNodeHierarchyFromIdentifier=function(e){var t=this.treeMenu.translateTreeNodeIdFromACITree(e),n=this.treeMenu.findNode(t);return null===n?null:r.call(this,n)},t.getTreeNodeHierarchy=r},77019:(e,t,n)=>{n(69826),n(82772),n(69600),n(40561),n(74916),n(64765),n(23123),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.browserTreeState=t.pgBrowser=void 0;var a=l(n(64492)),r=l(n(19755)),i=l(n(28008)),o=l(n(91669)),s=l(n(55112));function l(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var u=s.default.Browser=s.default.Browser||{};t.pgBrowser=u;var p=u.browserTreeState=u.browserTreeState||{};t.browserTreeState=p,a.default.extend(u.browserTreeState,{parent:"server",orig_parent:"server_group",stored_state:{},last_state:{},current_state:{},init:function(){var e=u.get_preference("browser","browser_tree_state_save_interval");a.default.isUndefined(e)||-1===e.value?a.default.isUndefined(e)||r.default.ajax({url:(0,i.default)("settings.reset_tree_state"),type:"DELETE"}).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,o.default)('Error resetting the tree saved state."'),t)})):(setInterval(this.save_state,1e3*e.value),this.fetch_state.apply(this),u.Events.on("pgadmin:browser:tree:expand-from-previous-tree-state",this.expand_from_previous_state,this),u.Events.on("pgadmin:browser:tree:remove-from-tree-state",this.remove_from_cache,this),u.Events.on("pgadmin:browser:tree:update-tree-state",this.update_cache,this))},save_state:function(){var e=u.browserTreeState;e.last_state!=JSON.stringify(e.current_state)&&r.default.ajax({url:(0,i.default)("settings.save_tree_state"),type:"POST",contentType:"application/json",data:JSON.stringify(e.current_state)}).done((function(){e.last_state=JSON.stringify(e.current_state)})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,o.default)('Error saving the tree state."'),t)}))},fetch_state:function(){var e=this;r.default.ajax({url:(0,i.default)("settings.get_tree_state"),type:"GET",dataType:"json",contentType:"application/json"}).done((function(t){e.stored_state=t})).fail((function(e){var t=e.responseText;if(417==e.status||410==e.status||500==e.status)try{t=JSON.parse(e.responseText).errormsg}catch(e){console.warn(e.stack||e)}console.warn((0,o.default)("Error fetching the tree state."),t)}))},update_cache:function(e){var t,n=e&&u.tree.itemData(e),r=(n&&u.Nodes[n._type]).getTreeNodeHierarchy(e),i=u.tree.pathId(e),o=i.join(),s=[],l=-1;if(u.tree.hasParent(e)&&this.parent in r){if(t=r[this.parent]._id,u.tree.isOpen(e)){i.push(n.id),s=i.join(),t in this.current_state||(this.current_state[t]={paths:[],selected:{},conn_status:{},is_opened:{}});var d=a.default.find(this.current_state[t].paths,(function(e){return-1!==e.search(s)}));a.default.isUndefined(d)&&(a.default.isUndefined(this.current_state[t].paths)?this.current_state[t].paths=[]:l=this.current_state[t].paths.indexOf(o),-1!==l?this.current_state[t].paths[l]=s:this.current_state[t].paths.push(s))}this.update_database_status(e),this.update_current_selected_item(r)}},remove_from_cache:function(e){var t=this,n=t.stored_state||{},r=e&&u.tree.itemData(e),i=r&&u.Nodes[r._type],o=i&&i.getTreeNodeHierarchy(e);if(null!==o&&u.tree.hasParent(e)&&o.hasOwnProperty(t.parent)){var s=o&&o[t.parent]._id,l=o&&o[t.orig_parent].id;if(this.update_database_status(e),r._type!=t.parent&&"database"!=r._type){if(u.tree.isClosed(e)){var d=t.current_state[s].paths,c=void 0;if(o.hasOwnProperty("database")&&(c=o.database.id),!a.default.isUndefined(d)&&!a.default.isUndefined(d.length)){var p=0,f=void 0;a.default.each(d,(function(e){if(!a.default.isUndefined(e)){var n=e.split(",");if(-1!==n.indexOf(r.id)&&(void 0===c||void 0!==c&&-1!==n.indexOf(c))){var i=n.indexOf(r.id);n.splice(i),(f=n.join())==l?t.current_state[s].paths.splice(e,1):t.current_state[s].paths[p]=f}p++}}))}}}else s in n&&"paths"in n[s]&&(n[s].paths=t.current_state[s].paths,t.save_state())}},expand_from_previous_state:function(e){var t=this,n=t.stored_state||{},r=e&&u.tree.itemData(e),i=r&&u.Nodes[r._type],o=i&&i.getTreeNodeHierarchy(e);if(null!==o&&u.tree.hasParent(e)&&o.hasOwnProperty(t.parent)&&(r._type!=t.parent||!1!==u.tree.isOpen(e))){var s=n[o[t.parent]._id];if(!("database"==r._type&&s&&"conn_status"in s&&"is_opened"in s)||0!==s.conn_status[r.id]&&0!==s.is_opened[r.id]&&r.id in s.is_opened){if(!a.default.isUndefined(s)&&"paths"in s&&!a.default.isUndefined(s.paths.length)){var l=d(s.paths),c=void 0;o.hasOwnProperty("database")&&(c=o.database.id),a.default.each(l,(function(i){if(!a.default.isUndefined(i)){var s=i.split(",");if(-1!==s.indexOf(r.id)&&(void 0===c||void 0!==c&&-1!==s.indexOf(c))){var l=s.indexOf(r.id);if(u.tree.toggle(e),l==s.length-1){var d=n[o[t.parent]._id].paths.indexOf(i);n[o[t.parent]._id].paths.splice(d,1)}}}}))}this.select_tree_item(e)}}},update_database_status:function(e){var t=e&&u.tree.itemData(e),n=(t&&u.Nodes[t._type]).getTreeNodeHierarchy(e);if(n.hasOwnProperty("database")){var a=n.database.id,r=n&&n[this.parent]._id;r in this.current_state&&"selected"in this.current_state[r]&&(n.database.connected?this.current_state[r].conn_status[a]=1:this.current_state[r].conn_status[a]=0,"database"==t._type&&(u.tree.isOpen(e)?this.current_state[r].is_opened[a]=1:this.current_state[r].is_opened[a]=0))}},update_current_selected_item:function(e){if(this.parent in e){var t=e&&e[this.parent]._id,n=u.tree.itemData(u.tree.selected()),r=void 0;n=n?n.id:void 0,e.hasOwnProperty("database")&&(r=e.database.id),t in this.current_state&&"selected"in this.current_state[t]&&!a.default.isUndefined(n)&&(this.current_state[t].selected[e[this.parent].id]=n,a.default.isUndefined(r)||(this.current_state[t].selected[r]=n))}},select_tree_item:function(e){var t=this.stored_state||{},n=e&&u.tree.itemData(e),a=n&&u.Nodes[n._type],r=a&&a.getTreeNodeHierarchy(e),i=t[r[this.parent]._id];if(r.hasOwnProperty("database")){var o=r.database.id;i&&"selected"in i&&o in i.selected&&i.selected[o]==n.id&&u.tree.select(e)}}})},79226:(e,t,n)=>{var a=n(64492);n(69826),n(89554),n(82772),n(79753),n(69600),n(24812),n(19601),n(69070),n(47941),n(41539),n(88674),n(74916),n(15306),n(23123),n(23157),n(54747),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.isValidTreeNodeData=t.Tree=t.TreeNode=void 0;var r=n(44092),i=s(n(19755)),o=s(n(55455));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function g(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var b=function(){function e(t,n,a,r){p(this,e),this.id=t,this.data=n,this.setParent(r),this.children=[],this.domNode=a}return g(e,[{key:"hasParent",value:function(){return null!==this.parentNode&&void 0!==this.parentNode}},{key:"parent",value:function(){return this.parentNode}},{key:"setParent",value:function(e){this.parentNode=e,this.path=this.id,null!=e&&void 0!==e.path&&(this.path=e.path+"."+this.id)}},{key:"getData",value:function(){if(void 0!==this.data)return null===this.data?null:Object.assign({},this.data)}},{key:"getHtmlIdentifier",value:function(){return this.domNode}},{key:"reload",value:function(e){var t=this;return new Promise((function(n){t.unload(e).then((function(){e.aciTreeApi.setInode(t.domNode),e.aciTreeApi.deselect(t.domNode),setTimeout((function(){e.selectNode(t.domNode)}),0),n()}))}))}},{key:"unload",value:function(e){var t=this;return new Promise((function(n,a){t.children=[],e.aciTreeApi.unload(t.domNode,{success:function(){n(!0)},fail:function(){a()}})}))}},{key:"open",value:function(e,t){var n=this;return new Promise((function(a,r){!t||null!=n.domNode&&void 0!==n.domNode?e.aciTreeApi.isOpen(n.domNode)?a(!0):e.aciTreeApi.open(n.domNode,{success:function(){a(!0)},fail:function(){r(!0)}}):a(!0)}))}},{key:"ancestorNode",value:function(e){for(var t=this;t.hasParent();)if(e(t=t.parent()))return t;return null}},{key:"anyFamilyMember",value:function(e){return!!e(this)||null!==this.ancestorNode(e)}},{key:"anyParent",value:function(e){return null!==this.ancestorNode(e)}}]),e}();t.TreeNode=b;var h=function(){function e(){p(this,e),this.rootNode=new b(void 0,{}),this.aciTreeApi=void 0,this.draggableTypes={}}return g(e,[{key:"registerDraggableType",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"object"==u(e)?Object.keys(e).forEach((function(n){t.registerDraggableType(n,e[n])})):null!=n&&e.replace(/ +/," ").split(" ").forEach((function(e){t.draggableTypes[e]=n}))}},{key:"getDraggable",value:function(e){return this.draggableTypes[e]?this.draggableTypes[e]:null}},{key:"prepareDraggable",value:function(e,t){var n=this.getDraggable(e._type);null!=n&&t.find(".aciTreeItem").attr("draggable",!0)[0].addEventListener("dragstart",(function(r){var o=n(e,t);if("string"==typeof o?o={text:o,cur:{from:o.length,to:o.length}}:o.cur||(o=d(d({},o),{},{cur:{from:o.text.length,to:o.text.length}})),r.dataTransfer.setData("text",JSON.stringify(o)),r.dataTransfer.dropEffect&&(r.dataTransfer.dropEffect="move"),r.dataTransfer.setDragImage){var s=(0,i.default)('\n              <div class="drag-tree-node">\n                <span>'.concat(a.escape(o.text),"</span>\n              </div>"));(0,i.default)("body .drag-tree-node").remove(),(0,i.default)("body").append(s),r.dataTransfer.setDragImage(s[0],0,0)}}))}},{key:"addNewNode",value:function(e,t,n,a){var r=this.findNode(a);return this.createOrUpdateNode(e,t,r,n)}},{key:"findNode",value:function(e){return null==e||0===e.length?this.rootNode:function(e,t){if(null===t)return e;return function e(n){if(void 0!==n.path&&void 0!==t&&!t.startsWith(n.path))return null;for(var a=0,r=n.children.length;a<r;a++){var i=e(n.children[a]);if(null!==i)return i}return n.path===t?n:null}(e)}(this.rootNode,e.join("."))}},{key:"findNodeWithToggle",value:function(e){var t=this;if(null==e||!Array.isArray(e))return Promise.reject();e=e.join(".");var n=function(t){return void 0!==t&&void 0!==e&&(e.startsWith(t+".")||e===t)};return function a(r){return new Promise((function(i,o){null!=e&&0!==e.length||i(null),void 0===r.path||n(r.path)?r.path===e?i(r):r.open(t,!0).then((function(){for(var e=0,t=r.children.length;e<t;e++){var s=r.children[e];if(n(s.path))return void i(a(s))}o(null)})).catch((function(){o(null)})):o(null)}))}(this.rootNode)}},{key:"findNodeByDomElement",value:function(e){var t=this.translateTreeNodeIdFromACITree(e);if(t&&t[0])return this.findNode(t)}},{key:"selected",value:function(){return this.aciTreeApi.selected()}},{key:"scrollTo",value:function(e){e.scrollIntoView()}},{key:"selectNode",value:function(e,t){this.aciTreeApi.select(e),t&&this.scrollTo(e[0])}},{key:"createOrUpdateNode",value:function(e,t,n,a){var r=[e];null!=n&&(r=[n.path,e]);var i=this.findNode(r);if(null!==i)return i.data=t,i.domNode=a,i;var o=new b(e,t,a,n);return n===this.rootNode&&(o.parentNode=null),null!=n&&n.children.push(o),o}},{key:"unloadNode",value:function(e,t,n,a){var r=[e],i=this.findNode(a);null!=i&&(r=[i.path,e]);var o=this.findNode(r);o&&(o.children=[])}},{key:"register",value:function(e){var t=this;e.on("acitree",function(e,t,n,a){if(t.isItem(n)&&-1!=["added","idset","beforeunload"].indexOf(a)){var r=t.getId(n),i=t.itemData(n),s=this.translateTreeNodeIdFromACITree(t.parent(n));"beforeunload"===a?this.unloadNode(r,i,n,s):("added"===a&&this.prepareDraggable(i,n),this.addNewNode(r,i,n,s)),i.errmsg&&o.default.error(i.errmsg)}}.bind(this)),this.aciTreeApi=e.aciTree("api");var n=function(e){var n=t.aciTreeApi.itemFrom(e.target);n.length&&(e.ctrlKey&&t.aciTreeApi.select(n),(0,i.default)(n).on("contextmenu:visible",(function(){(0,i.default)(n).trigger("blur"),(0,i.default)(n).off("contextmenu:visible")})))};e.off("mousedown",n).on("mousedown",n)}},{key:"translateTreeNodeIdFromACITree",value:function(e){for(var t=e,n=[];null!=t&&t.length>0&&(n.unshift(this.aciTreeApi.getId(t)),this.aciTreeApi.hasParent(t));)t=this.aciTreeApi.parent(t);return n}}]),e}();t.Tree=h;var m=r.isValidData;t.isValidTreeNodeData=m},28008:(e,t,n)=>{var a,r;n(74916),n(15306),a=[n(8012)],void 0===(r=function(e){return function(t,n){var a=e[t],r=a;return a?r=r.replace(/([<])([^:^>]*:)?([^>]+)([>])/g,(function(e,t,a,r){return r in n?n[r]:e})):a}}.apply(t,a))||(e.exports=r)},44092:(e,t,n)=>{n(69826),n(82772),n(69600),n(21249),n(83710),n(91058),n(24603),n(74916),n(39714),n(27852),n(15306),n(64765),n(23123),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.parseShortcutValue=function(e){var t="";e.alt&&(t+="alt+");e.shift&&(t+="shift+");e.control&&(t+="ctrl+");return t+=e.key.char.toLowerCase()},t.handleKeyNavigation=function(e){var t=(0,i.default)(e.currentTarget).find(".wizard-header"),n=(0,i.default)(e.currentTarget).find(".wizard-footer"),a=(0,i.default)(e.currentTarget).find(".select-row-cell:first"),r=(0,i.default)(e.currentTarget).find(".select-row-cell:last"),o=(0,i.default)(t).find("button:enabled:first"),s=(0,i.default)(t).find("button:enabled:last"),l=(0,i.default)(n).find("button:enabled:last"),d=(0,i.default)(n).find("button:enabled:first");e.shiftKey&&9===e.keyCode?o&&(0,i.default)(o).is((0,i.default)(e.target))?l&&((0,i.default)(l).focus(),e.preventDefault(),e.stopPropagation()):(0,i.default)(d).is((0,i.default)(e.target))&&((0,i.default)(a).find(".custom-control-input").is(":visible")?((0,i.default)(r).find(".custom-control-input").focus(),e.preventDefault(),e.stopPropagation()):(0,i.default)(e.currentTarget).find(".wizard-content").find(".CodeMirror-scroll").is(":visible")&&(0,i.default)(s).focus()):9===e.keyCode?l&&(0,i.default)(l).is((0,i.default)(e.target))?((0,i.default)(o).focus(),e.preventDefault(),e.stopPropagation()):"Name"==e.target.innerText?((0,i.default)(a).find(".custom-control-input").is(":visible")?(0,i.default)(a).find(".custom-control-input").focus():(0,i.default)(d).focus(),e.preventDefault(),e.stopPropagation()):"DIV"==e.target.tagName?((0,i.default)(e.currentTarget).find(".custom-control-input:first").trigger("focus"),e.preventDefault(),e.stopPropagation()):"TEXTAREA"==e.target.tagName&&(0,i.default)(d).focus():27===e.keyCode&&(0,i.default)(t).find("button.ajs-close").click()},t.findAndSetFocus=function(e){if(0==e.length)return;setTimeout((function(){var t=e.find("button.fa-plus:first");0==t.length&&(t=e.find("\n          .pgadmin-controls:first .btn:not(.toggle),\n          .pgadmin-controls:first,\n          .ajs-commands:first,\n          .CodeMirror-scroll,\n          .pgadmin-wizard").find('*[tabindex]:not([tabindex="-1"]),input:enabled')),t.length>0?t[0].focus():e[0].focus()}),200)},t.getEpoch=function(e){var t=e||new Date;return parseInt(t.getTime()/1e3)},t.getGCD=function(e){var t=function e(t,n){return 0==t?n:e(n%t,t)},n=e.length;if(n<=2)return t(e[0],e[1]);for(var a=e[0],r=1;r<n;r++)a=t(e[r],a);return a},t.getMod=function(e,t){return(e%t+t)%t},t.parseFuncParams=function(e){var t=[],n="",a="";if(e.endsWith("()"))n=e.substring(0,e.length-2);else if(e.endsWith(")")){if(!e.endsWith("()")&&e.endsWith(")")){var r=0,i=e.length;for(r=e.length-2;r>=0;){if("("==e[r]){i=r;break}if('"'==e[r])for(r--;'"'!=e[r];)r--;r--}n=e.substring(0,i),a=e.substring(i+1,e.length-1);var o=0,s="",l=["IN","OUT","INOUT","VARIADIC"];for(r=0;r<a.length;){if('"'==a[r])for(r++;'"'!=a[r];)r++;else" "==a[r]?(""==s||l.indexOf(s)>-1)&&(s=a.substring(o,r),o=r+1):","==a[r]&&(t.push([s,a.substring(o,r)]),s="",o=r+1);r++}t.push([s,a.substring(o)])}}else n=e;return{func_name:n,param_string:a,params:t}},t.quote_ident=s,t.fully_qualify=function(e,t,n){var a=r.getTreeNodeHierarchyFromIdentifier.call(e,n),i="";void 0!==a.schema?i=s(a.schema._label):void 0!==a.view?i=s(a.view._label):void 0!==a.catalog&&(i=s(a.catalog._label));void 0!==a.package&&"package"!=t._type&&(""==i?i=s(a.package._label):i+="."+s(a.package._label));return""!=i?i+"."+s(t._label):s(t._label)},t.getRandomInt=function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},t.titleize=function(e){return""===e||null===e?e:e.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(" ")},t.sprintf=function(e){try{var t=arguments;return e.split("%s").map((function(e,n){return n>0?n<t.length?[t[n],e].join(""):["%s",e].join(""):e})).join("")}catch(t){return console.error(t),e}},t.CSVToArray=function(e,t,n){t=t||",",n=n||'"';var a=new RegExp("(\\"+t+"|\\r?\\n|\\r|^)"+('"'==n?'(?:"([^"]*(?:""[^"]*)*)"|':"(?:'([^']*(?:''[^']*)*)'|")+('"'==n?'([^"\\'+t+"\\r\\n]*))":"([^'\\"+t+"\\r\\n]*))"),"gi"),r=[[]],i=null;for(;i=a.exec(e);){var o,s=i[1];s.length&&s!==t&&r.push([]),o=i[2]?i[2].replace(new RegExp(n+n,"g"),n):i[3],r[r.length-1].push(o)}return r},t.isString=t.isFunction=t.isValidData=void 0;var a=o(n(64492)),r=n(82794),i=o(n(19755));function o(e){return e&&e.__esModule?e:{default:e}}t.isValidData=function(e){return!a.default.isUndefined(e)&&!a.default.isNull(e)};t.isFunction=function(e){return a.default.isFunction(e)};function s(e){var t=!1;return isNaN(parseInt(e))||(t=!0),e.search(/[^a-z0-9_]/g)>-1&&(e=e.replace(/"/g,'""'),t=!0),t?'"'.concat(e,'"'):e}t.isString=function(e){return a.default.isString(e)}},1950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function e(t){return t.opener&&t.opener.pgAdmin?e(t.opener):t},a=function(){var e=null;try{e=window.opener&&window.opener.pgAdmin?n(window.opener):window.parent&&window.parent.pgAdmin?window.parent:window.top&&window.top.pgAdmin?window.top:window}catch(t){e=window}return e}();t.default=a},92887:(e,t,n)=>{var a,r;n(5735),n(24812),n(32564),n(83753),a=[n(91669),n(28008),n(19755),n(64492),n(55455),n(72316),n(71158),n(12030),n(58894),n(44092),n(5708),n(87332),n(16194)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c,u,p){if(l.Backup)return l.Backup;var f=i.Model.extend({idAttribute:"id",defaults:{file:void 0,role:void 0,dqoute:!1,verbose:!0,type:void 0},schema:[{id:"file",label:e("Filename"),type:"text",disabled:!1,control:s.FileControl,dialog_type:"create_file",supp_types:["*","sql","backup"]},{id:"role",label:e("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{type:"nested",control:"fieldset",label:e("Miscellaneous"),contentClass:"row",schema:[{id:"verbose",label:e("Verbose messages"),type:"switch",disabled:!1,group:e("Miscellaneous")},{id:"dqoute",label:e("Force double quote on identifiers"),type:"switch",disabled:!1,group:e("Miscellaneous"),controlLabelClassName:"control-label pg-el-sm-6 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-6 pg-el-12"}]},{id:"globals_note",label:e("Note"),text:e("Only objects global to the entire database will be backed up, in PLAIN format"),type:"note"},{}],validate:function(){return null}}),g=i.Model.extend({idAttribute:"id",defaults:{file:void 0,role:void 0,format:"custom",verbose:!0,blobs:!0,encoding:void 0,schemas:[],tables:[],database:void 0},schema:[{id:"file",label:e("Filename"),type:"text",disabled:!1,control:s.FileControl.extend({render:function(){var e=this.model.toJSON();return"directory"==e.format?this.field.attributes.dialog_type="select_folder":this.field.attributes.dialog_type="create_file",s.InputControl.prototype.render.apply(this,arguments),this}}),dialog_type:"create_file",supp_types:["*","sql","backup"],deps:["format"]},{id:"format",label:e("Format"),type:"text",disabled:!1,control:"select2",select2:{allowClear:!1,width:"100%"},options:[{label:e("Custom"),value:"custom"},{label:e("Tar"),value:"tar"},{label:e("Plain"),value:"plain"},{label:e("Directory"),value:"directory"}],visible:function(e){return!(!a.isUndefined(e.get("type"))&&"server"===e.get("type"))||(setTimeout((function(){e.set("format","plain")}),10),!1)}},{id:"ratio",label:e("Compression ratio"),type:"int",min:0,max:9,deps:["format"],disabled:function(e){return"tar"===e.get("format")},visible:function(e){return!(!a.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"encoding",label:e("Encoding"),type:"text",disabled:!1,node:"database",control:"node-ajax-options",url:"get_encodings",visible:function(e){if(!a.isUndefined(e.get("type"))&&"server"===e.get("type")){var t=l.tree,n=t.selected(),r=n&&1==n.length?t.itemData(n):void 0;return!a.isUndefined(r)&&r.version>=11e4}return!0}},{id:"no_of_jobs",label:e("Number of jobs"),type:"int",deps:["format"],disabled:function(e){return"directory"!==e.get("format")},visible:function(e){return!(!a.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"role",label:e("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{id:"server_note",label:e("Note"),text:e("The backup format will be PLAIN"),type:"note",visible:function(e){return"server"===e.get("type")}},{type:"nested",control:"fieldset",label:e("Sections"),group:e("Dump options"),contentClass:"row",schema:[{id:"pre_data",label:e("Pre-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}},{id:"data",label:e("Data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}},{id:"post_data",label:e("Post-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return e.get("only_data")||e.get("only_schema")}}],visible:function(e){return!(!a.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{type:"nested",control:"fieldset",label:e("Type of objects"),group:e("Dump options"),contentClass:"row",schema:[{id:"only_data",label:e("Only data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Type of objects"),deps:["pre_data","data","post_data","only_schema"],disabled:function(e){return e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_schema")}},{id:"only_schema",label:e("Only schema"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Type of objects"),deps:["pre_data","data","post_data","only_data"],disabled:function(e){return e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_data")}},{id:"blobs",label:e("Blobs"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Type of objects"),visible:function(e){return!(!a.isUndefined(e.get("type"))&&"server"===e.get("type"))||(setTimeout((function(){e.set("blobs",!1)}),10),!1)}}]},{type:"nested",control:"fieldset",label:e("Do not save"),group:e("Dump options"),contentClass:"row",schema:[{id:"dns_owner",label:e("Owner"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_privilege",label:e("Privilege"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_tablespace",label:e("Tablespace"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_unlogged_tbl_data",label:e("Unlogged table data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"no_comments",label:e("Comments"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save"),visible:function(){var e=l.tree,t=e.selected(),n=t&&1==t.length?e.itemData(t):void 0,r=a.isUndefined(n)?void 0:l.Nodes[n._type].getTreeNodeHierarchy(t).server;return!a.isUndefined(r)&&r.version>=11e4}}]},{type:"nested",control:"fieldset",label:e("Queries"),group:e("Dump options"),contentClass:"row",schema:[{id:"use_column_inserts",label:e("Use Column Inserts"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries")},{id:"use_insert_commands",label:e("Use Insert Commands"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries")},{id:"include_create_database",label:e("Include CREATE DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries"),visible:function(e){return!(!a.isUndefined(e.get("type"))&&"server"===e.get("type"))}},{id:"include_drop_database",label:e("Include DROP DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Queries"),deps:["only_data"],disabled:function(e){return!!e.get("only_data")&&(setTimeout((function(){e.set("include_drop_database",!1)}),10),!0)}},{id:"load_via_partition_root",label:e("Load Via Partition Root"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries"),visible:function(e){if(!a.isUndefined(e.get("type"))&&"server"===e.get("type"))return!1;var t=l.tree,n=t.selected(),r=n&&1==n.length?t.itemData(n):void 0,i=a.isUndefined(r)?void 0:l.Nodes[r._type].getTreeNodeHierarchy(n).server;return!a.isUndefined(i)&&i.version>=11e4}}]},{type:"nested",control:"fieldset",label:e("Disable"),group:e("Dump options"),contentClass:"row",schema:[{id:"disable_trigger",label:e("Trigger"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Disable"),deps:["only_data"],disabled:function(e){return!e.get("only_data")}},{id:"disable_quoting",label:e("$ quoting"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Disable")}]},{type:"nested",control:"fieldset",label:e("Miscellaneous"),group:e("Dump options"),contentClass:"row",schema:[{id:"with_oids",label:e("With OID(s)"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",deps:["use_column_inserts","use_insert_commands"],group:e("Miscellaneous"),disabled:function(e){var t=l.tree,n=t.selected(),r=n&&1==n.length?t.itemData(n):void 0,i=a.isUndefined(r)?void 0:l.Nodes[r._type].getTreeNodeHierarchy(n).server;return!a.isUndefined(i)&&i.version>=12e4||!(!e.get("use_column_inserts")&&!e.get("use_insert_commands"))&&(setTimeout((function(){e.set("with_oids",!1)}),10),!0)}},{id:"verbose",label:e("Verbose messages"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous")},{id:"dqoute",label:e("Force double quote on identifiers"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous")},{id:"use_set_session_auth",label:e("Use SET SESSION AUTHORIZATION"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous")}]}],validate:function(){return null}});return l.Backup={init:function(){if(!this.initialized){this.initialized=!0;for(var t=[{name:"backup_global",module:this,applies:["tools"],callback:"start_backup_global",priority:12,label:e("Backup Globals..."),icon:"fa fa-save",enable:c.menuEnabledServer,data:{data_disabled:e("Please select any server from the browser tree to take Backup of global objects.")}},{name:"backup_server",module:this,applies:["tools"],callback:"start_backup_server",priority:12,label:e("Backup Server..."),icon:"fa fa-save",enable:c.menuEnabledServer,data:{data_disabled:e("Please select any server from the browser tree to take Server Backup.")}},{name:"backup_global_ctx",module:this,node:"server",applies:["context"],callback:"start_backup_global",priority:12,label:e("Backup Globals..."),icon:"fa fa-save",enable:c.menuEnabledServer,data:{data_disabled:e("Please select any database or schema or table from the browser tree to take Backup.")}},{name:"backup_server_ctx",module:this,node:"server",applies:["context"],callback:"start_backup_server",priority:12,label:e("Backup Server..."),icon:"fa fa-save",enable:c.menuEnabledServer,data:{data_disabled:e("Please select any server from the browser tree to take Server Backup.")}},{name:"backup_object",module:this,applies:["tools"],callback:"backup_objects",priority:11,label:e("Backup..."),icon:"fa fa-save",enable:p.enabled.bind(null,l.treeMenu,c.backupSupportedNodes),data:{data_disabled:e("Please select any database or schema or table from the browser tree to take Backup.")}}],n=0;n<c.backupSupportedNodes.length;n++)t.push({name:"backup_"+c.backupSupportedNodes[n],node:c.backupSupportedNodes[n],module:this,applies:["context"],callback:"backup_objects",priority:11,label:e("Backup..."),icon:"fa fa-save",enable:p.enabled.bind(null,l.treeMenu,c.backupSupportedNodes)});return l.add_menus(t),this}},start_backup_global:function(e,t){new u.BackupDialog(l,n,r,f).draw(e,t,{globals:!0},l.stdW.calc(l.stdW.md),l.stdH.calc(l.stdH.md))},start_backup_server:function(e,t){new u.BackupDialog(l,n,r,g).draw(e,t,{server:!0},l.stdW.calc(l.stdW.md),l.stdH.calc(l.stdH.md))},backup_objects:function(e,t){new u.BackupDialog(l,n,r,g).draw(e,t,null,l.stdW.calc(l.stdW.md),l.stdH.calc(l.stdH.md))}},l.Backup}.apply(t,a))||(e.exports=r)},87332:(e,t,n)=>{var a=n(64492);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(30489),n(68304),Object.defineProperty(t,"__esModule",{value:!0}),t.BackupDialog=void 0;var i=c(n(91669)),o=c(n(12030)),s=n(35433),l=c(n(28008)),d=c(n(9669));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h(e);if(t){var r=h(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(c,e);var t,n,r,s=g(c);function c(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.default;return u(this,c),s.call(this,(0,i.default)("Backup Error"),"<div class='backup_dialog'></div>",e,t,n,a,r)}return t=c,r=[{key:"typeOfDialog",value:function(e){if(null===e)return"backup_objects";var t="server";return!a.isUndefined(e.globals)&&e.globals&&(t="globals"),t}},{key:"dialogTitle",value:function(e){return"backup_objects"===e?null:"globals"===e?(0,i.default)("Backup Globals..."):(0,i.default)("Backup Server...")}}],(n=[{key:"url_for_utility_exists",value:function(e,t){return(0,l.default)("backup.utility_exists",{sid:e,backup_obj_type:null==t?"objects":"servers"})}},{key:"draw",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=this.retrieveAncestorOfTypeServer(t);if(o&&this.hasBinariesConfiguration(o)){var s="database"==o._type?o._pid:o._id,l=this.url_for_utility_exists(s,n),u=this;d.default.get(l).then((function(e){if(e.data.success){var o=c.typeOfDialog(n);u.canExecuteOnCurrentDatabase(t)&&u.createOrGetDialog(c.dialogTitle(o),o)(!0).resizeTo(a,r)}else u.alertify.alert((0,i.default)("Utility not found"),e.data.errormsg)})).catch((function(){u.alertify.alert((0,i.default)("Utility not found"),(0,i.default)("Failed to fetch Utility information"))}))}}},{key:"dialogName",value:function(e){return"backup_objects"===e?e:"BackupDialog_"+e}}])&&p(t.prototype,n),r&&p(t,r),c}(s.Dialog);t.BackupDialog=m},64951:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(69826),n(5735),n(68309),n(30489),n(68304),n(83753),Object.defineProperty(t,"__esModule",{value:!0}),t.BackupDialogWrapper=void 0;var r=n(82794),i=d(n(9669)),o=d(n(91669)),s=d(n(28008)),l=d(n(64492));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g(e);if(t){var r=g(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,a,d=p(f);function f(e,t,n,a,r,i,o,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(l=d.call(this,e,t,a,r,i,o,s)).typeOfDialog=n,l}return t=f,(n=[{key:"main",value:function(e){this.set("title",e)}},{key:"setup",value:function(){var e;return{buttons:[{text:"",className:"btn btn-primary-icon pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"backup.html",label:(0,o.default)("Backup"),"aria-label":(0,o.default)("Backup")}},{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,o.default)("Help"),"aria-label":(0,o.default)("Help"),url:(0,s.default)("help.static",{filename:(e=this.typeOfDialog,"globals"==e?"backup_globals_dialog.html":"server"==e?"backup_server_dialog.html":"backup_dialog.html")})}},{text:(0,o.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button","data-btn-name":"cancel"},{text:(0,o.default)("Backup"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button","data-btn-name":"backup"}],options:{title:this.dialogTitle,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}}},{key:"prepare",value:function(){this.disableBackupButton();var e=this.jquery(this.dialogContainerSelector),t=this.getSelectedNode(),n=this.getSelectedNodeData(t);if(n){var a=this.pgBrowser.Nodes[n._type];if(null===this.dialogTitle){var i=(0,o.default)("Backup (%s: %s)",a.label,n.label);this.main(i)}var s=(0,r.getTreeNodeHierarchyFromElement)(this.pgBrowser,t),l=this.createDialog(a,s,this.typeOfDialog,e);this.addAlertifyClassToBackupNodeChildNodes(),l.render();var d=this.jquery('<div class=\'pg-prop-status-bar pg-prop-status-bar-absolute pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>        <div class="ml-auto close-error-bar">           <a aria-label="'+(0,o.default)("Close error bar")+'" class="close-error fa fa-times text-danger"></a>         </div>     </div>   </div> </div>').appendTo(e);this.elements.content.appendChild(e.get(0)),this.focusOnDialog(this),this.setListenersForFilenameChanges(d)}}},{key:"callback",value:function(e){var t=this.getSelectedNode(),n=this.getSelectedNodeData(t),a=n&&this.pgBrowser.Nodes[n._type];if(this.wasHelpButtonPressed(e))return e.cancel=!0,void this.pgBrowser.showHelp(e.button.element.name,e.button.element.getAttribute("url"),a,t.getHtmlIdentifier());if(this.wasBackupButtonPressed(e)){if(!n)return;var l=this.retrieveServerIdentifier(a,t),d=this,c="backup.create_server_job";"backup_objects"===this.typeOfDialog&&(c="backup.create_object_job");var u=(0,s.default)(c,{sid:l}),p=(0,r.getTreeNodeHierarchyFromElement)(this.pgBrowser,t);this.setExtraParameters(t,p),i.default.post(u,this.view.model.toJSON()).then((function(e){e.data.success?(d.alertify.success((0,o.default)("Backup job created."),5),d.pgBrowser.Events.trigger("pgadmin-bgprocess:created",d)):d.alertify.alert((0,o.default)("Backup job creation failed."),e.data.errormsg)})).catch((function(e){try{var t=e.response.data;d.alertify.alert((0,o.default)("Backup job failed."),t.errormsg)}catch(e){console.warn(e.stack||e)}}))}}},{key:"addAlertifyClassToBackupNodeChildNodes",value:function(){this.jquery(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties")}},{key:"getSelectedNode",value:function(){var e=this.pgBrowser.treeMenu,t=e.selected();return t?e.findNodeByDomElement(t):void 0}},{key:"disableBackupButton",value:function(){this.__internal.buttons[3].element.disabled=!0}},{key:"enableBackupButton",value:function(){this.__internal.buttons[3].element.disabled=!1}},{key:"createDialog",value:function(e,t,n,a){var r={};"backup_objects"!==n&&(r.type=n);var i=new this.dialogModel(r,{node_info:t}),o=this.backform.generateViewSchema(t,i,"create",e,t.server,!0);return this.view=new this.backform.Dialog({el:a,model:i,schema:o})}},{key:"retrieveServerIdentifier",value:function(e,t){return(0,r.getTreeNodeHierarchyFromElement)(this.pgBrowser,t).server._id}},{key:"setListenersForFilenameChanges",value:function(e){var t=this;this.view.model.on("change",(function(){var n,a,r,i=this;l.default.isUndefined(this.get("file"))||""===this.get("file")?(t.disableBackupButton(),n=(0,o.default)("Please provide a filename"),a="file",r=n,i.errorModel.set(a,r),e.removeClass("d-none"),e.find(".alert-text").html(r),t.elements.dialog.querySelector(".close-error").addEventListener("click",(function(){e.addClass("d-none"),i.errorModel.set(a,r)}))):(this.errorModel.clear(),e.addClass("d-none"),t.enableBackupButton())}))}},{key:"setExtraParameters",value:function(e,t){if("backup_objects"===this.typeOfDialog){this.view.model.set("database",t.database._label);var n=e.getData();"schema"===n._type&&this.view.model.set("schemas",[n._label]),"table"!==n._type&&"partition"!==n._type||this.view.model.set("tables",[[t.schema._label,n._label]]),l.default.isEmpty(this.view.model.get("ratio"))&&this.view.model.unset("ratio")}}},{key:"wasBackupButtonPressed",value:function(e){return"backup"===e.button["data-btn-name"]}}])&&c(t.prototype,n),a&&c(t,a),f}(n(22378).DialogWrapper);t.BackupDialogWrapper=b},5708:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.menuEnabledServer=function(e){return(0,a.isValidTreeNodeData)(e)&&function(e){return"server"===e._type&&e.connected}(e)},t.backupSupportedNodes=void 0;var a=n(79226);t.backupSupportedNodes=["database","schema","table","partition"]},9807:(e,t,n)=>{var a=n(64492);n(68309),n(24603),n(74916),n(39714),n(15306),Object.defineProperty(t,"__esModule",{value:!0}),t.getDatabaseLabel=l,t.getPanelTitle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.get_preferences_for_module("browser");null==t&&null==a&&(t=e.treeMenu.selected());if(null==a&&d(a=r.getTreeNodeHierarchyFromIdentifier.call(e,t)))return;var o=l(a),s="";s=n||i.qt_tab_title_placeholder;var c={database:o,username:a.server.user.name,server:a.server.label,type:"query_tool"},p=u(s,c);return p},t.setQueryToolDockerTitle=function(e,t,n,r){var o="",s="";c(e,r),r||"true"==r?(s=(0,i.default)("File - ")+n,o="fa fa-file-alt"):"false"==t||0==t?(s=(0,i.default)("View/Edit Data - ")+n,o="pg-font-icon icon-view_data"):(s=(0,i.default)("Query Tool - ")+n,o="pg-font-icon icon-query_tool");e.title('<span title="'+a.escape(s)+'">'+a.escape(n)+"</span>"),e.icon(o)},t.set_renamable_option=c,t.generateTitle=u;var r=n(82794),i=s(n(91669)),o=s(n(19755));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return e.database?e.database.label:e.server.db}function d(e){return void 0===e.server}function c(e,t){t||"true"==t?(e.renamable(!1),(0,o.default)(".conn-info-dd").hide(),(0,o.default)(".connection-data").css({pointerEvents:"none",cursor:"arrow"})):e.renamable(!0)}function u(e,t){return"query_tool"==t.type?e=(e=(e=e.replace(new RegExp("%DATABASE%"),a.unescape(t.database))).replace(new RegExp("%USERNAME%"),a.unescape(t.username))).replace(new RegExp("%SERVER%"),a.unescape(t.server)):"datagrid"==t.type?e=(e=(e=(e=(e=e.replace(new RegExp("%DATABASE%"),a.unescape(t.database))).replace(new RegExp("%USERNAME%"),a.unescape(t.username))).replace(new RegExp("%SERVER%"),a.unescape(t.server))).replace(new RegExp("%SCHEMA%"),a.unescape(t.schema))).replace(new RegExp("%TABLE%"),a.unescape(t.table)):"debugger"==t.type&&(e=(e=(e=(e=e.replace(new RegExp("%FUNCTION%"),a.unescape(t.function_name))).replace(new RegExp("%ARGS%"),a.unescape(t.args))).replace(new RegExp("%SCHEMA%"),a.unescape(t.schema))).replace(new RegExp("%DATABASE%"),a.unescape(t.database))),a.escape(e)}},52934:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(69826),n(68309),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.showDataGrid=function(e,t,n,a,s,l){var d=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,p=t.treeMenu.findNodeByDomElement(s);if(void 0===p||!p.getData())return void n.alert((0,r.default)("Data Grid Error"),(0,r.default)("No object selected."));var f=o.getTreeNodeHierarchyFromIdentifier.call(t,s);if(m(f)||!_(f))return;var y=g(l,a,p.getData(),f),w=v(t,s);if(d){h(n,t);var x=b(p.getData(),f),k=function(t){e.launch_grid(l,y,!1,w,null,t)};c.default.get((0,i.default)("datagrid.filter"),(function(e){n.filterDialog((0,r.default)("Data Filter - %s",w),e,x,u,k).resizeTo(t.stdW.sm,t.stdH.sm)}))}else e.launch_grid(l,y,!1,w)},t.retrieveNameSpaceName=f,t.generateDatagridTitle=v;var r=p(n(91669)),i=p(n(28008)),o=n(82794),s=n(9807),l=p(n(20811)),d=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(81240)),c=p(n(19755));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function p(e){return e&&e.__esModule?e:{default:e}}function f(e){return void 0!==e.schema?e.schema.label:void 0!==e.view?e.view.label:void 0!==e.catalog?e.catalog.label:""}function g(e,t,n,a){var r=(0,i.default)("datagrid.panel",{trans_id:e});return r+="?is_query_tool=".concat(!1)+"&cmd_type=".concat(t.mnuid)+"&obj_type=".concat(n._type)+"&obj_id=".concat(n._id)+"&sgid=".concat(a.server_group._id)+"&sid=".concat(a.server._id)+"&did=".concat(a.database._id)+"&server_type=".concat(a.server.server_type)}function b(e,t){var n={sid:t.server._id,did:t.database._id,obj_id:e._id};return(0,i.default)("datagrid.filter_validate",n)}function h(e,t){var n=null;e.filterDialog||e.dialog("filterDialog",(function(){return{main:function(e,t,n,a,r){this.set("title",e),this.message=t,this.validateUrl=n,this.okCallback=r,this.preferences=a},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,r.default)("Data Filter"),"aria-label":(0,r.default)("Help"),url:(0,i.default)("help.static",{filename:"viewdata_filter.html"})}},{text:(0,r.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:(0,r.default)("OK"),key:null,className:"btn btn-primary fa fa-check pg-alertify-button"}],options:{modal:0,resizable:!0,maximizable:!1,pinnable:!1,autoReset:!1}}},build:function(){var t=this;e.pgDialogBuild.apply(t),(0,c.default)(t.__internal.buttons[2].element).attr("title",(0,r.default)("Use SHIFT + ENTER to apply filter...")),(0,c.default)(t.elements.body).on("keypress",(function(e){e.shiftKey&&13==e.keyCode&&t.__internal.buttons[2].element.click()}))},prepare:function(){var e=this,a=(0,c.default)(this.message),i=a.find("#sql_filter");(0,c.default)(this.elements.header).attr("data-title",this.get("title")),(0,c.default)(this.elements.body.childNodes[0]).addClass("dataview_filter_dialog"),this.setContent(a.get(0)),e.__internal.buttons[2].element.disabled=!0,n=this.filter_obj=l.default.fromTextArea(i.get(0),{lineNumbers:!0,mode:"text/x-pgsql",extraKeys:t.editor_shortcut_keys,indentWithTabs:!e.preferences.use_spaces,indentUnit:e.preferences.tab_size,tabSize:e.preferences.tab_size,lineWrapping:e.preferences.wrap_code,autoCloseBrackets:e.preferences.insert_pair_brackets,matchBrackets:e.preferences.brace_matching,screenReaderLabel:(0,r.default)("Filter SQL")});var o=d.calcFontSize(e.preferences.sql_font_size);(0,c.default)(this.filter_obj.getWrapperElement()).css("font-size",o),setTimeout((function(){e.filter_obj.refresh(),e.filter_obj.focus()}),500),e.filter_obj.on("change",(function(){""!==e.filter_obj.getValue()?e.__internal.buttons[2].element.disabled=!1:e.__internal.buttons[2].element.disabled=!0}))},callback:function(a){if(a.button.text==(0,r.default)("OK")){var i=this.filter_obj.getValue(),o=this;a.cancel=!0,c.default.ajax({url:o.validateUrl,method:"POST",async:!1,contentType:"application/json",data:JSON.stringify(i)}).done((function(t){t.data.status?(o.okCallback(i),o.close()):e.alert().setting({title:(0,r.default)("Validation Error"),label:(0,r.default)("Ok"),message:(0,r.default)(t.data.result),onok:function(){n.focus()}}).show()})).fail((function(n){410===n.status?t.report_error((0,r.default)("Error filtering rows - %s.",n.statusText),n.responseJSON.errormsg):e.alert((0,r.default)("Validation Error"),n)}))}else if(0==a.index)return a.cancel=!0,void t.showHelp(a.button.element.name,a.button.element.getAttribute("url"),null,null)}}}))}function m(e){return void 0===e.server||void 0===e.database}function _(e){return void 0!==e.schema||void 0!==e.view||void 0!==e.catalog}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.get_preferences_for_module("browser"),r=o.getTreeNodeHierarchyFromIdentifier.call(e,t),i=f(r),l=(0,s.getDatabaseLabel)(r),d=e.treeMenu.findNodeByDomElement(t),c="";c=n||a.vw_edt_tab_title_placeholder;var u={database:l,username:r.server.user.name,server:r.server.label,schema:i,table:d.getData().label,type:"datagrid"},p=(0,s.generateTitle)(c,u);return p}},7167:(e,t,n)=>{n(92222),n(89554),n(54747),Object.defineProperty(t,"__esModule",{value:!0}),t.showQueryTool=function(e,t,n,r,s,l){var d=r||"",p=function(e,t){return(0,o.getPanelTitle)(e,t)}(t,s);if(void 0===t.treeMenu.findNodeByDomElement(s))return void n.alert((0,a.default)("Query Tool Error"),(0,a.default)("No object selected."));var f=i.getTreeNodeHierarchyFromIdentifier.call(t,s);if(function(e){return void 0===e.server}(f))return;var g=c(l,p,f);u(e,l,g,p,d,n)},t.generateScript=function(e,t,n){var a="".concat(e.database,"/").concat(e.user,"@").concat(e.server),i=(0,s.getRandomInt)(1,9999999),o=(0,r.default)("datagrid.panel",{trans_id:i});o+="?is_query_tool=".concat(!0)+"&sgid=".concat(e.sgid)+"&sid=".concat(e.sid)+"&server_type=".concat(e.stype)+"&did=".concat(e.did),u(t,i,o,a,"",n)},t.showERDSqlTool=function(e,t,n,a,r){var i=(0,s.getRandomInt)(1,9999999);e={server_group:{_id:e.sgid},server:{_id:e.sid,server_type:e.stype},database:{_id:e.did}};var o=c(i,n,e,t);u(a,i,o,n,"",r)},t.launchDataGrid=u,t._set_dynamic_tab=function(e,t){e.docker.findPanels("frm_datagrid").forEach((function(e){t?(0,l.default)("#"+e.$title.index()+" div:first").addClass("wcPanelTab-dynamic"):(0,l.default)("#"+e.$title.index()+" div:first").removeClass("wcPanelTab-dynamic")})),e.docker.findPanels("frm_debugger").forEach((function(e){t?(0,l.default)("#"+e.$title.index()+" div:first").addClass("wcPanelTab-dynamic"):(0,l.default)("#"+e.$title.index()+" div:first").removeClass("wcPanelTab-dynamic")}))};var a=d(n(91669)),r=d(n(28008)),i=n(82794),o=n(9807),s=n(44092),l=d(n(19755));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,a){var i=(0,r.default)("datagrid.panel",{trans_id:e});return i+="?is_query_tool=".concat(!0)+"&sgid=".concat(n.server_group._id)+"&sid=".concat(n.server._id)+"&server_type=".concat(n.server.server_type),function(e){return e.database}(n)&&(i+="&did=".concat(n.database._id)),a&&(i+="&sql_id=".concat(a)),i}function u(e,t,n,r,i,o){e.launch_grid(t,n,!0,r,i)||o.alert((0,a.default)("Query tool launch error"),(0,a.default)("Please allow the pop-ups for this site to perform the desired action. If the main window of pgAdmin is closed then close this window and open a new pgAdmin session."))}},92959:(e,t,n)=>{var a,r;n(26699),n(66992),n(68309),n(41539),n(74916),n(32023),n(15306),n(73210),n(33948),n(32564),a=[n(91669),n(28008),n(19755),n(64492),n(58307),n(55112),n(58894),n(72316),n(71158),n(4631),n(12030),n(92323),n(6715),n(7167),n(44092),n(35816),n(49760)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c,u,p,f,g){var b=i.Tools=i.Tools||{},h=window.wcDocker;return i.Tools.Debugger||(b.Debugger={init:function(){if(!this.initialized){this.initialized=!0,o.add_menus([{name:"direct_debugger",node:"function",module:this,applies:["object","context"],callback:"get_function_information",category:e("Debugging"),priority:10,label:e("Debug"),data:{object:"function"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"global_debugger",node:"function",module:this,applies:["object","context"],callback:"check_func_debuggable",category:e("Debugging"),priority:10,label:e("Set breakpoint"),data:{object:"function",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"procedure_direct_debugger",node:"procedure",module:this,applies:["object","context"],callback:"get_function_information",category:e("Debugging"),priority:10,label:e("Debug"),data:{object:"procedure"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"procedure_indirect_debugger",node:"procedure",module:this,applies:["object","context"],callback:"check_func_debuggable",category:e("Debugging"),priority:10,label:e("Set breakpoint"),data:{object:"procedure",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"trigger_function_indirect_debugger",node:"trigger_function",module:this,applies:["object","context"],callback:"check_func_debuggable",priority:10,label:e("Set breakpoint"),category:e("Debugging"),icon:"fa fa-arrow-circle-right",data:{object:"trigger_function",debug_type:"indirect"},enable:"can_debug"},{name:"trigger_indirect_debugger",node:"trigger",module:this,applies:["object","context"],callback:"check_func_debuggable",priority:10,label:e("Set breakpoint"),category:e("Debugging"),icon:"fa fa-arrow-circle-right",data:{object:"trigger",debug_type:"indirect"},enable:"can_debug"},{name:"package_function_direct_debugger",node:"edbfunc",module:this,applies:["object","context"],callback:"get_function_information",category:e("Debugging"),priority:10,label:e("Debug"),data:{object:"edbfunc"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_function_global_debugger",node:"edbfunc",module:this,applies:["object","context"],callback:"check_func_debuggable",category:e("Debugging"),priority:10,label:e("Set breakpoint"),data:{object:"edbfunc",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_procedure_direct_debugger",node:"edbproc",module:this,applies:["object","context"],callback:"get_function_information",category:e("Debugging"),priority:10,label:e("Debug"),data:{object:"edbproc"},icon:"fa fa-arrow-circle-right",enable:"can_debug"},{name:"package_procedure_global_debugger",node:"edbproc",module:this,applies:["object","context"],callback:"check_func_debuggable",category:e("Debugging"),priority:10,label:e("Set breakpoint"),data:{object:"edbproc",debug_type:"indirect"},icon:"fa fa-arrow-circle-right",enable:"can_debug"}]),this.frame=new o.Frame({name:"frm_debugger",title:e("Debugger"),width:500,isCloseable:!0,isPrivate:!0,icon:"fa fa-bug",url:"about:blank"}),this.frame.load(o.docker);var t=this,n=setInterval((function(){o.preference_version()>0&&(t.preferences=o.get_preferences_for_module("debugger"),clearInterval(n))}),0);o.onPreferencesChange("debugger",(function(){t.preferences=o.get_preferences_for_module("debugger")}))}},can_debug:function(e,t,n){for(var a=o.tree,r=t,i=e;r;){if("catalog"==i._type)return!1;i=(r=a.hasParent(r)?a.parent(r):null)?a.itemData(r):null}var s=o.tree,l=s.selected(),d=l&&1==l.length?s.itemData(l):void 0,c=d&&o.Nodes[d._type];if(!d)return!1;var u=c.getTreeNodeHierarchy.apply(c,[l]);if(n&&n.debug_type&&"indirect"==n.debug_type&&!u.server.user.is_superuser)return!1;var p=u.function&&u.function.funcowner||u.procedure&&u.procedure.funcowner||u.edbfunc&&u.edbfunc.funcowner||u.edbproc&&u.edbproc.funcowner;return!(!u.server.user.is_superuser&&p!=u.server.user.name)&&(null==d.language&&"trigger"==d._type||null==d.language&&"edbfunc"==d._type||null==d.language&&"edbproc"==d._type||("plpgsql"==d.language||"edbspl"==d.language))},generate_url:function(e,n,r){var i="";a.each(a.sortBy(a.values(a.pick(n,(function(e,t){return"server_group"!=t}))),(function(e){return e.priority})),(function(e){i=g.sprintf("%s/%s",i,encodeURI(e._id))}));var o={URL:e,BASEURL:t("debugger.index"),REF:i,OBJTYPE:encodeURI(r.type)};return"{BASEURL}{URL}/{OBJTYPE}{REF}".replace(/{(\w+)}/g,(function(e,t){return o[t]}))},check_func_debuggable:function(t,a){var i=o.tree,s=a||i.selected(),l=s&&1==s.length?i.itemData(s):void 0,d=l&&o.Nodes[l._type];if(l){var c=d.getTreeNodeHierarchy.apply(d,[s]),u=this.generate_url("init",c,d),p=this;n.ajax({url:u,cache:!1}).done((function(e){p.start_global_debugger(t,a,e.data.trans_id)})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&r.alert(e("Debugger Error"),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}},start_global_debugger:function(a,i,s){var l=o.tree,d=i||l.selected(),c=d&&1==d.length?l.itemData(d):void 0,u=c&&o.Nodes[c._type];if(c){var f,g=u.getTreeNodeHierarchy.apply(u,[d]);"function"==c._type||"edbfunc"==c._type?f=t("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:s,sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:p.getFunctionId(g)}):"procedure"==c._type||"edbproc"==c._type?f=t("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:s,sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:p.getProcedureId(g)}):"trigger_function"==c._type?f=t("debugger.initialize_target_for_function",{debug_type:"indirect",trans_id:s,sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.trigger_function._id}):"trigger"==c._type&&"table"in g?f=t("debugger.initialize_target_for_trigger",{debug_type:"indirect",trans_id:s,sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.table._id,tri_id:g.trigger._id}):"trigger"==c._type&&"view"in g&&(f=t("debugger.initialize_target_for_trigger",{debug_type:"indirect",trans_id:s,sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.view._id,tri_id:g.trigger._id})),n.ajax({url:f,method:"GET"}).done((function(a){var i=t("debugger.direct",{trans_id:a.data.debuggerTransId}),s=o.get_preferences_for_module("browser"),l=s.new_browser_tab_open;if(l&&l.includes("debugger"))window.open(i,"_blank");else{o.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",(function(e){e.openURL(i)}));var d=o.docker.findPanels("properties"),c=o.docker.addPanel("frm_debugger",h.DOCK.STACKED,d[0]),u=g.function?g.function.label:g.trigger_function?g.trigger_function.label:g.trigger?g.trigger.label:g.procedure.label;p.setDebuggerTitle(c,s,u,g.schema.label,g.database.label,null,o),c.focus(),c.on(h.EVENT.CLOSED,(function(){var e=t("debugger.close",{trans_id:a.data.debuggerTransId});n.ajax({url:e,method:"DELETE"})})),c.on(h.EVENT.RENAME,(function(t){r.prompt("",t.$titleText[0].textContent,(function(e,t){if(t){t=t.trim();var n=o.get_preferences_for_module("browser"),a=g.function?g.function.label:g.trigger_function?g.trigger_function.label:g.trigger?g.trigger.label:g.procedure.label;p.setDebuggerTitle(c,n,a,g.schema.label,g.database.label,t,o)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}))}})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&r.alert(e("Debugger Error"),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}},get_function_information:function(a,i){var s=o.tree,l=i||s.selected(),d=l&&1==l.length?s.itemData(l):void 0,c=d&&o.Nodes[d._type];if(d){var f="edbproc"==d._type,g=c.getTreeNodeHierarchy.apply(c,[l]),b=this.generate_url("init",g,c);n.ajax({url:b,cache:!1}).done((function(a){var i=a.data.debug_info,s=a.data.trans_id;if(i[0].require_input)u(i[0],0,f,s);else{var l=o.tree,d=l.selected(),c=d&&1==d.length?l.itemData(d):void 0,b=c&&o.Nodes[c._type];if(!c)return;var m,_=b.getTreeNodeHierarchy.apply(b,[d]);"function"==c._type||"edbfunc"==c._type?m=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:s,sid:_.server._id,did:_.database._id,scid:_.schema._id,func_id:p.getFunctionId(_)}):"procedure"!=c._type&&"edbproc"!=c._type||(m=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:s,sid:_.server._id,did:_.database._id,scid:_.schema._id,func_id:p.getProcedureId(_)})),n.ajax({url:m,method:"GET"}).done((function(){var a=t("debugger.direct",{trans_id:s}),i=o.get_preferences_for_module("browser"),l=i.new_browser_tab_open;if(l&&l.includes("debugger"))window.open(a,"_blank");else{o.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",(function(e){e.openURL(a)}));var d=o.docker.findPanels("properties"),c=o.docker.addPanel("frm_debugger",h.DOCK.STACKED,d[0]),u=_.function?_.function.label:_.trigger_function?_.trigger_function.label:_.trigger?_.trigger.label:_.procedure.label;p.setDebuggerTitle(c,i,u,_.schema.label,_.database.label,null,o),c.focus(),c.on(h.EVENT.CLOSED,(function(){var e=t("debugger.close",{trans_id:s});n.ajax({url:e,method:"DELETE"})})),c.on(h.EVENT.RENAME,(function(t){r.prompt("",t.$titleText[0].textContent,(function(e,t){if(t){t=t.trim();var n=o.get_preferences_for_module("browser"),a=g.function?g.function.label:g.trigger_function?g.trigger_function.label:g.trigger?g.trigger.label:g.procedure.label;p.setDebuggerTitle(c,n,a,g.schema.label,g.database.label,t,o)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}))}})).fail((function(t){r.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)}))}})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&r.alert(e("Debugger Error"),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}}}),i.Tools.Debugger}.apply(t,a))||(e.exports=r)},92323:(e,t,n)=>{var a,r;n(69826),n(26699),n(82772),n(54678),n(91058),n(74916),n(32023),n(15306),n(23123),n(73210),n(32564),a=[n(91669),n(28008),n(19755),n(64492),n(72316),n(55455),n(55112),n(58894),n(71158),n(1950),n(6715),n(35816)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c){var u=window.wcDocker,p=function(e){var t=e.get("type");if(-1!=t.indexOf("[]"))switch(t.replace("[]","")){case"boolean":return l.Extension.InputBooleanArrayCell;case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return l.Extension.InputIntegerArrayCell;case"real":case"numeric":case"double precision":case"decimal":return l.Extension.InputNumberArrayCell;default:return l.Extension.InputStringArrayCell}else switch(t){case"boolean":return l.BooleanCell.extend({formatter:l.BooleanCellFormatter});case"integer":case"smallint":case"bigint":case"serial":case"smallserial":case"bigserial":case"oid":case"cid":case"xid":case"tid":return null!=e.get("value")&&e.set({value:isNaN(parseInt(e.get("value")))?null:parseInt(e.get("value"))},{silent:!0}),l.IntegerCell;case"real":case"numeric":case"double precision":case"decimal":return null!=e.get("value")&&e.set({value:parseFloat(e.get("value"))},{silent:!0}),l.NumberCell;case"string":return l.StringCell;case"date":return l.DateCell;default:return l.Cell}},f=function(e){return-1!=e.get("type").indexOf("[]")?l.StringCell:l.BooleanCell},g=r.Model.extend({defaults:{name:void 0,type:void 0,is_null:void 0,expr:void 0,value:void 0,use_default:void 0,default_value:void 0},validate:function(){if(a.isUndefined(this.get("value"))||a.isNull(this.get("value"))||""==String(this.get("value")).replace(/^\s+|\s+$/g,"")){var t=e("Please enter a value for the parameter.");return this.errorModel.set("value",t),t}return this.errorModel.unset("value"),null}}),b=r.Collection.extend({model:g}),h=function(e){return e instanceof r.Model&&e.get("use_default")},m=function(e){if(e instanceof r.Model)return-1==e.get("type").indexOf("[]")};return function(r,o,g,_){i.debuggerInputArgsDialog||i.dialog("debuggerInputArgsDialog",(function(){return{main:function(r,o,c,u,g){this.preferences=d.default.pgAdmin.Browser.get_preferences_for_module("debugger"),this.set("title",r),this.set("debug_info",o),this.set("restart_debug",c),this.set("trans_id",g),this.set("is_edb_proc",u);var _,v,y,w,x,k,C=this.func_args_data=[];if(0==c){var S=s.tree,D=S.selected(),j=D&&1==D.length?S.itemData(D):void 0,N=j&&s.Nodes[j._type];if(!j)return;var T,E=N.getTreeNodeHierarchy.apply(N,[D]);"function"==j._type?T=t("debugger.get_arguments",{sid:E.server._id,did:E.database._id,scid:E.schema._id,func_id:E.function._id}):"procedure"==j._type?T=t("debugger.get_arguments",{sid:E.server._id,did:E.database._id,scid:E.schema._id,func_id:E.procedure._id}):"edbfunc"==j._type?T=t("debugger.get_arguments",{sid:E.server._id,did:E.database._id,scid:E.schema._id,func_id:E.edbfunc._id}):"edbproc"==j._type&&(T=t("debugger.get_arguments",{sid:E.server._id,did:E.database._id,scid:E.schema._id,func_id:E.edbproc._id}))}else T=t("debugger.get_arguments",{sid:o.server_id,did:o.database_id,scid:o.schema_id,func_id:o.function_id});n.ajax({url:T,method:"GET",async:!1}).done((function(e){if(0!=e.data.args_count)for(D=0;D<e.data.result.length;D++)C.push({arg_id:e.data.result[D].arg_id,is_null:e.data.result[D].is_null,is_expression:e.data.result[D].is_expression,use_default:e.data.result[D].use_default,value:e.data.result[D].value})})).fail((function(){i.alert(e("Debugger Error"),e("Unable to fetch the arguments from server"))}));var P,O,M,A,B,R,I=l.HeaderCell.extend({className:"width_percent_25"}),L=[],z=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"is_null",label:e("Null?"),type:"boolean",cell:"boolean",align_center:!0},{name:"expr",label:e("Expression?"),type:"boolean",cellFunction:f,editable:m,align_center:!0},{name:"value",label:e("Value"),type:"text",editable:!0,cellFunction:p,headerCell:I,align_center:!0},{name:"use_default",label:e("Use Default?"),type:"boolean",cell:"boolean",editable:h},{name:"default_value",label:e("Default"),type:"text",editable:!1,cell:"string"}],q=[],U=[],F=this.input_arg_id=[];if(null!=o.proargmodes){var H=o.proargmodes.split(",");for(P=0;P<H.length;P++)("i"==H[P]||"b"==H[P]||u&&"o"==H[P])&&F.push(P)}else{var V=o.proargtypenames.split(",");for(P=0;P<V.length;P++)F.push(P)}if(v=o.proargtypenames.split(","),null!=o.proargmodes&&(y=o.proargmodes.split(",")),o.pronargdefaults&&(w=o.pronargdefaults,x=o.proargdefaults.split(","),k=w),null!=o.proargnames){for(R=(_=o.proargnames.split(",")).length-1;R>=0;R--)null!=o.proargmodes?y&&("i"==y[R]||"b"==y[R]||u&&"o"==y[R])&&(k?(k-=1,L[R]=x[k]):L[R]="<no default>"):k?(k-=1,L[R]=x[k]):L[R]="<no default>";if(0!=v.length)for(D=0;D<v.length;D++)null!=o.proargmodes?y&&("i"==y[D]||"b"==y[D]||u&&"o"==y[D])&&(B=!1,"<no default>"!=L[D]&&(B=!0),q.push({name:_[D],type:v[D],use_default:B,default_value:L[D]})):(B=!1,"<no default>"!=L[D]&&(B=!0),q.push({name:_[D],type:v[D],use_default:B,default_value:L[D]}));if(0!=C.length)for(D=0;D<C.length;D++)A=C[D].arg_id,null!=o.proargmodes&&y&&"o"==y[A]&&!u||(M=[],-1!=v[A].indexOf("[]")?(O=C[D].value.split(","),a.each(O,(function(e){M.push({value:e})}))):M=C[D].value,U.push({name:_[A],type:v[A],is_null:!!C[D].is_null,expr:!!C[D].is_expression,value:M,use_default:!!C[D].use_default,default_value:L[A]}))}else{var G=[];for(D=0;D<v.length;D++)G[D]="dbgparam"+(D+1);if(o.pronargdefaults){for(R=G.length-1;R>=0;R--)k?(k-=1,L[R]=x[k]):L[R]="<No default value>";for(D=0;D<v.length;D++)(null==o.proargmodes||y&&("i"==y[D]||"b"==y[D]||u&&"o"==y[D]))&&(B=!1,"<No default value>"!=L[D]&&(B=!0),q.push({name:G[D],type:v[D],use_default:B,default_value:L[D]}))}else for(D=0;D<v.length;D++)q.push({name:G[D],type:v[D],use_default:!1,default_value:"<No default value>"}),L[D]="<No default value>";if(0!=C.length)for(D=0;D<C.length;D++)A=C[D].arg_id,M=[],-1!=v[A].indexOf("[]")?(O=C[D].value.split(","),a.each(O,(function(e){M.push({value:e})}))):M=C[D].value,U.push({name:G[A],type:v[A],is_null:!!C[D].is_null,expr:!!C[D].is_expression,value:M,use_default:!!C[D].use_default,default_value:L[A]})}0==C.length?this.debuggerInputArgsColl=new b(q):this.debuggerInputArgsColl=new b(U),this.grid&&(this.grid.remove(),this.grid=null);var $=this.grid=new l.Grid({columns:z,collection:this.debuggerInputArgsColl,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});$.render();var K=document.createElement("div");K.classList.add("debugger-args"),K.appendChild($.el),n(this.elements.content).html(K);var W=n($.el).find("input:checkbox").first();W.length&&setTimeout((function(){W.trigger("focus")}),250)},settings:{debug_info:void 0,restart_debug:void 0,trans_id:void 0},setup:function(){return{buttons:[{text:e("Clear All"),className:"btn btn-secondary pull-left fa fa-eraser pg-alertify-button"},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button"},{text:e("Debug"),key:13,className:"btn btn-primary fa fa-bug pg-alertify-button"}],options:{padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}},callback:function(a){if(a.button.text===e("Debug")){var r=this;if(0==r.setting("restart_debug")){var o=s.tree,l=o.selected(),p=l&&1==l.length?o.itemData(l):void 0,f=p&&s.Nodes[p._type];if(!p)return;var g=f.getTreeNodeHierarchy.apply(f,[l])}var b,h=[],m=this.sqlite_func_args_list=[],_=0;if(this.grid.collection.each((function(e){var t;(e.get("is_null")?h.push({name:e.get("name"),type:e.get("type"),value:"NULL"}):e.get("use_default")?h.push({name:e.get("name"),type:e.get("type"),value:e.get("default_value")}):h.push({name:e.get("name"),type:e.get("type"),value:e.get("value")}),0==r.setting("restart_debug"))?("function"==p._type?t=g.function._id:"procedure"==p._type?t=g.procedure._id:"edbfunc"==p._type?t=g.edbfunc._id:"edbproc"==p._type&&(t=g.edbproc._id),m.push({server_id:g.server._id,database_id:g.database._id,schema_id:g.schema._id,function_id:t,arg_id:r.input_arg_id[_],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")})):m.push({server_id:r.setting("debug_info").server_id,database_id:r.setting("debug_info").database_id,schema_id:r.setting("debug_info").schema_id,function_id:r.setting("debug_info").function_id,arg_id:r.input_arg_id[_],is_null:e.get("is_null")?1:0,is_expression:e.get("expr")?1:0,use_default:e.get("use_default")?1:0,value:e.get("value")});_+=1})),0==r.setting("restart_debug"))p&&"function"==p._type?b=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:r.setting("trans_id"),sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.function._id}):p&&"procedure"==p._type?b=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:r.setting("trans_id"),sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.procedure._id}):p&&"edbfunc"==p._type?b=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:r.setting("trans_id"),sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbfunc._id}):p&&"edbproc"==p._type&&(b=t("debugger.initialize_target_for_function",{debug_type:"direct",trans_id:r.setting("trans_id"),sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbproc._id})),n.ajax({url:b,method:"POST",data:{data:JSON.stringify(h)}}).done((function(a){var o,l=t("debugger.direct",{trans_id:a.data.debuggerTransId}),f=d.default.pgAdmin.Browser.get_preferences_for_module("browser").new_browser_tab_open;if(f&&f.includes("debugger"))window.open(l,"_blank");else{s.Events.once("pgadmin-browser:frame:urlloaded:frm_debugger",(function(e){e.openURL(l)}));var b=s.docker.findPanels("properties"),h=s.docker.addPanel("frm_debugger",u.DOCK.STACKED,b[0]),_=s.get_preferences_for_module("browser"),v=g.function?g.function.label:g.trigger_function?g.trigger_function.label:g.trigger?g.trigger.label:g.procedure.label;c.setDebuggerTitle(h,_,v,g.schema.label,g.database.label,null,s),h.focus(),h.on(u.EVENT.CLOSED,(function(){var e=t("debugger.close",{trans_id:a.data.debuggerTransId});n.ajax({url:e,method:"DELETE"})})),h.on(u.EVENT.RENAME,(function(t){i.prompt("",t.$titleText[0].textContent,(function(e,t){if(t){t=t.trim();var n=g.function?g.function.label:g.trigger_function?g.trigger_function.label:g.trigger?g.trigger.label:g.procedure.label;c.setDebuggerTitle(h,r.preferences,n,g.schema.label,g.database.label,t,s)}}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})}))}"function"==p._type?o=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.function._id}):"procedure"==p._type?o=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.procedure._id}):"edbfunc"==p._type?o=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbfunc._id}):"edbproc"==p._type&&(o=t("debugger.set_arguments",{sid:g.server._id,did:g.database._id,scid:g.schema._id,func_id:g.edbproc._id})),n.ajax({url:o,method:"POST",data:{data:JSON.stringify(m)}}).done((function(){})).fail((function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}))})).fail((function(t){i.alert(e("Debugger Target Initialization Error"),t.responseJSON.errormsg)}));else{b=t("debugger.start_listener",{trans_id:r.setting("debug_info").trans_id}),n.ajax({url:b,method:"POST",data:{data:JSON.stringify(h)}}).done((function(){})).fail((function(t){i.alert(e("Debugger Listener Startup Error"),t.responseJSON.errormsg)}));var v=t("debugger.set_arguments",{sid:r.setting("debug_info").server_id,did:r.setting("debug_info").database_id,scid:r.setting("debug_info").schema_id,func_id:r.setting("debug_info").function_id});n.ajax({url:v,method:"POST",data:{data:JSON.stringify(m)}}).done((function(){})).fail((function(){i.alert(e("Debugger Error"),e("Unable to set the arguments on the server"))}))}return!0}if(a.button.text===e("Cancel"))return n.ajax({method:"DELETE",url:t("debugger.close",{trans_id:this.setting("trans_id")})}),!1;if(a.button.text===e("Clear All")){var y=this,w=null;if(0==y.setting("restart_debug")){var x=s.tree.selected(),k=s.tree.itemData(x);if(!k)return;var C=s.Nodes[k._type],S=C.getTreeNodeHierarchy.call(C,x);w=t("debugger.clear_arguments",{sid:S.server._id,did:S.database._id,scid:S.schema._id,func_id:k._id})}else w=t("debugger.clear_arguments",{sid:y.setting("debug_info").server_id,did:y.setting("debug_info").database_id,scid:y.setting("debug_info").schema_id,func_id:y.setting("debug_info").function_id});return n.ajax({url:w,method:"POST",data:{data:JSON.stringify(h)}}).done((function(){y.__internal.buttons[2].element.disabled=!0,y.main(y.setting("title"),y.setting("debug_info"),y.setting("restart_debug"),y.setting("is_edb_proc"),y.setting("trans_id")),y.prepare()})).fail((function(t){i.alert(e("Clear failed"),t.responseJSON.errormsg)})),a.cancel=!0,!0}},build:function(){i.pgDialogBuild.apply(this)},prepare:function(){var e;n(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),0==this.func_args_data.length?this.__internal.buttons[2].element.disabled=!0:this.__internal.buttons[2].element.disabled=!1,this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:edited",(e=this,function(){for(var t=!1,n=0;n<this.collection.length;n++)if(this.collection.models[n].get("is_null"))e.__internal.buttons[2].element.disabled=!1,t=!0;else if(null==this.collection.models[n].get("value")||null==this.collection.models[n].get("value")){if(t=!0,!this.collection.models[n].get("use_default")){e.__internal.buttons[2].element.disabled=!0;break}e.__internal.buttons[2].element.disabled=!1}t||(e.__internal.buttons[2].element.disabled=!1)})),this.grid.listenTo(this.debuggerInputArgsColl,"backgrid:error",function(e){return function(){e.__internal.buttons[2].element.disabled=!0}}(this))}}})),i.debuggerInputArgsDialog(e("Debugger"),r,o,g,_).resizeTo(s.stdW.md,s.stdH.md)}}.apply(t,a))||(e.exports=r)},6715:(e,t,n)=>{n(92222),n(40561),n(74916),n(23123);var a=n(9807),r=n(7167);function i(e){var t=e.split("(");t.splice(-1,1);var n=null,a="";for(n=0;n<t.length;n++)a=a.concat(t[n]),n!=t.length-1&&(a=a.concat("("));return a}e.exports={setFocusToDebuggerEditor:function(e,t){t&&9!==(t.which||t.keyCode)&&e.focus()},getFunctionId:function(e){var t;return e&&(e.function&&e.function._id?t=e.function._id:e.edbfunc&&e.edbfunc._id&&(t=e.edbfunc._id)),t},getProcedureId:function(e){var t;return e&&(e.procedure&&e.procedure._id?t=e.procedure._id:e.edbproc&&e.edbproc._id&&(t=e.edbproc._id)),t},setDebuggerTitle:function(e,t,n,o,s){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c="";c=l||t.debugger_tab_title_placeholder;var u=n.split("(");n=i(n);var p=u[u.length-1].split(")"),f="";p.length>0&&(f=f.concat(p[0]));var g={function_name:n,args:f,schema:o,database:s,type:"debugger"},b=(0,a.generateTitle)(c,g);(0,r._set_dynamic_tab)(d,t.dynamic_tabs),e.title("<span>"+b+"</span>")}}},22074:(e,t,n)=>{var a,r;n(69826),n(26699),n(69600),n(24812),n(68309),n(74916),n(32023),n(15306),n(32564),a=[n(91669),n(28008),n(19755),n(64492),n(55455),n(55112),n(58894),n(72316),n(71158),n(12030),n(20811),n(92323),n(72945),n(6715),n(1950),n(35816)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c,u,p,f,g){var b=c.default,h=window.wcDocker;null!=i.Browser.tree&&(i=i||window.pgAdmin||{});var m=i.Tools=i.Tools||{};if(m.DirectDebug)return m.DirectDebug;var _=new function(){};a.extend(_,s.Events,{enable:function(e,t){this.trigger("pgDebugger:button:state:"+e,t)},enable_toolbar_buttons:function(){var e=this;e.enable("stop",!0),e.enable("step_over",!0),e.enable("step_into",!0),e.enable("toggle_breakpoint",!0),e.enable("clear_all_breakpoints",!0),e.enable("continue",!0)},disable_toolbar_buttons:function(){var e=this;e.enable("stop",!1),e.enable("step_over",!1),e.enable("step_into",!1),e.enable("toggle_breakpoint",!1),e.enable("clear_all_breakpoints",!1),e.enable("continue",!1)},set_breakpoint:function(a,i,o){var s=t("debugger.set_breakpoint",{trans_id:a,line_no:i,set_type:o});n.ajax({url:s,method:"GET"}).done((function(e){e.data.status})).fail((function(){r.alert(e("Debugger Error"),e("Error while setting debugging breakpoint."))}))},UpdateBreakpoint:function(e){var t=this.GetBreakpointInformation(e);if(1!=t.length||-1!=t[0].linenumber){for(var n,a=new Array,r=0;r<t.length;r++)-1!=t[r].linenumber&&a.push(t[r].linenumber);for(r=0;r<a.length;r++){null!=m.DirectDebug.editor.lineInfo(a[r]-1).gutterMarkers?m.DirectDebug.editor.setGutterMarker(a[r]-1,"breakpoints",null):m.DirectDebug.editor.setGutterMarker(a[r]-1,"breakpoints",(n=void 0,(n=document.createElement("div")).style.color="#822",n.innerHTML="●",n))}}},GetBreakpointInformation:function(a){var i="",o=t("debugger.execute_query",{trans_id:a,query_type:"get_breakpoints"});return n.ajax({url:o,method:"GET",async:!1}).done((function(t){"Success"===t.data.status?i=t.data.result:"NotConnected"===t.data.status&&r.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while fetching breakpoint information."))})),i},setActiveLine:function(e){var t=this,n=m.DirectDebug.editor;e&&t.active_line_no&&n.removeLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),!e&&t.active_line_no&&(e=t.active_line_no),e>0&&(t.active_line_no=e,n.addLineClass(t.active_line_no,"wrap","CodeMirror-activeline-background"),n.centerOnLine(t.active_line_no))},start_execution:function(a,i){var o=this,s=t("debugger.start_execution",{trans_id:a,port_num:i});n.ajax({url:s,method:"GET"}).done((function(t){"Success"===t.data.status?o.execute_query(a):"NotConnected"===t.data.status&&r.alert(e("Debugger Error"),e("Error while starting debugging session."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while starting debugging session."))}))},execute_query:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"wait_for_breakpoint"});n.ajax({url:o,method:"GET"}).done((function(t){"Success"===t.data.status?(null!=t.data.result[0].src&&null!=t.data.result[0].linenumber&&(m.DirectDebug.editor.setValue(t.data.result[0].src),i.setActiveLine(t.data.result[0].linenumber-2)),i.GetStackInformation(a),m.DirectDebug.debug_type&&i.poll_end_execution_result(a)):"NotConnected"===t.data.status&&r.alert(e("Debugger Error"),e("Error while executing requested debugging information."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while executing requested debugging information."))}))},GetLocalVariables:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"get_variables"});n.ajax({url:o,method:"GET"}).done((function(t){"Success"===t.data.status?(i.AddLocalVariables(t.data.result),i.AddParameters(t.data.result),m.DirectDebug.debug_restarted&&(m.DirectDebug.debug_type&&i.poll_end_execution_result(a),m.DirectDebug.debug_restarted=!1)):"NotConnected"===t.data.status&&r.alert(e("Debugger Error"),e("Error while fetching variable information."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while fetching variable information."))}))},GetStackInformation:function(a){var i=this,o=t("debugger.execute_query",{trans_id:a,query_type:"get_stack_info"});n.ajax({url:o,method:"GET"}).done((function(t){"Success"===t.data.status?(i.AddStackInformation(t.data.result),i.GetLocalVariables(m.DirectDebug.trans_id)):"NotConnected"===t.data.status&&r.alert(e("Debugger Error"),e("Error while fetching stack information."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while fetching stack information."))}))},poll_result:function(a){var o=this;if(m.DirectDebug.is_polling_required){var s,l=t("debugger.poll_result",{trans_id:a});s=m.DirectDebug.polling_timeout_idle?1e3:200,setTimeout((function(){n.ajax({url:l,method:"GET",beforeSend:function(e){e.setRequestHeader(i.csrf_token_header,i.csrf_token),n(".debugger-container").addClass("show_progress")}}).done((function(t){n(".debugger-container").removeClass("show_progress"),"Success"===t.data.status?null==t.data.result||0==t.data.result.length?o.poll_result(a):(m.DirectDebug.debug_type||m.DirectDebug.first_time_indirect_debug?(m.DirectDebug.polling_timeout_idle=!1,m.DirectDebug.docker.finishLoading(50),t.data.result[0].src!=m.DirectDebug.editor.getValue()&&(m.DirectDebug.editor.setValue(t.data.result[0].src),o.UpdateBreakpoint(a)),o.setActiveLine(t.data.result[0].linenumber-2),o.GetStackInformation(a)):(m.DirectDebug.docker.finishLoading(50),o.setActiveLine(-1),o.clear_all_breakpoint(a),o.execute_query(a),m.DirectDebug.first_time_indirect_debug=!0,m.DirectDebug.polling_timeout_idle=!1),setTimeout((function(){o.enable_toolbar_buttons()}),500)):"Busy"===t.data.status?(m.DirectDebug.polling_timeout_idle=!0,m.DirectDebug.debug_type||(m.DirectDebug.docker.startLoading(e("Waiting for another session to invoke the target...")),o.disable_toolbar_buttons(),m.DirectDebug.first_time_indirect_debug=!1),o.poll_result(a)):"NotConnected"===t.data.status&&r.alert(e("Debugger Error"),e("Error while polling result."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while polling result."))}))}),s)}},update_messages:function(e){e=a.escape(e);var t,n="";n=(t=m.DirectDebug.messages_panel.$container.find(".messages").html())?(t+"\n"+e).replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/(<br\ ?\/?>)+/g,"<br />"):e,m.DirectDebug.messages_panel.$container.find(".messages").html(n)},poll_end_execution_result:function(a){var i=this;if(m.DirectDebug.is_polling_required){var o,s=t("debugger.poll_end_execution_result",{trans_id:a});o=m.DirectDebug.polling_timeout_idle?1200:250,setTimeout((function(){n.ajax({url:s,method:"GET"}).done((function(t){"Success"===t.data.status?null==t.data.result?(i.setActiveLine(-1),m.DirectDebug.direct_execution_completed=!0,m.DirectDebug.polling_timeout_idle=!0,r.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),n(".debugger-container").removeClass("show_progress"),setTimeout((function(){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0)}),500),m.DirectDebug.is_polling_required=!1):null!=t.data.result&&(i.setActiveLine(-1),i.AddResults(t.data.col_info,t.data.result),m.DirectDebug.results_panel.focus(),m.DirectDebug.direct_execution_completed=!0,m.DirectDebug.polling_timeout_idle=!0,r.success(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),n(".debugger-container").removeClass("show_progress"),setTimeout((function(){i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),i.enable("continue",!0)}),500),m.DirectDebug.is_polling_required=!1):"Busy"===t.data.status?(i.poll_end_execution_result(a),t.data.status_message&&i.update_messages(t.data.status_message)):"NotConnected"===t.data.status?r.alert(e("Debugger poll end execution error"),t.data.result):"ERROR"===t.data.status&&(m.DirectDebug.direct_execution_completed=!0,i.setActiveLine(-1),m.DirectDebug.is_user_aborted_debugging||r.error(t.info,3),t.data.status_message&&i.update_messages(t.data.status_message),m.DirectDebug.messages_panel.focus(),n(".debugger-container").removeClass("show_progress"),i.enable("stop",!1),i.enable("step_over",!1),i.enable("step_into",!1),i.enable("toggle_breakpoint",!1),i.enable("clear_all_breakpoints",!1),m.DirectDebug.is_user_aborted_debugging||(i.enable("continue",!0),m.DirectDebug.is_user_aborted_debugging=!1),m.DirectDebug.is_polling_required=!1)})).fail((function(){r.alert(e("Debugger Error"),e("Error while polling result."))}))}),o)}},Restart:function(a){var i=this,o=t("debugger.restart",{trans_id:a});i.disable_toolbar_buttons(),m.DirectDebug.messages_panel.$container.find(".messages").html(""),n.ajax({url:o}).done((function(o){var s=o.data.restart_debug?1:0;if(m.DirectDebug.polling_timeout_idle=!1,m.DirectDebug.is_polling_required=!0,i.poll_result(a),s&&(m.DirectDebug.debug_restarted=!0),o.data.result.require_input)u(o.data.result,s);else{var l=t("debugger.start_listener",{trans_id:a});n.ajax({url:l,method:"GET"}).done((function(){m.DirectDebug.debug_type&&i.poll_end_execution_result(a)})).fail((function(){r.alert(e("Debugger Error"),e("Error while polling result."))}))}})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&r.alert(e("Debugger Error"),n.errormsg)}catch(e){console.warn(e.stack||e)}}))},Continue:function(a){var i=this;if(i.disable_toolbar_buttons(),m.DirectDebug.direct_execution_completed&&m.DirectDebug.direct_execution_completed==m.DirectDebug.polling_timeout_idle)i.Restart(a);else{var o=t("debugger.execute_query",{trans_id:a,query_type:"continue"});n.ajax({url:o,method:"GET"}).done((function(t){t.data.status?i.poll_result(a):r.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while executing continue in debugging session."))}))}},Step_over:function(a){var i=this;i.disable_toolbar_buttons();var o=t("debugger.execute_query",{trans_id:a,query_type:"step_over"});n.ajax({url:o,method:"GET"}).done((function(t){t.data.status?i.poll_result(a):r.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while executing step over in debugging session."))}))},Step_into:function(a){var i=this;i.disable_toolbar_buttons();var o=t("debugger.execute_query",{trans_id:a,query_type:"step_into"});n.ajax({url:o,method:"GET"}).done((function(t){t.data.status?i.poll_result(a):r.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while executing step into in debugging session."))}))},Stop:function(a){var i=this;i.disable_toolbar_buttons();var o=t("debugger.execute_query",{trans_id:a,query_type:"abort_target"});n.ajax({url:o,method:"GET"}).done((function(t){t.data.status?(i.setActiveLine(-1),m.DirectDebug.direct_execution_completed=!0,m.DirectDebug.is_user_aborted_debugging=!0,m.DirectDebug.is_polling_required=!1,i.enable("continue",!1),r.success(t.info,3)):"NotConnected"===t.data.status&&r.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while executing stop in debugging session."))}))},toggle_breakpoint:function(a){var i=this;i.disable_toolbar_buttons();var o="";o=null==m.DirectDebug.editor.lineInfo(i.active_line_no).gutterMarkers?t("debugger.set_breakpoint",{trans_id:a,line_no:i.active_line_no+1,set_type:"1"}):t("debugger.set_breakpoint",{trans_id:a,line_no:i.active_line_no+1,set_type:"0"}),n.ajax({url:o,method:"GET"}).done((function(t){var n;t.data.status?(null!=m.DirectDebug.editor.lineInfo(i.active_line_no).gutterMarkers?m.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",null):m.DirectDebug.editor.setGutterMarker(i.active_line_no,"breakpoints",((n=document.createElement("div")).style.color="#822",n.innerHTML="●",n)),i.enable_toolbar_buttons()):"NotConnected"===t.data.status&&r.alert(e("Debugger Error"),e("Error while toggling breakpoint."))})).fail((function(){r.alert(e("Debugger Error"),e("Error while toggling breakpoint."))}))},clear_all_breakpoint:function(a){var i=this,o=i.GetBreakpointInformation(a);if(1!=o.length||-1!=o[0].linenumber){i.disable_toolbar_buttons();for(var s=new Array,l=0;l<o.length;l++)-1!=o[l].linenumber&&s.push(o[l].linenumber);var d=t("debugger.clear_all_breakpoint",{trans_id:a});n.ajax({url:d,method:"POST",data:{breakpoint_list:s.join()}}).done((function(e){if(e.data.status)for(var t=0;t<s.length;t++){var n=m.DirectDebug.editor.lineInfo(s[t]-1);n&&null!=n.gutterMarkers&&m.DirectDebug.editor.setGutterMarker(s[t]-1,"breakpoints",null)}i.enable_toolbar_buttons()})).fail((function(){r.alert(e("Debugger Error"),e("Error while clearing all breakpoint."))}))}},AddStackInformation:function(t){var n=this;n.stack_grid&&(n.stack_grid.remove(),n.stack_grid=null);for(var a=s.Model.extend({defaults:{frame_id:0,name:void 0,value:void 0,line_no:void 0}}),r=s.Collection.extend({model:a}),i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",editable:!1,cell:"string"},{name:"line_no",label:e("Line No."),type:"text",editable:!1,cell:"string"}],o=[],d=0;d<t.length;d++)o.push({frame_id:d,name:t[d].targetname,value:t[d].args,line_no:t[d].linenumber});var c=this.stackColl=new r(o);this.stackColl.on("backgrid:row:selected",n.select_frame,n);var u=this.stack_grid=new l.Grid({emptyText:e("No data found"),columns:i,row:l.Row.extend({events:{click:"rowClick"},rowClick:function(){n.frame_id=this.model.get("frame_id"),this.model.trigger("backgrid:row:selected",this),n.stack_grid.$el.find("td").css("background-color",this.disabledColor),this.$el.find("td").css("background-color",this.highlightColor)}}),collection:c,className:"backgrid table table-bordered table-noouter-border table-bottom-border"});u.render(),m.DirectDebug.stack_pane_panel.$container.find(".stack_pane").append(u.el)},AddResults:function(t,n){var r=this;r.result_grid&&(r.result_grid.remove(),r.result_grid=null);var i=s.Model.extend({defaults:{name:void 0}}),o=s.Collection.extend({model:i}),d=[];a.size(t)&&a.each(t,(function(e){var t={type:"text",editable:!1,cell:"string"};t.name=t.label=e.name,d.push(t)}));var c=this.result_grid=new l.Grid({emptyText:e("No data found"),columns:d,collection:new o(n),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});c.render(),m.DirectDebug.results_panel.$container.find(".debug_results").append(c.el)},AddLocalVariables:function(t){var n=this;n.variable_grid&&(n.variable_grid.remove(),n.variable_grid=null);var a=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),r=s.Collection.extend({model:a});r.prototype.on("change",n.deposit_parameter_value,n);var i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var d=0;d<t.length;d++)"L"==t[d].varclass&&o.push({name:t[d].name,type:t[d].dtype,value:t[d].value});var c=this.variable_grid=new l.Grid({emptyText:e("No data found"),columns:i,collection:new r(o),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});c.collection.on("backgrid:edited",(function(e,t,n){f.setFocusToDebuggerEditor(m.DirectDebug.editor,n)})),c.render(),m.DirectDebug.local_variables_panel.$container.find(".local_variables").append(c.el)},AddParameters:function(t){var n=this;n.param_grid&&(n.param_grid.remove(),n.param_grid=null);var a=s.Model.extend({defaults:{name:void 0,type:void 0,value:void 0}}),r=n.ParametersCollection=s.Collection.extend({model:a});r.prototype.on("change",n.deposit_parameter_value,n);var i=[{name:"name",label:e("Name"),type:"text",editable:!1,cell:"string"},{name:"type",label:e("Type"),type:"text",editable:!1,cell:"string"},{name:"value",label:e("Value"),type:"text",cell:"string"}],o=[];if(0!=t.length)for(var d=0;d<t.length;d++)"A"==t[d].varclass&&o.push({name:t[d].name,type:t[d].dtype,value:t[d].value});var c=this.param_grid=new l.Grid({emptyText:e("No data found"),columns:i,collection:new r(o),className:"backgrid table table-bordered table-noouter-border table-bottom-border"});c.collection.on("backgrid:edited",(function(e,t,n){f.setFocusToDebuggerEditor(m.DirectDebug.editor,n)})),c.render(),m.DirectDebug.parameters_panel.$container.find(".parameters").append(c.el)},deposit_parameter_value:function(a){var i=this,o=[];o.push({name:a.get("name"),type:a.get("type"),value:a.get("value")});var s=t("debugger.deposit_value",{trans_id:m.DirectDebug.trans_id});n.ajax({url:s,method:"POST",data:{data:JSON.stringify(o)}}).done((function(e){e.data.status&&(i.GetLocalVariables(m.DirectDebug.trans_id),e.data.result?r.success(e.data.info,3):r.error(e.data.info,3))})).fail((function(){r.alert(e("Debugger Error"),e("Error while depositing variable value."))}))},select_frame:function(){var a=this,i=t("debugger.select_frame",{trans_id:m.DirectDebug.trans_id,frame_id:a.frame_id});n.ajax({url:i,method:"GET"}).done((function(e){e.data.status&&(m.DirectDebug.editor.setValue(e.data.result[0].src),a.UpdateBreakpoint(m.DirectDebug.trans_id),a.setActiveLine(e.data.result[0].linenumber-2),a.GetLocalVariables(m.DirectDebug.trans_id))})).fail((function(){r.alert(e("Debugger Error"),e("Error while selecting frame."))}))}});var v=s.View.extend({el:".debugger_main_container",initialize:function(){_.on("pgDebugger:button:state:stop",this.enable_stop,this),_.on("pgDebugger:button:state:step_over",this.enable_step_over,this),_.on("pgDebugger:button:state:step_into",this.enable_step_into,this),_.on("pgDebugger:button:state:continue",this.enable_continue,this),_.on("pgDebugger:button:state:toggle_breakpoint",this.enable_toggle_breakpoint,this),_.on("pgDebugger:button:state:clear_all_breakpoints",this.enable_clear_all_breakpoints,this)},events:{"click .btn-stop":"on_stop","click .btn-clear-breakpoint":"on_clear_all_breakpoint","click .btn-toggle-breakpoint":"on_toggle_breakpoint","click .btn-continue":"on_continue","click .btn-step-over":"on_step_over","click .btn-step-into":"on_step_into",keydown:"keyAction"},enable_stop:function(e){var t=this.$el.find(".btn-stop");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_over:function(e){var t=this.$el.find(".btn-step-over");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_step_into:function(e){var t=this.$el.find(".btn-step-into");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_continue:function(e){var t=this.$el.find(".btn-continue");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_toggle_breakpoint:function(e){var t=this.$el.find(".btn-toggle-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},enable_clear_all_breakpoints:function(e){var t=this.$el.find(".btn-clear-breakpoint");e?(t.prop("disabled",!1),t.removeAttr("disabled")):(t.prop("disabled",!0),t.attr("disabled","disabled"))},on_stop:function(){_.Stop(m.DirectDebug.trans_id)},on_clear_all_breakpoint:function(){_.clear_all_breakpoint(m.DirectDebug.trans_id)},on_toggle_breakpoint:function(){_.toggle_breakpoint(m.DirectDebug.trans_id)},on_continue:function(){_.Continue(m.DirectDebug.trans_id)},on_step_over:function(){_.Step_over(m.DirectDebug.trans_id)},on_step_into:function(){_.Step_into(m.DirectDebug.trans_id)},keyAction:function(e){var t;t=p.processEventDebugger(this.$el,e,this.preferences,m.DirectDebug.docker),a.isNull(t)||a.isUndefined(t)||""==t||setTimeout((function(){o.Events.trigger("pgadmin:debugger:".concat(t,":focus"))}),100)}}),y=function(){};return a.extend(y.prototype,{load:function(i,o,s,l){var d=this;if(a.bindAll(m.DirectDebug,"messages"),!this.initialized){var c;this.initialized=!0,this.trans_id=i,this.debug_type=o,this.first_time_indirect_debug=!1,this.direct_execution_completed=!1,this.polling_timeout_idle=!1,this.debug_restarted=!1,this.is_user_aborted_debugging=!1,this.is_polling_required=!0,this.function_name_with_arguments=s,this.layout=l;var u=g.default.pgAdmin.Browser;this.preferences=u.get_preferences_for_module("debugger"),this.docker=new h("#container",{allowContextMenu:!1,allowCollapse:!1,loadingClass:"pg-sp-icon",themePath:t("static",{filename:"css"}),theme:"webcabin.overrides.css"}),this.panels=[],null==i||o?null!=i?(c=t("debugger.start_listener",{trans_id:i}),n.ajax({url:c,method:"GET"}).done((function(e){e.data.status&&d.messages(i)})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&r.alert(e("Debugger Error"),n.errormsg)}catch(t){r.alert(e("Debugger Error"),e("Error while starting debugging listener."))}}))):this.intializePanels():(c=t("debugger.start_listener",{trans_id:i}),n.ajax({url:c,method:"GET"}).done((function(e){e.data.status&&(d.intializePanels(),_.enable_toolbar_buttons(),_.poll_result(i))})).fail((function(t){try{var n=JSON.parse(t.responseText);0==n.success&&r.alert(e("Debugger Error"),n.errormsg)}catch(t){r.alert(e("Debugger Error"),e("Error while starting debugging listener."))}})))}},messages:function(a){var i=this,o=t("debugger.messages",{trans_id:a});n.ajax({url:o,method:"GET"}).done((function(t){"Success"===t.data.status?(i.intializePanels(),_.enable_toolbar_buttons(),_.start_execution(a,t.data.result)):"Busy"===t.data.status?i.messages(a):"NotConnected"===t.data.status&&r.alert(e("Not connected to server or connection with the server has been closed."),t.data.result)})).fail((function(){r.alert(e("Debugger Error"),e("Error while fetching messages information."))}))},onBreakPoint:function(e,t,n){var a,r=this;if("breakpoints"==n&&!m.DirectDebug.polling_timeout_idle){var i=e.lineInfo(t);null==i.gutterMarkers||null==i.gutterMarkers.breakpoints?_.set_breakpoint(r.trans_id,t+1,1):_.set_breakpoint(r.trans_id,t+1,0);var o=i.gutterMarkers;null!=o&&null==i.gutterMarkers.breakpoints&&(o=i.gutterMarkers.breakpoints),e.setGutterMarker(t,"breakpoints",o?null:((a=document.createElement("div")).style.color="#822",a.innerHTML="●",a))}},buildDefaultLayout:function(e){var t=e.addPanel("code",h.DOCK.TOP),n=e.addPanel("parameters",h.DOCK.BOTTOM,t);e.addPanel("local_variables",h.DOCK.STACKED,n,{tabOrientation:h.TAB.TOP}),e.addPanel("messages",h.DOCK.STACKED,n),e.addPanel("results",h.DOCK.STACKED,n),e.addPanel("stack_pane",h.DOCK.STACKED,n)},intializePanels:function(){var t=this;this.registerPanel("code",t.function_name_with_arguments,"100%","50%",(function(){var n=new i.Browser.Panel({name:"parameters",title:e("Parameters"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="parameters" class="parameters" tabindex="0"></div>'}),a=new i.Browser.Panel({name:"local_variables",title:e("Local variables"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id ="local_variables" class="local_variables" tabindex="0"></div>'}),r=new i.Browser.Panel({name:"messages",title:e("Messages"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div role="status" id="messages" class="messages" tabindex="0"></div>'}),o=new i.Browser.Panel({name:"results",title:e("Results"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="debug_results" class="debug_results" tabindex="0"></div>'}),s=new i.Browser.Panel({name:"stack_pane",title:e("Stack"),width:"100%",height:"100%",isCloseable:!1,isPrivate:!0,content:'<div id="stack_pane" class="stack_pane" tabindex="0"></div>'});n.load(t.docker),a.load(t.docker),r.load(t.docker),o.load(t.docker),s.load(t.docker)})),o.restore_layout(t.docker,t.layout,this.buildDefaultLayout.bind(this)),t.docker.on(h.EVENT.LAYOUT_CHANGED,(function(){o.save_current_layout("Debugger/Layout",t.docker)})),t.code_editor_panel=t.docker.findPanels("code")[0],t.parameters_panel=t.docker.findPanels("parameters")[0],t.local_variables_panel=t.docker.findPanels("local_variables")[0],t.messages_panel=t.docker.findPanels("messages")[0],t.results_panel=t.docker.findPanels("results")[0],t.stack_pane_panel=t.docker.findPanels("stack_pane")[0];var a=n('<div id="stack_editor_pane" class="pg-panel-content info"></div>'),s=n('<textarea aria-label="Code editor area" id="debugger-editor-textarea"></textarea>').appendTo(a);t.code_editor_panel.layout().addItem(a),t.editor=b.fromTextArea(s.get(0),{tabindex:-1,lineNumbers:!0,foldOptions:{widget:"…"},foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter","breakpoints"],mode:"text/x-pgsql",readOnly:!0,extraKeys:i.Browser.editor_shortcut_keys,indentWithTabs:i.Browser.editor_options.indent_with_tabs,indentUnit:i.Browser.editor_options.tabSize,tabSize:i.Browser.editor_options.tabSize,lineWrapping:i.Browser.editor_options.wrapCode,autoCloseBrackets:i.Browser.editor_options.insert_pair_brackets,matchBrackets:i.Browser.editor_options.brace_matching,screenReaderLabel:e("Debugger SQL editor")}),b.on(t.editor,"keydown",(function(e,t){27==t.keyCode&&document.activeElement.blur()})),o.Events.on("pgadmin:debugger:code:focus",(function(){t.editor.focus()}));t.docker.startLoading(e("Loading...")),t.docker.on(h.EVENT.LOADED,(function(){t.docker.finishLoading(100),t.docker.off(h.EVENT.LOADED),t.editor.on("gutterClick",t.onBreakPoint.bind(t),t),t.docker.$container&&t.docker.$container.parent().focus();var e=setInterval((function(){try{var n=g.default.pgAdmin.Browser;if(n.preference_version()>0){clearInterval(e),t.reflectPreferences();var a=n.get_preferences_for_module("browser").new_browser_tab_open;if(a&&a.includes("debugger")){o.bind_beforeunload();var r=setInterval((function(){g.default.pgAdmin?t.reflectPreferences():clearInterval(r)}),1e3)}}}catch(t){throw clearInterval(e),t}}),0)})),this.toolbarView=new v,n(window).on("keydown",(function(e){t.toolbarView.keyAction&&t.toolbarView.keyAction(e)})),g.default.pgAdmin.Browser.onPreferencesChange("debugger",(function(){t.reflectPreferences()})),o.register_to_activity_listener(document,(function(){r.alert(e("Timeout"),e("Your session has timed out due to inactivity. Please close the window and login again."))})),_.poll_result=o.override_activity_event_decorator(_.poll_result).bind(_),_.poll_end_execution_result=o.override_activity_event_decorator(_.poll_end_execution_result).bind(_)},reflectPreferences:function(){var t=this,n=g.default.pgAdmin.Browser;t.preferences=n.get_preferences_for_module("debugger"),t.toolbarView.preferences=t.preferences,t.toolbarView.$el.find("#btn-step-into").attr("title",p.shortcut_accesskey_title(e("Step into"),t.preferences.btn_step_into)).attr("aria-label",p.shortcut_accesskey_title(e("Step into"),t.preferences.btn_step_into)).attr("accesskey",p.shortcut_key(t.preferences.btn_step_into)),t.toolbarView.$el.find("#btn-step-over").attr("title",p.shortcut_accesskey_title(e("Step over"),t.preferences.btn_step_over)).attr("aria-label",p.shortcut_accesskey_title(e("Step over"),t.preferences.btn_step_over)).attr("accesskey",p.shortcut_key(t.preferences.btn_step_over)),t.toolbarView.$el.find("#btn-continue").attr("title",p.shortcut_accesskey_title(e("Continue/Start"),t.preferences.btn_start)).attr("aria-label",p.shortcut_accesskey_title(e("Continue/Start"),t.preferences.btn_start)).attr("accesskey",p.shortcut_key(t.preferences.btn_start)),t.toolbarView.$el.find("#btn-toggle-breakpoint").attr("title",p.shortcut_accesskey_title(e("Toggle breakpoint"),t.preferences.btn_toggle_breakpoint)).attr("aria-label",p.shortcut_accesskey_title(e("Toggle breakpoint"),t.preferences.btn_toggle_breakpoint)).attr("accesskey",p.shortcut_key(t.preferences.btn_toggle_breakpoint)),t.toolbarView.$el.find("#btn-clear-breakpoint").attr("title",p.shortcut_accesskey_title(e("Clear all breakpoints"),t.preferences.btn_clear_breakpoints)).attr("aria-label",p.shortcut_accesskey_title(e("Clear all breakpoints"),t.preferences.btn_clear_breakpoints)).attr("accesskey",p.shortcut_key(t.preferences.btn_clear_breakpoints)),t.toolbarView.$el.find("#btn-stop").attr("title",p.shortcut_accesskey_title(e("Stop"),t.preferences.btn_stop)).attr("aria-label",p.shortcut_accesskey_title(e("Stop"),t.preferences.btn_stop)).attr("accesskey",p.shortcut_key(t.preferences.btn_stop))},registerPanel:function(e,t,a,r,i){var o=this;this.docker.registerPanelType(e,{title:t,isPrivate:!0,onCreate:function(s){o.panels[e]=s,s.initSize(a,r),t?s.title(t):s.title(!1),s.closeable(!1),s.layout().addItem(n('<div tabindex="0">',{class:"pg-debugger-panel"})),i&&i.apply(o,[s])}})}}),m.DirectDebug=new y,m.DirectDebug.jquery=n,m.DirectDebug}.apply(t,a))||(e.exports=r)},95566:(e,t,n)=>{n(92222),n(26699),n(82772),n(79753),n(32023),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.setPanelTitle=c,t.initialize=function(e,t,n,a,d,u,p,f){return p.erd||(p.erd={init:function(){if(!this.initialized){this.initialized=!0,u.setPGCSRFToken(d.csrf_token_header,d.csrf_token);var t=[{name:"erd",module:this,applies:["tools"],callback:"showErdTool",priority:1,label:e("New ERD Project (Beta)"),enable:this.erdToolEnabled,data:{data_disabled:e("The selected tree node does not support this option.")}}];p.add_menus(t);var n=new p.Frame({name:"frm_erdtool",showTitle:!0,isCloseable:!0,isPrivate:!0,url:"about:blank"}),a=this,r=setInterval((function(){p.preference_version()>0&&(a.preferences=p.get_preferences_for_module("erd"),clearInterval(r))}),0);return p.onPreferencesChange("erd",(function(){a.preferences=p.get_preferences_for_module("erd")})),n.load(p.docker),this}},erdToolEnabled:function(e){return!(a.isUndefined(e)||a.isNull(e)||-1!=a.indexOf(d.unsupported_nodes,e._type)||("database"!=e._type||!e.allowConn)&&"database"==e._type)},showErdTool:function(t,d){var u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],g=p.treeMenu.findNodeByDomElement(d);if(void 0!==g&&g.getData()){var b=i.getTreeNodeHierarchyFromIdentifier.call(p,d);if(a.isUndefined(b.database))r.default.alert(e("ERD Error"),e("Please select a database/database object."));else{var h=(0,s.getRandomInt)(1,9999999),m=(0,o.getPanelTitle)(p,d),_=this.getPanelUrls(h,m,b,u),v=l(_,2),y=v[0],w=v[1],x='\n        <form id="erdToolForm" action="'.concat(y,'" method="post">\n          <input id="title" name="title" hidden />\n          <input name="close_url" value="').concat(w,'" hidden />\n        </form>\n        <script>\n          document.getElementById("title").value = "').concat(a.escape(m),'";\n          document.getElementById("erdToolForm").submit();\n        <\/script>\n      '),k=p.get_preferences_for_module("browser").new_browser_tab_open;if(k&&k.includes("erd_tool")){var C=window.open("","_blank");C.document.write(x),C.document.title=m}else{var S=p.docker.findPanels("properties"),D=p.docker.addPanel("frm_erdtool",f.DOCK.STACKED,S[0]);c(D,"Untitled"),D.icon("fa fa-sitemap"),D.focus(),D.on(f.EVENT.CLOSED,(function(){n.ajax({url:w,method:"DELETE"})}));var j=function(e){var t=n('<div class="pg-sp-container">\n                  <div class="pg-sp-content">\n                      <div class="row">\n                          <div class="col-12 pg-sp-icon"></div>\n                      </div>\n                  </div>\n              </div>').appendTo(n(e).data("embeddedFrame").$container),a=setInterval((function(){if(n(e).data("frameInitialized")){clearInterval(a);var r=n(e).data("embeddedFrame");r&&(r.onLoaded((function(){t.remove()})),r.openHTML(x))}}),100)};j(D)}}}else r.default.alert(e("ERD Error"),e("No object selected."))},getPanelUrls:function(e,n,a,r){var i=t("erd.panel",{trans_id:e});return[i+="?sgid=".concat(a.server_group._id)+"&sid=".concat(a.server._id)+"&server_type=".concat(a.server.server_type)+"&did=".concat(a.database._id)+"&gen=".concat(r),t("erd.close",{trans_id:e,sgid:a.server_group._id,sid:a.server._id,did:a.database._id})]}}),p.erd};var a,r=(a=n(55455))&&a.__esModule?a:{default:a},i=n(82794),o=n(9807),s=n(44092);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t){e.title('<span title="'+t+'">'+t+"</span>")}},10474:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=f(n(91669)),i=f(n(28008)),o=f(n(19755)),s=f(n(64492)),l=f(n(55112)),d=f(n(58894)),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(87789)),u=n(95566);function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function f(e){return e&&e.__esModule?e:{default:e}}var g=window.wcDocker,b=(0,u.initialize)(r.default,i.default,o.default,s.default,l.default,c,d.default,g);e.exports={pgBrowser:b}},49525:(e,t,n)=>{var a,r;n(92222),n(69826),n(82772),n(2707),n(40561),n(5735),n(24812),n(68309),n(74916),n(15306),n(83753),a=[n(91669),n(28008),n(19755),n(64492),n(72316),n(55455),n(71158),n(12030),n(58894),n(88941),n(45866),n(44092),n(16194),n(14753),n(63790),n(26953),n(34236)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c,u,p){if(l.GrantWizard)return l.GrantWizard;var f=d.Model.extend({defaults:{selected:!1,icon:"icon-unknown",name:void 0,name_with_args:void 0,nspname:void 0,proargs:void 0,object_type:void 0,object_id:void 0},idAttribute:"object_id",toJSON:function(){var e=d.Model.prototype.toJSON.apply(this);return delete e.icon,e},parse:function(e){return e.object_id=e.name_with_args,a.isUndefined(e.object_type)||"Function"!=e.object_type&&"Trigger Function"!=e.object_type&&"Procedure"!=e.object_type?e.name_with_args=e.name:e.name_with_args=e.name+"("+(void 0!==e.proargs?e.proargs:"")+")",e},validate:function(){var t,n={},r=this.get("objects").toJSON();return a.isEmpty(r)?(n.selected=e("Please select any database object."),t=n.selected,this.errorModel.set("selected",t),t):(this.errorModel.unset("selected"),null)}}),g=[{name:"selected",cell:o.Extension.SelectRowCell.extend({render:function(){var t=this.column.get("name"),n="row-".concat(a.uniqueId(t));return this.$el.empty().append('\n          <div class="custom-control custom-checkbox custom-checkbox-no-label">\n            <input tabindex="-1" type="checkbox" class="custom-control-input" id="'.concat(n,'" />\n            <label class="custom-control-label" for="').concat(n,'">\n              <span class="sr-only">')+e("Select All")+"<span>\n            </label>\n          </div>\n        "),this.delegateEvents(),this.model&&this.model.has(t)&&this.model.get(t)&&(this.$el.parent().toggleClass("selected",!0),this.model.trigger("backgrid:selected",this.model,!0)),this}}),headerCell:"select-all"},{name:"object_type",label:e("Object Type"),editable:!1,cell:o.Cell.extend({render:function(){return o.Cell.prototype.render.apply(this,arguments),this.$el.addClass(this.model.get("icon")).css({"padding-left":"24px"}),this}})},{name:"nspname",label:e("Schema"),cell:"string",editable:!1},{name:"name_with_args",label:e("Name"),cell:"string",editable:!1}];return l.GrantWizard={init:function(){if(!this.initialized){this.initialized=!0;for(var t=[{name:"grant_wizard_schema",module:this,applies:["tools"],callback:"start_grant_wizard",priority:14,label:e("Grant Wizard..."),icon:"fa fa-unlock",enable:p.enabled.bind(null,l.treeMenu,c.supportedNodes),data:{data_disabled:e("Please select any database, schema or schema objects from the browser tree to access Grant Wizard Tool.")}}],n=0;n<c.supportedNodes.length;n++)t.push({name:"grant_wizard_schema_context_"+c.supportedNodes[n],node:c.supportedNodes[n],module:this,applies:["context"],callback:"start_grant_wizard",priority:14,label:e("Grant Wizard..."),icon:"fa fa-unlock",enable:p.enabled.bind(null,l.treeMenu,c.supportedNodes)});return l.add_menus(t),this}},start_grant_wizard:function(){i.wizardDialog||i.dialog("wizardDialog",(function(){var c=n("<div class='wizard_dlg'></div>");return{main:function(e){this.set("title",e)},setup:function(){return{options:{frameless:!0,resizable:!0,autoReset:!1,maximizable:!1,closable:!1,closableByDimmer:!1,modal:!1,pinnable:!1}}},DbPaginator:function(e){return this.paginator=new o.Extension.Paginator({collection:e,windowSize:8})},DbObjectFilter:function(t){return this.clientSideFilter=new o.Extension.ClientSideFilter({collection:t,placeholder:e("Search by object type or name"),fields:["object_type","name"],wait:150})},updateButtons:function(e){e?n(".wizard-next").prop("disabled",!1):n(".wizard-next").prop("disabled",!0)},onSessionInvalid:function(e){return n(".pg-prop-status-bar .alert-text").html(e),n(".pg-prop-status-bar").css("visibility","visible"),this.updateButtons(!1),!0},onSessionValidated:function(e){n(".pg-prop-status-bar .alert-text").empty(),n(".pg-prop-status-bar").css("visibility","hidden"),this.updateButtons(e)},releaseObjects:function(){var e=this;a.isUndefined(e.dbObjectFilter)||(e.dbObjectFilter.remove(),e.dbObjectFilter=void 0),a.isUndefined(e.clientSideFilter)||(e.clientSideFilter.remove(),e.clientSideFilter=void 0),a.isNull(e.obj_priv)||a.isUndefined(e.obj_priv)||(e.obj_priv=[],delete e.obj_priv),a.isUndefined(e.dbObjectTypePage)||a.isNull(e.dbObjectTypePage)||a.isUndefined(e.dbObjectTypePage.get("model"))||a.isNull(e.dbObjectTypePage.get("model"))||(e.dbObjectTypePage.get("model").clear(),e.dbObjectTypePage.get("view").cleanup(),e.dbObjectTypePage=void 0),a.isUndefined(e.privilegePage)||a.isNull(e.privilegePage)||a.isUndefined(e.privilegePage.get("model"))||a.isNull(e.privilegePage.get("model"))||(e.privilegePage.get("model").clear(),e.privilegePage.get("view").cleanup(),e.privilegePage=void 0),a.isUndefined(e.reviewSQLPage)||a.isNull(e.reviewSQLPage)||a.isUndefined(e.reviewSQLPage.get("model"))||a.isNull(e.reviewSQLPage.get("model"))||(e.reviewSQLPage.get("model").clear(),e.reviewSQLPage=void 0),a.isUndefined(e.sqlControl)||e.sqlControl.remove(),a.isNull(e.privModel)||a.isUndefined(e.privModel)||e.privModel.clear(),a.isNull(e.coll)||a.isUndefined(e.coll)||(e.coll.reset(),e.coll=void 0),a.isNull(e.wizard)||a.isUndefined(e.wizard)||(e.wizard.collection.reset(),e.wizard.curr_page=void 0)},build:function(){this.elements.content.appendChild(c.get(0)),i.pgDialogBuild.apply(this)},get_json_data:function(e,a,r){return n.ajax({async:!1,url:t("grant_wizard.acl",{sid:encodeURI(a),did:encodeURI(r)}),dataType:"json"})},prepare:function(){c.empty().append("<div class='grant_wizard_container'></div>");var u=n(".grant_wizard_container"),p=l.tree,b=p.selected(),h=this.d=b&&1==b.length?p.itemData(b):void 0,m=this.info=l.Node.getTreeNodeHierarchy(b);if(!a.isUndefined(h)){var _=m.server_group._id,v=m.server._id,y=m.database._id,w=h._id,x=h._type.replace("coll-","").replace("materialized_",""),k=this.get_json_data(_,v,y),C=JSON.parse(k.responseText),S=t("grant_wizard.objects",{sid:encodeURI(v),did:encodeURI(y),node_id:encodeURI(w),node_type:encodeURI(x)}),D=t("grant_wizard.apply",{sid:encodeURI(v),did:encodeURI(y)}),j=r.Collection.extend({model:f,url:S}),N=this.coll=new j,T=this;this.msql_url=t("grant_wizard.modified_sql",{sid:encodeURI(v),did:encodeURI(y)}),N.comparator=function(e){return e.get("object_type")},N.sort(),this.dbObjectFilter=this.DbObjectFilter(N),N.fullCollection=this.dbObjectFilter.shadowCollection,T.privArray=[],N.on("backgrid:selected",(function(e,t){e.set("selected",t);var n=e.get("object_type");switch(n){case"Function":case"Trigger Function":n="function";break;case"Procedure":n="procedure";break;case"Table":n="table";break;case"Sequence":n="sequence";break;case"View":case"Materialized View":n="table";break;case"Foreign Table":n="foreign_table"}if(t)-1==a.indexOf(T.privArray,n)&&T.privArray.push(n),E.get("objects").add(e,{silent:!0});else{var r=T.privArray.indexOf(n);-1!=r&&T.privArray.splice(r,1),E.get("objects").remove(e)}var i=e.validate.call(E);i?T.onSessionInvalid.call(T,i):T.onSessionValidated.call(T,!0)}));var E=new(d.Model.extend({defaults:{objects:void 0,acl:void 0},schema:[{id:"objects",label:e("Objects"),model:f,type:"collection",group:e("Objects")},{id:"acl",label:e("Privileges"),model:l.Node.PrivilegeRoleModel,type:"collection",canAdd:!0,canDelete:!0,control:"unique-col-collection"}],urlRoot:D}))({},{node_info:m});n(".wizard-progress-bar p").show();!function t(){n(".wizard-progress-bar p").removeClass("alert-danger").addClass("alert-info"),n(".wizard-progress-bar p").text(e("Please wait while fetching records...")),N.fetch({success:function(e,t){n(".wizard-progress-bar p").html(""),n(".wizard-progress-bar").hide(),e.set(t.result,{parse:!0}),t&&t.info&&""!==t.info&&(n(".pg-prop-status-bar .alert-text").html(t.info),n(".pg-prop-status-bar").css("visibility","visible"))},error:function(a,r,o){n(".wizard-progress-bar p").removeClass("alert-info").addClass("alert-danger"),n(".wizard-progress-bar p").text(e("Unable to fetch the database objects")),i.pgNotifier(o.textStatus,r,e("Unable to fetch the database objects"),(function(e){"CRYPTKEY_SET"===e?t():(n(".wizard-progress-bar p").removeClass("alert-info").addClass("alert-danger"),n(".wizard-progress-bar p").text(e))}))},reset:!0},this)}();var P=T.dbObjectTypePage=new l.WizardPage({id:1,page_title:e("Object Selection (step 1 of 3)"),disable_prev:!0,disable_next:!0,show_description:"",show_progress_bar:e("Please wait while fetching records..."),model:E,view:new function(){a.extend(this,{cleanup:function(){this.grid&&(this.grid.remove(),delete this.grid,this.grid=null),this.el&&(n(this.el).remove(),delete this.el)},grid:null,render:function(){var t=n('\n                        <div class="db_objects_container pg-el-xs-12">\n                          <div class="db_objects_header d-flex py-1">\n                            <div>'+e("Please select the objects to grant privileges to from the list below.")+'</div>\n                            <div class="db_objects_filter ml-auto">\n                              <div class="input-group">\n                                <div class="input-group-prepend">\n                                  <span class="input-group-text fa fa-search" id="labelSearch"></span>\n                                </div>\n                                <input type="search" class="form-control" id="txtGridSearch" placeholder="'+e("Search")+'" aria-label="'+e("Search")+'" aria-describedby="labelSearch">\n                              </div>\n                            </div>\n                          </div>\n                          <div class="db_objects_grid"></div>\n                        </div>');return this.grid&&this.cleanup(),this.grid=new o.Grid({columns:a.clone(g),collection:N,className:"backgrid presentation table table-bordered table-hover object_type_table"}),t.find(".db_objects_grid").append(this.grid.render().$el),T.clientSideFilter.setCustomSearchBox(t.find("#txtGridSearch")),this.el=t,E.get("objects").each((function(e){var t=N.get(e.get("object_id"));t&&N.trigger("backgrid:selected",t,!0)})),N.trigger("backgrid:refresh"),this}})},beforeNext:function(e){var t=this;return e.options.disable_next=!0,a.isNull(E.get("acl"))||a.isUndefined(E.get("acl"))||E.get("acl").length>0&&e.collection.at(1).set("disable_next",!1),t.view&&(t.view.cleanup(),delete t.view,t.view=null),!0}}),O=T.privilegePage=new l.WizardPage({id:2,page_title:e("Privilege Selection (step 2 of 3)"),show_description:e("Please add the required privileges for the selected objects."),disable_next:!0,model:E,view:new function(){a.extend(this,{render:function(){var t=[];T.privArray=a.uniq(T.privArray),a.each(T.privArray,(function(e){T.obj_priv=t=a.union(t,C[e].acl)}));var n=d.Model.extend({defaults:{acl:void 0},schema:[{id:"acl",label:e("Privileges"),model:l.Node.PrivilegeRoleModel.extend({privileges:t}),uniqueCol:["grantee","grantor"],editable:!0,type:"collection",canAdd:!0,canDelete:!0,control:"unique-col-collection"}]}),r={};if(T.privModel){var i=(r=T.privModel.toJSON()).acl;if(!a.isUndefined(i)&&i.length>0)for(var o in i){var c,u=i[o].privileges,p=[];for(c in u){var f=u[c];-1==a.indexOf(t,f.privilege_type)&&p.push(c)}for(c in p)u.splice(c,1)}else console.warn("Acls are not defined")}T.privModel=new n(r,{node_info:T.info}),T.privModel.startNewSession(),T.privModel.on("pgadmin-session:valid",T.onSessionValidated.bind(T)),T.privModel.on("pgadmin-session:invalid",T.onSessionInvalid.bind(T));var g=s.generateViewSchema(T.info,T.privModel,"create",T.d._type,T.d),b=new s.Field(g[0].fields[0]);return this.privControl=new(b.get("control"))({field:b,model:T.privModel}),{el:this.privControl.render().$el}},cleanup:function(){this.privControl&&(this.privControl.remove(),delete this.privControl,this.privControl=null)}})},beforePrev:function(e){this.view&&(this.view.cleanup(),delete this.view,this.view=null);var t=E.get("objects");return!a.isUndefined(t)&&!a.isEmpty(t)&&t.length>0&&(e.collection.at(0).set("disable_next",!1),e.collection.at(0).set("show_progress_bar","")),E.trigger("backgrid:refresh",E,!1),T.clientSideFilter.render(),!0},beforeNext:function(){return!0},onNext:function(){a.isUndefined(T.privModel)||E.set({acl:T.privModel.get("acl")}),this.view&&(this.view.cleanup(),delete this.view,this.view=null),T.wizard.options.disable_finish=!1,E.trigger("pgadmin-wizard:nextpage:sql",{node_type:x})}}),M=new s.Field({id:"sqltab",label:e("Sql Tab"),control:s.SqlTabControl.extend({initialize:function(){s.SqlTabControl.prototype.initialize.apply(this,arguments),this.msql_url=T.msql_url,this.model.on("pgadmin-wizard:nextpage:sql",this.onWizardNextPageChange,this),this.model.on("pgadmin-wizard:prevpage:sql",this.onWizardPrevPageChange,this)},onWizardNextPageChange:function(){var e=this;n.ajax({url:this.msql_url,type:"POST",cache:!1,data:JSON.stringify(e.model.toJSON(!0)),dataType:"json",contentType:"application/json"}).done((function(t){e.sqlCtrl.clearHistory(),e.sqlCtrl.setValue(t.data),e.sqlCtrl.refresh()})).fail((function(){e.model.trigger("pgadmin-view:msql:error")})).always((function(){e.model.trigger("pgadmin-view:msql:fetched")}))},remove:function(){T.sqlControl.unbind();var e=T.sqlControl.sqlCtrl.getWrapperElement();n(e).remove(),T.sqlControl.sqlCtrl=void 0}})}),A=T.sqlControl=new(M.get("control"))({field:M,model:E}),B=T.reviewSQLPage=new l.WizardPage({id:3,page_title:e("Final (Review Selection) (step 3 of 3)"),show_description:e("The SQL below will be executed on the database server to grant the selected privileges. Please click on <strong>Finish</strong> to complete the process."),model:E,view:new function(){var e=A.render().$el;e.addClass("h-100"),this.render=function(){return{el:e}}},beforePrev:function(e){var t=E.get("acl");if(!a.isUndefined(e.collection)&&e.collection.models.length>0)return!a.isUndefined(t)&&!a.isEmpty(t)&&t.length>0?e.collection.at(1).set("disable_next",!1):e.collection.at(1).set("disable_next",!0),!0}}),R=r.Collection.extend({model:l.WizardPage});this.wizardCollection=new R([P,O,B]),T.wizard=new(l.Wizard.extend({options:{title:e("Grant Wizard"),width:"",height:"",curr_page:0,show_left_panel:!1,show_header_cancel_btn:!0,show_header_maximize_btn:!0,disable_finish:!0,dialog_api:this,wizard_help:t("help.static",{filename:"grant_wizard.html"})},onFinish:function(){var t=E,n=t.toJSON("GET");!n||a.isEmpty(n)||a.isUndefined(n.objects)||t.save({},{attrs:n,validate:!1,cache:!1,success:function(){T.releaseObjects(),T.close()},error:function(t,n){i.pgNotifier("error",n,e("Error saving properties")),T.releaseObjects(),T.close()}})},onCancel:function(){T.releaseObjects(),T.close()}}))({collection:this.wizardCollection,el:u,model:E}),T.wizard.render()}}}})),i.wizardDialog(!0).resizeTo(l.stdW.lg,l.stdH.lg)}},l.GrantWizard}.apply(t,a))||(e.exports=r)},45866:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.supportedNodes=void 0;t.supportedNodes=["schema","coll-function","coll-sequence","coll-table","coll-view","coll-procedure","coll-mview","database","coll-trigger_function"]},87113:(e,t,n)=>{var a,r;n(69826),n(5735),n(24812),n(68309),n(32564),n(83753),a=[n(91669),n(28008),n(19755),n(64492),n(55455),n(55112),n(58894),n(72316),n(83879),n(95283),n(44092),n(16194),n(12030),n(71158),n(81989)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c,u){var p=(i=i||window.pgAdmin||{}).Tools=i.Tools||{};if(i.Tools.import_utility)return i.Tools.import_utility;var f=s.Model.extend({defaults:{is_import:!1,filename:void 0,format:"csv",encoding:void 0,oid:void 0,header:void 0,delimiter:"",quote:'"',escape:"'",null_string:void 0,columns:null,icolumns:[],database:void 0,schema:void 0,table:void 0},schema:[{id:"is_import",label:e("Import/Export"),cell:"switch",type:"switch",group:e("Options"),options:{onText:e("Import"),offText:e("Export"),width:"65"}},{type:"nested",control:"fieldset",label:e("File Info"),group:e("Options"),schema:[{id:"filename",label:e("Filename"),deps:["is_import"],type:"text",control:d.FileControl,group:e("File Info"),dialog_type:"select_file",supp_types:["csv","txt","*"],visible:"importing"},{id:"filename",label:e("Filename"),deps:["is_import"],type:"text",control:d.FileControl,group:e("File Info"),dialog_type:"create_file",supp_types:["csv","txt","*"],visible:"exporting"},{id:"format",label:e("Format"),cell:"string",control:"select2",group:e("File Info"),options:[{label:"binary",value:"binary"},{label:"csv",value:"csv"},{label:"text",value:"text"}],disabled:"isDisabled",select2:{allowClear:!1,width:"100%"}},{id:"encoding",label:e("Encoding"),cell:"string",control:"node-ajax-options",node:"database",url:"get_encodings",first_empty:!0,group:e("File Info")}]},{id:"columns",label:e("Columns to import"),cell:"string",deps:["is_import"],type:"array",first_empty:!1,control:d.NodeListByNameControl.extend({initialize:function(){d.NodeListByNameControl.prototype.initialize.apply(this,arguments);var e=this,t=e.field.get("options"),n=[];if(a.isFunction(t))try{var r=t.apply(e);for(var i in r)n.push(r[i].value)}catch(e){console.warn(e.stack||e)}else for(i in t)n.push(t[i].value);e.model.set("columns",n)}}),transform:function(e){var t=this,n=t.field.get("schema_node"),r=[];return a.each(e,(function(e){if("_id"in e&&e._id>0){var i=a.isFunction(n.node_label)?n.node_label.apply(n,[e,t.model,t]):e.label,o=a.isFunction(n.node_image)?n.node_image.apply(n,[e,t.model,t]):n.node_image||"icon-"+n.type;r.push({value:e.label,image:o,label:i})}})),r},node:"column",url:"nodes",group:e("Columns"),select2:{multiple:!0,allowClear:!1,placeholder:e("Columns for importing..."),first_empty:!1,preserveSelectionOrder:!0},visible:"importing",helpMessage:e("An optional list of columns to be copied. If no column list is specified, all columns of the table will be copied.")},{id:"columns",label:e("Columns to export"),cell:"string",deps:["is_import"],type:"array",control:"node-list-by-name",first_empty:!1,node:"column",url:"nodes",group:e("Columns"),select2:{multiple:!0,allowClear:!0,first_empty:!1,placeholder:e("Columns for exporting..."),preserveSelectionOrder:!0},visible:"exporting",transform:function(e){var t=this,n=t.field.get("schema_node"),r=[];return a.each(e,(function(e){var i=a.isFunction(n.node_label)?n.node_label.apply(n,[e,t.model,t]):e.label,o=a.isFunction(n.node_image)?n.node_image.apply(n,[e,t.model,t]):n.node_image||"icon-"+n.type;r.push({value:e.label,image:o,label:i})})),r},helpMessage:e("An optional list of columns to be copied. If no column list is specified, all columns of the table will be copied.")},{id:"null_string",label:e("NULL Strings"),cell:"string",type:"text",group:e("Columns"),disabled:"isDisabled",deps:["format"],helpMessage:e("Specifies the string that represents a null value. The default is \\N (backslash-N) in text format, and an unquoted empty string in CSV format. You might prefer an empty string even in text format for cases where you don't want to distinguish nulls from empty strings. This option is not allowed when using binary format.")},{id:"icolumns",label:e("Not null columns"),cell:"string",control:"node-list-by-name",node:"column",group:e("Columns"),deps:["format","is_import"],disabled:"isDisabled",type:"array",first_empty:!1,select2:{multiple:!0,allowClear:!0,first_empty:!1,placeholder:e("Not null columns...")},helpMessage:e("Do not match the specified column values against the null string. In the default case where the null string is empty, this means that empty values will be read as zero-length strings rather than nulls, even when they are not quoted. This option is allowed only in import, and only when using CSV format.")},{type:"nested",control:"fieldset",label:e("Miscellaneous"),group:e("Options"),schema:[{id:"oid",label:e("OID"),cell:"string",type:"switch",group:e("Miscellaneous")},{id:"header",label:e("Header"),cell:"string",type:"switch",group:e("Miscellaneous"),deps:["format"],disabled:"isDisabled"},{id:"delimiter",label:e("Delimiter"),cell:"string",first_empty:!0,type:"text",control:"node-ajax-options",group:e("Miscellaneous"),disabled:"isDisabled",deps:["format"],options:[{label:";",value:";"},{label:",",value:","},{label:"|",value:"|"},{label:"[tab]",value:"[tab]"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:e("Select from list...")},helpMessage:e("Specifies the character that separates columns within each row (line) of the file. The default is a tab character in text format, a comma in CSV format. This must be a single one-byte character. This option is not allowed when using binary format.")},{id:"quote",label:e("Quote"),cell:"string",first_empty:!0,deps:["format"],type:"text",control:"node-ajax-options",group:e("Miscellaneous"),disabled:"isDisabled",options:[{label:'"',value:'"'},{label:"'",value:"'"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:e("Select from list...")},helpMessage:e("Specifies the quoting character to be used when a data value is quoted. The default is double-quote. This must be a single one-byte character. This option is allowed only when using CSV format.")},{id:"escape",label:e("Escape"),cell:"string",first_empty:!0,deps:["format"],type:"text",control:"node-ajax-options",group:e("Miscellaneous"),disabled:"isDisabled",options:[{label:'"',value:'"'},{label:"'",value:"'"}],select2:{tags:!0,allowClear:!1,width:"100%",placeholder:e("Select from list...")},helpMessage:e("Specifies the character that should appear before a data character that matches the QUOTE value. The default is the same as the QUOTE value (so that the quoting character is doubled if it appears in the data). This must be a single one-byte character. This option is allowed only when using CSV format.")}]}],isDisabled:function(e){switch(this.name){case"quote":case"escape":case"header":return"csv"!=e.get("format");case"icolumns":return"csv"!=e.get("format")||!e.get("is_import");case"null_string":case"delimiter":return"binary"==e.get("format");default:return!1}},importing:function(e){return e.get("is_import")},exporting:function(e){return!e.importing.apply(this,arguments)}});return p.import_utility={init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"import",node:"table",module:this,applies:["tools","context"],callback:"callback_import_export",category:"import",priority:10,label:e("Import/Export..."),icon:"fa fa-shopping-cart",enable:u.enabled.bind(null,o.treeMenu,["table"]),data:{data_disabled:e("Please select any table from the browser tree to Import/Export data.")}}]))},callback_import_export:function(s,l){for(var u=l||o.tree.selected(),p=null;u;){var g=o.tree.itemData(u);if("server"==g._type){p=g;break}if(!o.tree.hasParent(u)){r.alert(e("Please select server or child node from tree."));break}u=n(o.tree.parent(u))}if(p){var b="paths",h="pg_bin_dir",m=e("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(p.type&&"ppas"==p.type||"ppas"==p.server_type)&&(h="ppas_bin_dir",m=e("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var _=o.get_preference(b,h);if(_)if(_.value){var v=o.tree,y=(u=l||v.selected())&&1==u.length?v.itemData(u):void 0,w=y&&o.Nodes[y._type];if(y){var x=w.getTreeNodeHierarchy.apply(w,[u]);r.ImportDialog||r.dialog("ImportDialog",(function(){return{main:function(e,t,n,a){this.set("title",e),this.setting("pg_node",t),this.setting("pg_item",n),this.setting("pg_item_data",a)},build:function(){r.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:e("Cancel"),key:27,"data-btn-name":"cancel",className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:e("OK"),key:13,disable:!0,"data-btn-name":"ok",className:"btn btn-primary fa fa-lg fa-check pg-alertify-button"}],options:{modal:!0,padding:!1,overflow:!1}}},settings:{pg_node:null,pg_item:null,pg_item_data:null},callback:function(a){if("ok"===a.button["data-btn-name"]){var i=this.settings.pg_node,s=this.settings.pg_item,l=i.getTreeNodeHierarchy.apply(i,[s]);this.view.model.set({database:l.database._label,schema:l.schema._label,table:l.table._label});var d=this;n.ajax({url:t("import_export.create_job",{sid:l.server._id}),method:"POST",data:{data:JSON.stringify(this.view.model.toJSON())}}).done((function(t){t.success?(r.success(e("Import/Export job created."),5),o.Events.trigger("pgadmin-bgprocess:created",d)):r.alert(e("Import/Export job creation failed."),t.errormsg)})).fail((function(t){try{var n=JSON.parse(t.responseText);r.alert(e("Import/Export job failed."),n.errormsg)}catch(e){console.warn(e.stack||e)}}))}},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})},onupdate:function(e,t,n){"resizable"===e&&(n?this.elements.content.removeAttribute("style"):this.elements.content.style.minHeight="inherit")},onshow:function(){var e=n(this.elements.body).find(".tab-content:first > .tab-pane.active:first");n(".select2-search__field").attr("aria-label","select2"),c.findAndSetFocus(e)}},prepare:function(){var t=this;this.__internal.buttons[1].element.disabled=!0;var r=n("<div class='import_dlg'></div>"),i=this.settings.pg_node,s=this.settings.pg_item,l=i.getTreeNodeHierarchy.apply(i,[s]),c=new f({},{node_info:l}),u=d.generateViewSchema(l,c,"create",w,l.server,!0),p=this.view=new d.Dialog({el:r,model:c,schema:u});n(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),p.render();var g=n('<div class=\'pg-prop-status-bar pg-prop-status-bar-absolute pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>        <div class="ml-auto close-error-bar">           <a aria-label="'+e("Close error bar")+'" class="close-error fa fa-times text-danger"></a>         </div>     </div>   </div> </div>').appendTo(r);this.elements.content.appendChild(r.get(0)),this.view.model.on("change",(function(){var n=this,r=function(e,a){n.errorModel.set(e,a),g.removeClass("d-none"),g.find(".alert-text").html(a),t.elements.dialog.querySelector(".close-error").addEventListener("click",(function(){g.addClass("d-none"),n.errorModel.set(e,a)}))};a.isUndefined(this.get("filename"))||""===this.get("filename")?(t.__internal.buttons[1].element.disabled=!0,r("filename",e("Please provide filename"))):(this.errorModel.clear(),g.addClass("d-none"),a.isUndefined(this.get("delimiter"))||a.isNull(this.get("delimiter"))?(t.__internal.buttons[1].element.disabled=!0,r("delimiter",e("Delimiter should contain only one character"))):(this.errorModel.clear(),g.addClass("d-none"),a.isUndefined(this.get("quote"))||""===this.get("quote")||1!=this.get("quote").length?(t.__internal.buttons[1].element.disabled=!0,r("quote",e("Quote should contain only one character"))):(this.errorModel.clear(),g.addClass("d-none"),a.isUndefined(this.get("escape"))||""===this.get("escape")||1!=this.get("escape").length?(t.__internal.buttons[1].element.disabled=!0,r("escape",e("Escape should contain only one character"))):(this.errorModel.clear(),g.addClass("d-none"),t.__internal.buttons[1].element.disabled=!1))))})),p.$el.attr("tabindex",-1),setTimeout((function(){o.keyboardNavigation.getDialogTabNavigator(n(t.elements.dialog))}),200)}}}));var k=t("import_export.utility_exists",{sid:p._id});n.ajax({url:k,type:"GET"}).done((function(t){t.success?r.ImportDialog(e("Import/Export data - table '%s'",x.table.label),w,u,y).set("resizable",!0).resizeTo(i.Browser.stdW.md,i.Browser.stdH.lg):r.alert(e("Utility not found"),t.errormsg)})).fail((function(){r.alert(e("Utility not found"),e("Failed to fetch Utility information"))}))}}else r.alert(e("Configuration required"),m);else r.alert(e("Failed to load preference %s of module %s",h,b))}}},i.Tools.import_utility}.apply(t,a))||(e.exports=r)},86695:(e,t,n)=>{var a,r;n(69826),n(82772),n(5735),n(24812),n(68309),n(32564),n(83753),a=[n(91669),n(28008),n(19755),n(64492),n(55455),n(55112),n(58894),n(72316),n(83879),n(95283),n(44092),n(88801),n(16194),n(12030),n(71158),n(81989)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c,u,p){var f=(i=i||window.pgAdmin||{}).Tools=i.Tools||{};if(i.Tools.maintenance)return i.Tools.maintenance;var g=s.Model.extend({defaults:{op:"VACUUM",vacuum_full:!1,vacuum_freeze:!1,vacuum_analyze:!1,verbose:!0},initialize:function(){var e=arguments[1].node_info;("primary_key"in e||"unique_constraint"in e||"index"in e)&&(this.set("op","REINDEX"),this.set("verbose",!1))},schema:[{id:"op",label:e("Maintenance operation"),cell:"string",type:"radioModern",controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",group:e("Options"),value:"VACUUM",options:[{label:"VACUUM",value:"VACUUM"},{label:"ANALYZE",value:"ANALYZE"},{label:"REINDEX",value:"REINDEX"},{label:"CLUSTER",value:"CLUSTER"}]},{type:"nested",control:"fieldset",label:e("Vacuum"),group:e("Options"),contentClass:"row",schema:[{id:"vacuum_full",group:e("Vacuum"),disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:e("FULL"),deps:["op"]},{id:"vacuum_freeze",deps:["op"],disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:e("FREEZE"),group:e("Vacuum")},{id:"vacuum_analyze",deps:["op"],disabled:"isDisabled",type:"switch",extraToggleClasses:"pg-el-sm-4",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",label:e("ANALYZE"),group:e("Vacuum")}]},{id:"verbose",group:e("Options"),deps:["op"],type:"switch",label:e("Verbose Messages"),disabled:"isDisabled"}],isDisabled:function(e){var t=this.node_info;switch(this.name){case"vacuum_full":case"vacuum_freeze":case"vacuum_analyze":return"VACUUM"!=e.get("op");case"verbose":return("primary_key"in t||"unique_constraint"in t||"index"in t)&&"REINDEX"==e.get("op")?(setTimeout((function(){e.set("verbose",!1)}),10),!0):"REINDEX"==e.get("op");default:return!1}}});return f.maintenance={init:function(){if(!this.initialized){this.initialized=!0;for(var t=[{name:"maintenance",module:this,applies:["tools"],callback:"callback_maintenance",priority:10,label:e("Maintenance..."),icon:"fa fa-wrench",enable:p.enabled.bind(null,o.treeMenu,u.maintenanceSupportedNodes),data:{data_disabled:e("Please select any database from the browser tree to do Maintenance.")}}],n=0;n<u.maintenanceSupportedNodes.length;n++)t.push({name:"maintenance_context_"+u.maintenanceSupportedNodes[n],node:u.maintenanceSupportedNodes[n],module:this,applies:["context"],callback:"callback_maintenance",priority:10,label:e("Maintenance..."),icon:"fa fa-wrench",enable:p.enabled.bind(null,o.treeMenu,u.maintenanceSupportedNodes),data:{data_disabled:e("Please select any database from the browser tree to do Maintenance.")}});o.add_menus(t)}},callback_maintenance:function(a,s){for(var l=s||o.tree.selected(),u=null;l;){var p=o.tree.itemData(l);if("server"==p._type){u=p;break}if(!o.tree.hasParent(l)){r.alert(e("Please select server or child node from tree."));break}l=n(o.tree.parent(l))}if(u){var f="paths",b="pg_bin_dir",h=e("Please configure the PostgreSQL Binary Path in the Preferences dialog.");(u.type&&"ppas"==u.type||"ppas"==u.server_type)&&(b="ppas_bin_dir",h=e("Please configure the EDB Advanced Server Binary Path in the Preferences dialog."));var m=o.get_preference(f,b);if(m)if(m.value){var _=this,v=o.tree,y=(l=s||v.selected())&&1==l.length?v.itemData(l):void 0;if(y){var w=o.Nodes[y._type];if(w.getTreeNodeHierarchy.apply(w,[l]).database._label.indexOf("=")>=0)r.alert(e("Maintenance error"),e("Maintenance job creation failed. Databases with = symbols in the name cannot be maintained using this utility."));else{r.MaintenanceDialog||r.dialog("MaintenanceDialog",(function(){return{main:function(e){this.set("title",e)},setup:function(){return{buttons:[{text:"",className:"btn btn-primary-icon pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"maintenance.html",label:e("Maintenance"),"aria-label":e("Object Help")}},{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Maintenance"),"aria-label":e("Help"),url:t("help.static",{filename:"maintenance_dialog.html"})}},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button","data-btn-name":"cancel"},{text:e("OK"),key:13,className:"btn btn-primary fa fa-lg fa-check pg-alertify-button","data-btn-name":"ok"}],options:{modal:0,pinnable:!1,padding:!1,overflow:!1}}},callback:function(a){var i=o.tree.selected(),s=i&&1==i.length?o.tree.itemData(i):void 0,l=s&&o.Nodes[s._type];if("dialog_help"==a.button.element.name||"object_help"==a.button.element.name)return a.cancel=!0,void o.showHelp(a.button.element.name,a.button.element.getAttribute("url"),l,i);if("ok"===a.button["data-btn-name"]){var d=void 0,c=void 0,u=void 0,p=void 0,f=void 0;if(!s)return;var g=l.getTreeNodeHierarchy.apply(l,[i]);null!=g.schema&&(d=g.schema._label),null!=g.partition?c=g.partition._label:null!=g.table?c=g.table._label:null!=g.mview&&(c=g.mview._label),null!=g.primary_key?u=g.primary_key._label:null!=g.unique_constraint?p=g.unique_constraint._label:null!=g.index&&(f=g.index._label),this.view.model.set({database:g.database._label,schema:d,table:c,primary_key:u,unique_constraint:p,index:f}),n.ajax({url:t("maintenance.create_job",{sid:g.server._id,did:g.database._id}),method:"POST",data:{data:JSON.stringify(this.view.model.toJSON())}}).done((function(t){t.data&&t.data.status?(r.success(t.data.info),o.Events.trigger("pgadmin-bgprocess:created",_)):r.alert(e("Maintenance job creation failed."),t.errormsg)})).fail((function(){r.alert(e("Maintenance job creation failed."))}))}},build:function(){r.pgDialogBuild.apply(this)},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})},onshow:function(){var e=n(this.elements.body).find(".tab-content:first > .tab-pane.active:first");c.findAndSetFocus(e)}},prepare:function(){var e=n("<div class='maintenance_dlg'></div>"),t=o.tree,a=t.selected(),r=a&&1==a.length?t.itemData(a):void 0,i=r&&o.Nodes[r._type];if(r){var s=i.getTreeNodeHierarchy.apply(i,[a]),l=new g({},{node_info:s}),c=d.generateViewSchema(s,l,"create",i,s.server,!0),u=this.view=new d.Dialog({el:e,model:l,schema:c});if(n(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),u.render(),"primary_key"==r._type||"unique_constraint"==r._type||"index"==r._type){var p=e.find(".btn-group label.btn:lt(2)").addClass("disabled")[1].nextElementSibling;n(p).trigger("click")}u.$el.attr("tabindex",-1),this.elements.content.appendChild(e.get(0))}}}}));var x=t("maintenance.utility_exists",{sid:u._id});n.ajax({url:x,type:"GET"}).done((function(t){t.success?r.MaintenanceDialog(e("Maintenance...")).set("resizable",!0).resizeTo(i.Browser.stdW.md,i.Browser.stdH.md):r.alert(e("Utility not found"),t.errormsg)})).fail((function(){r.alert(e("Utility not found"),e("Failed to fetch Utility information"))}))}}}else r.alert(e("Configuration required"),h);else r.alert(e("Failed to load preference %s of module %s",b,f))}}},i.Tools.maintenance}.apply(t,a))||(e.exports=r)},88801:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.maintenanceSupportedNodes=void 0;t.maintenanceSupportedNodes=["database","table","primary_key","unique_constraint","index","partition"]},9342:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.restoreSupportedNodes=void 0;t.restoreSupportedNodes=["database","schema","table","function","trigger","index","partition"]},45736:(e,t,n)=>{var a,r;n(5735),n(24812),n(83753),a=[n(91669),n(28008),n(19755),n(64492),n(72316),n(55455),n(58894),n(71158),n(12030),n(44092),n(9342),n(16194),n(77544)],void 0===(r=function(e,t,n,a,r,i,o,s,l,d,c,u,p){if(o.Restore)return o.Restore;var f=r.Model.extend({idAttribute:"id",defaults:{custom:!1,file:void 0,role:void 0,format:"custom",verbose:!0,blobs:!0,encoding:void 0,database:void 0,schemas:void 0,tables:void 0,functions:void 0,triggers:void 0,trigger_funcs:void 0,indexes:void 0},initialize:function(e){var t=e.node_data.type;t&&("function"!==t&&"index"!==t&&"trigger"!==t||this.set({only_schema:!0},{silent:!0}),"table"===t&&this.set({only_data:!0},{silent:!0}),"function"!==t&&"trigger_function"!==t||this.set({clean:!0},{silent:!0})),r.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"format",label:e("Format"),type:"text",disabled:!1,control:"select2",select2:{allowClear:!1,width:"100%"},options:[{label:e("Custom or tar"),value:"custom"},{label:e("Directory"),value:"directory"}]},{id:"file",label:e("Filename"),type:"text",disabled:!1,control:l.FileControl.extend({render:function(){var e=this.model.toJSON();return"directory"==e.format?this.field.attributes.dialog_type="select_folder":this.field.attributes.dialog_type="select_file",l.InputControl.prototype.render.apply(this,arguments),this}}),dialog_type:"select_file",supp_types:["*","backup","sql","patch"],deps:["format"]},{id:"no_of_jobs",label:e("Number of jobs"),type:"int"},{id:"role",label:e("Role name"),control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{type:"nested",control:"fieldset",label:e("Sections"),group:e("Restore options"),contentClass:"row",schema:[{id:"pre_data",label:e("Pre-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}},{id:"data",label:e("Data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}},{id:"post_data",label:e("Post-data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Sections"),deps:["only_data","only_schema"],disabled:function(e){return"function"!==this.node.type&&"table"!==this.node.type&&"trigger"!==this.node.type&&"trigger_function"!==this.node.type&&(e.get("only_data")||e.get("only_schema"))}}]},{type:"nested",control:"fieldset",label:e("Type of objects"),group:e("Restore options"),contentClass:"row",schema:[{id:"only_data",label:e("Only data"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Type of objects"),deps:["pre_data","data","post_data","only_schema"],disabled:function(e){return"database"!==this.node.type&&"schema"!==this.node.type||e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_schema")}},{id:"only_schema",label:e("Only schema"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Type of objects"),deps:["pre_data","data","post_data","only_data"],disabled:function(e){return"database"!==this.node.type&&"schema"!==this.node.type||e.get("pre_data")||e.get("data")||e.get("post_data")||e.get("only_data")}}]},{type:"nested",control:"fieldset",label:e("Do not save"),group:e("Restore options"),contentClass:"row",schema:[{id:"dns_owner",label:e("Owner"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_privilege",label:e("Privilege"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"dns_tablespace",label:e("Tablespace"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save")},{id:"no_comments",label:e("Comments"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Do not save"),visible:function(){var e=o.tree,t=e.selected(),n=t&&1==t.length?e.itemData(t):void 0,r=a.isUndefined(n)?void 0:o.Nodes[n._type].getTreeNodeHierarchy(t).server;return!a.isUndefined(r)&&r.version>=11e4}}]},{type:"nested",control:"fieldset",label:e("Queries"),group:e("Restore options"),contentClass:"row",schema:[{id:"include_create_database",label:e("Include CREATE DATABASE statement"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries")},{id:"clean",label:e("Clean before restore"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Queries"),disabled:function(){return"function"===this.node.type||"trigger_function"===this.node.type}},{id:"single_transaction",label:e("Single transaction"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Queries")}]},{type:"nested",control:"fieldset",label:e("Disable"),group:e("Restore options"),contentClass:"row",schema:[{id:"disable_trigger",label:e("Trigger"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",group:e("Disable")},{id:"no_data_fail_table",label:e("No data for Failed Tables"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Disable")}]},{type:"nested",control:"fieldset",label:e("Miscellaneous / Behavior"),group:e("Restore options"),contentClass:"row",schema:[{id:"verbose",label:e("Verbose messages"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous / Behavior")},{id:"use_set_session_auth",label:e("Use SET SESSION AUTHORIZATION"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous / Behavior")},{id:"exit_on_error",label:e("Exit on error"),type:"switch",extraToggleClasses:"pg-el-sm-6",controlLabelClassName:"control-label pg-el-sm-5 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-7 pg-el-12",disabled:!1,group:e("Miscellaneous / Behavior")}]}],validate:function(){return null}});return o.Restore={init:function(){if(!this.initialized){this.initialized=!0;for(var t=[{name:"restore_object",module:this,applies:["tools"],callback:"restore_objects",priority:13,label:e("Restore..."),icon:"fa fa-upload",enable:u.enabled.bind(null,o.treeMenu,c.restoreSupportedNodes),data:{data_disabled:e("Please select any schema or table from the browser tree to Restore data.")}}],n=0;n<c.restoreSupportedNodes.length;n++)t.push({name:"restore_"+c.restoreSupportedNodes[n],node:c.restoreSupportedNodes[n],module:this,applies:["context"],callback:"restore_objects",priority:13,label:e("Restore..."),icon:"fa fa-upload",enable:u.enabled.bind(null,o.treeMenu,c.restoreSupportedNodes)});return o.add_menus(t),this}},restore_objects:function(e,t){new p.RestoreDialog(o,n,i,f).draw(e,t,o.stdW.calc(o.stdW.md),o.stdH.calc(o.stdH.md))}},o.Restore}.apply(t,a))||(e.exports=r)},77544:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(30489),n(68304),Object.defineProperty(t,"__esModule",{value:!0}),t.RestoreDialog=void 0;var r=d(n(91669)),i=d(n(12030)),o=n(35433),s=d(n(28008)),l=d(n(9669));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(d,e);var t,n,a,o=f(d);function d(e,t,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.default;return c(this,d),o.call(this,(0,r.default)("Restore Error"),"<div class='restore_dialog'></div>",e,t,n,a,s)}return t=d,(n=[{key:"url_for_utility_exists",value:function(e){return(0,s.default)("restore.utility_exists",{sid:e})}},{key:"draw",value:function(e,t,n,a){var i=this.retrieveAncestorOfTypeServer(t);if(i&&this.hasBinariesConfiguration(i)){var o="database"==i._type?i._pid:i._id,s=this.url_for_utility_exists(o),d=this;l.default.get(s).then((function(e){if(e.data.success){if(d.canExecuteOnCurrentDatabase(t)){var i=t||d.pgBrowser.treeMenu.selected(),o=d.pgBrowser.treeMenu.findNodeByDomElement(i).getData(),s=d.pgBrowser.Nodes[o._type];if(s){var l=(0,r.default)("Restore (%s: %s)",s.label,o.label);d.createOrGetDialog(l,"restore"),d.alertify.pg_restore(l,i,o,s).resizeTo(n,a)}}}else d.alertify.alert((0,r.default)("Utility not found"),e.data.errormsg)})).catch((function(){d.alertify.alert((0,r.default)("Utility not found"),(0,r.default)("Failed to fetch Utility information"))}))}}},{key:"dialogName",value:function(){return"pg_restore"}}])&&u(t.prototype,n),a&&u(t,a),d}(o.Dialog);t.RestoreDialog=h},9066:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(69826),n(5735),n(68309),n(30489),n(68304),n(83753),Object.defineProperty(t,"__esModule",{value:!0}),t.RestoreDialogWrapper=void 0;var r=n(82794),i=d(n(9669)),o=d(n(64492)),s=d(n(91669)),l=d(n(28008));function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g(e);if(t){var r=g(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(f,e);var t,n,a,d=p(f);function f(e,t,n,a,r,i,o,s){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),d.call(this,e,t,a,r,i,o,s)}return t=f,(n=[{key:"main",value:function(e,t,n,a){this.set("title",e),this.setting("pg_node",a),this.setting("pg_item",t),this.setting("pg_item_data",n)}},{key:"setup",value:function(){return{buttons:[{text:"",className:"btn btn-primary-icon pull-left fa fa-info pg-alertify-icon-button",attrs:{name:"object_help",type:"button",url:"backup.html",label:(0,s.default)("Restore"),"aria-label":(0,s.default)("Object Help")}},{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,s.default)("Restore"),"aria-label":(0,s.default)("Help"),url:(0,l.default)("help.static",{filename:"restore_dialog.html"})}},{text:(0,s.default)("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",restore:!1,"data-btn-name":"cancel"},{text:(0,s.default)("Restore"),key:13,className:"btn btn-primary fa fa-upload pg-alertify-button",restore:!0,"data-btn-name":"restore"}],options:{title:this.dialogTitle,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}}},{key:"prepare",value:function(){this.disableRestoreButton();var e=this.jquery(this.dialogContainerSelector),t=this.getSelectedNode(),n=this.getSelectedNodeData(t);if(n){var a=this.pgBrowser.Nodes[n._type],i=(0,r.getTreeNodeHierarchyFromElement)(this.pgBrowser,t),o=this.createDialog(a,i,e);this.addAlertifyClassToRestoreNodeChildNodes(),o.render();var l=this.jquery('<div class=\'pg-prop-status-bar pg-prop-status-bar-absolute pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>        <div class="ml-auto close-error-bar">           <a aria-label="'+(0,s.default)("Close error bar")+'" class="close-error fa fa-times text-danger"></a>         </div>     </div>   </div> </div>').appendTo(e);this.elements.content.appendChild(e.get(0)),this.focusOnDialog(this),this.setListenersForFilenameChanges(l)}}},{key:"callback",value:function(e){var t=this.getSelectedNode(),n=this.getSelectedNodeData(t),a=n&&this.pgBrowser.Nodes[n._type];if(this.wasHelpButtonPressed(e))return e.cancel=!0,void this.pgBrowser.showHelp(e.button.element.name,e.button.element.getAttribute("url"),a,t.getHtmlIdentifier());if(this.wasRestoreButtonPressed(e)){if(!n)return;var o=this.retrieveServerIdentifier(a,t),d=this,c=(0,l.default)("restore.create_job",{sid:o}),u=(0,r.getTreeNodeHierarchyFromElement)(this.pgBrowser,t);this.setExtraParameters(t,u),i.default.post(c,this.view.model.toJSON()).then((function(e){e.data.success?(d.alertify.success((0,s.default)("Restore job created."),5),d.pgBrowser.Events.trigger("pgadmin-bgprocess:created",d)):d.alertify.alert((0,s.default)("Restore job creation failed."),e.data.errormsg)})).catch((function(e){try{var t=e.response.data;d.alertify.alert((0,s.default)("Restore job failed."),t.errormsg)}catch(e){console.warn(e.stack||e)}}))}}},{key:"addAlertifyClassToRestoreNodeChildNodes",value:function(){this.jquery(this.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties")}},{key:"getSelectedNode",value:function(){var e=this.pgBrowser.treeMenu,t=e.selected();return t?e.findNodeByDomElement(t):void 0}},{key:"disableRestoreButton",value:function(){this.__internal.buttons[3].element.disabled=!0}},{key:"enableRestoreButton",value:function(){this.__internal.buttons[3].element.disabled=!1}},{key:"createDialog",value:function(e,t,n){var a=new this.dialogModel({node_data:e},{node_info:t}),r=this.backform.generateViewSchema(t,a,"create",e,t.server,!0);return this.view=new this.backform.Dialog({el:n,model:a,schema:r})}},{key:"retrieveServerIdentifier",value:function(e,t){return(0,r.getTreeNodeHierarchyFromElement)(this.pgBrowser,t).server._id}},{key:"setListenersForFilenameChanges",value:function(e){var t=this;this.view.model.on("change",(function(){var n,a,r,i=this;o.default.isUndefined(this.get("file"))||""===this.get("file")?(t.disableRestoreButton(),n=(0,s.default)("Please provide a filename"),a="file",r=n,i.errorModel.set(a,r),e.removeClass("d-none"),e.find(".alert-text").html(r),t.elements.dialog.querySelector(".close-error").addEventListener("click",(function(){e.addClass("d-none"),i.errorModel.set(a,r)}))):(this.errorModel.clear(),e.addClass("d-none"),t.enableRestoreButton())}))}},{key:"setExtraParameters",value:function(e,t){if(this.view.model.set("database",t.database._label),!this.view.model.get("custom")){var n=e.getData();switch(n._type){case"schema":this.view.model.set("schemas",[n._label]);break;case"table":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("tables",[n._label]);break;case"function":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("functions",[n._label]);break;case"index":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("indexes",[n._label]);break;case"trigger":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("triggers",[n._label]);break;case"trigger_func":this.view.model.set("schemas",[t.schema._label]),this.view.model.set("trigger_funcs",[n._label])}}}},{key:"wasRestoreButtonPressed",value:function(e){return"restore"===e.button["data-btn-name"]}}])&&c(t.prototype,n),a&&c(t,a),f}(n(22378).DialogWrapper);t.RestoreDialogWrapper=b},23792:(e,t,n)=>{var a,r;n(69826),n(26699),n(32023),n(73210),n(32564),a=[n(91669),n(28008),n(19755),n(64492),n(55112),n(87789),n(55455),n(88941)],void 0===(r=function(e,t,n,a,r,i,o){var s=window.wcDocker,l=r.Browser;return l.SchemaDiff||(l.SchemaDiff={init:function(){if(!this.initialized){this.initialized=!0,i.setPGCSRFToken(r.csrf_token_header,r.csrf_token);var t=[{name:"schema_diff",module:this,applies:["tools"],callback:"show_schema_diff_tool",priority:1,label:e("Schema Diff"),enable:!0}];l.add_menus(t);var n=new l.Frame({name:"frm_schemadiff",showTitle:!0,isCloseable:!0,isPrivate:!0,url:"about:blank"}),a=this,o=setInterval((function(){l.preference_version()>0&&(a.preferences=l.get_preferences_for_module("schema_diff"),clearInterval(o))}),0);return l.onPreferencesChange("schema_diff",(function(){a.preferences=l.get_preferences_for_module("schema_diff")})),n.load(l.docker),this}},show_schema_diff_tool:function(){var a=this,r=t("schema_diff.initialize",null);n.ajax({url:r,method:"GET",dataType:"json",contentType:"application/json"}).done((function(t){a.trans_id=t.data.schemaDiffTransId,t.data.panel_title=e("Schema Diff"),a.launch_schema_diff(t.data)})).fail((function(t){a.raise_error_on_fail(e("Schema Diff initialize error"),t)}))},launch_schema_diff:function(r){var i=r.panel_title,d=r.schemaDiffTransId,c=t("schema_diff.panel",{trans_id:d,editor_title:i}),u=l.get_preferences_for_module("browser").new_browser_tab_open;if(u&&u.includes("schema_diff"))window.open(c,"_blank");else{var p=l.docker.findPanels("properties"),f=l.docker.addPanel("frm_schemadiff",s.DOCK.STACKED,p[0]);f.on(s.EVENT.RENAME,(function(t){o.prompt("",t.$titleText[0].textContent,(function(e,t){t&&(t=t.trim(),f.title("<span>"+a.escape(t)+"</span>"))}),(function(e){e.cancel=!1})).set({title:e("Rename Panel")})})),f.title('<span title="">'+i+"</span>"),f.icon("pg-font-icon icon-compare"),f.focus();!function e(t){n(t).data("embeddedFrame").$container.append(l.SchemaDiff.spinner_el),setTimeout((function(){if(n(t).data("frameInitialized")){var a=n(t).data("embeddedFrame");a&&(a.openURL(c),a.$container.find(".pg-sp-container").delay(1e3).hide(1))}else e(t)}),100)}(f)}}}),l.SchemaDiff}.apply(t,a))||(e.exports=r)},26889:(e,t,n)=>{var a,r;n(82772),a=[n(91669),n(28008),n(19755),n(64492),n(55455),n(55112),n(87789),n(14953),n(97051)],void 0===(r=function(e,t,n,a,r,i,o,s,l){var d=i.Browser;return i.SearchObjects||(i.SearchObjects={init:function(){if(!this.initialized){this.initialized=!0,o.setPGCSRFToken(i.csrf_token_header,i.csrf_token);var t=[{name:"search_objects",module:this,applies:["tools"],callback:"show_search_objects",enable:this.search_objects_enabled,priority:1,label:e("Search Objects..."),data:{data_disabled:e("Please select a database from the browser tree to search the database objects.")}},{name:"search_objects",module:this,applies:["context"],callback:"show_search_objects",enable:this.search_objects_enabled,priority:1,label:e("Search Objects...")}];return d.add_menus(t),this}},search_objects_enabled:function(t){var n=!(a.isUndefined(t)||a.isNull(t)||-1!=a.indexOf(i.unsupported_nodes,t._type)||("database"!=t._type||!t.allowConn)&&"database"==t._type);return s.enable(e("Search objects"),n),n},show_search_objects:function(e,t){new l.default(d,n,r,{}).draw(e,t,{},d.stdW.calc(d.stdW.md),d.stdH.calc(d.stdH.lg))}}),i.SearchObjects}.apply(t,a))||(e.exports=r)},97051:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(30489),n(68304),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(91669))&&r.__esModule?r:{default:r},o=n(35433),s=n(9807);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,e);var t,n,a,r=u(o);function o(e,t,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return l(this,o),r.call(this,(0,i.default)("Search Objects Error"),"<div class='search_objects_dialog'></div>",e,t,n,a,s)}return t=o,(n=[{key:"dialogName",value:function(){return"search_objects"}},{key:"draw",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=this.retrieveAncestorOfTypeDatabase(t);if(o){var l=(0,s.getPanelTitle)(this.pgBrowser,t);l=(0,i.default)("Search Objects - ")+l;var d=this.createOrGetDialog((0,i.default)("Search Objects..."),"search_objects");d(l).resizeTo(a,r)}}}])&&d(t.prototype,n),a&&d(t,a),o}(o.Dialog);t.default=g},10713:(e,t,n)=>{function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(92222),n(82772),n(79753),n(69600),n(21249),n(47042),n(2707),n(24812),n(68309),n(30489),n(47941),n(68304),n(41539),n(88674),n(17727),n(74916),n(15306),n(23123),n(73210),n(32564),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(82794),i=p(n(9669)),o=p(n(91669)),s=p(n(28008));n(20454);var l=n(22378),d=p(n(73409)),c=p(n(55112)),u=p(n(64492));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=y(e);if(t){var r=y(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(p,e);var t,n,a,l=_(p);function p(e,t,n,a,r,i,o,s){var d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(d=l.call(this,e,t,a,r,i,o,s)).grid=null,d.dataview=null,d.gridContainer=null,d}return t=p,(n=[{key:"showMessage",value:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};""==e||null==e?this.statusBar.classList.add("d-none"):(t?(this.statusBar.innerHTML='\n          <div class="error-in-footer">\n            <div class="d-flex px-2 py-1">\n              <div class="pr-2">\n                <i class="fa fa-exclamation-triangle" aria-hidden="true" role="img"></i>\n              </div>\n              <div role="alert" class="alert-text">'.concat(e,'</div>\n              <div class="ml-auto close-error-bar">\n                <a class="close-error fa fa-times text-danger"></a>\n              </div>\n            </div>\n          </div>\n        '),this.statusBar.querySelector(".close-error").addEventListener("click",(function(){n.showMessage(null)}))):this.statusBar.innerHTML='\n          <div class="info-in-footer">\n            <div class="d-flex px-2 py-1">\n              <div class="pr-2">\n                <i class="fa fa-info-circle" aria-hidden="true"></i>\n              </div>\n              <div class="alert-text" role="alert">'.concat(e,"</div>\n            </div>\n          </div>\n        "),this.statusBar.classList.remove("d-none"),a(this.statusBar))}},{key:"createDialogDOM",value:function(e){return e.innerHTML='\n      <div class="d-flex flex-column w-100 h-100">\n        <div class="p-2">\n          <div class="row">\n            <div class="col-6">\n              <div class="input-group pgadmin-controls">\n                  <input type="search" class="form-control" id="txtGridSearch" placeholder="'+(0,o.default)("Type at least 3 characters")+'"\n                    tabindex="0" aria-describedby="labelSearch" aria-labelledby="labelSearch" autocomplete="off">\n              </div>\n            </div>\n            <div class="col-4 d-flex">\n              <select aria-label="'+(0,o.default)("Object types")+'" class="node-types"></select>\n            </div>\n            <div class="col-2">\n              <button class="btn btn-primary btn-search w-100" disabled><span class="fa fa-search"></span>&nbsp;'+(0,o.default)("Search")+'</button>\n            </div>\n          </div>\n        </div>\n        <div class="search-result-container flex-grow-1">\n          <div class="pg-sp-container d-none">\n            <div class="pg-sp-content">\n              <div class="row"><div class="col-12 pg-sp-icon"></div></div>\n              <div class="row"><div class="col-12 pg-sp-text"></div></div>\n            </div>\n          </div>\n          <div class="search-result"></div>\n        </div>\n        <div class=\'search-result-count p-1\'>\n        </div>\n        <div class="pg-prop-status-bar">\n        </div>\n      </div>\n    ',e}},{key:"updateDimOfSearchResult",value:function(){var e=this.searchResultContainer.getBoundingClientRect();this.searchResult.style.height=e.height+"px",this.searchResult.style.width=e.width+"px"}},{key:"setLoading",value:function(e){null!=e?(this.loader.classList.remove("d-none"),this.loader.querySelector(".pg-sp-text").innerHTML=e):this.loader.classList.add("d-none")}},{key:"searchBtnEnabled",value:function(e){if(void 0===e)return!this.searchBtn.disabled;this.searchBtn.disabled=!e}},{key:"searchBoxVal",value:function(e){if(void 0===e)return this.searchBox.value.trim();this.searchBox.value=e}},{key:"typesVal",value:function(e){if(void 0===e)return this.typesSelect.value;this.typesSelect.value=e}},{key:"setTypes",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.jquery(this.typesSelect).empty().select2({data:e}),this.typesSelect.disabled=!t}},{key:"setResultCount",value:function(e){0==e||e||(e=(0,o.default)("Unknown")),this.searchResultCount.innerHTML=1===e?(0,o.default)("%s match found.",e):(0,o.default)("%s matches found.",e)}},{key:"showOtherInfo",value:function(e){var t=this.dataview.getItem(e);t.name+=" (".concat(t.other_info,")"),t.other_info=null,this.dataview.updateItem(t.id,t)}},{key:"setGridData",value:function(e){this.dataview.setItems(e)}},{key:"prepareGrid",value:function(){var e=this;this.dataview=new d.default.Data.DataView,this.dataview.getItemMetadata=function(t){return e.dataview.getItem(t).show_node?null:{cssClasses:"object-muted"}},this.dataview.setFilter((function(e,t){return!t||"all"==t.type||(Array.isArray(t.type)?-1!=t.type.indexOf(e.type):t.type==e.type)})),this.jquery(this.typesSelect).on("change",(function(){var t=e.typesVal();"constraints"===t&&(t=["constraints","check_constraint","foreign_key","primary_key","unique_constraint","exclusion_constraint"]),e.dataview.setFilterArgs({type:t}),e.dataview.refresh()})),this.dataview.onRowCountChanged.subscribe((function(t,n){e.grid.updateRowCount(),e.grid.render(),e.setResultCount(n.current)})),this.dataview.onRowsChanged.subscribe((function(t,n){e.grid.invalidateRows(n.rows),e.grid.render()})),this.grid=new d.default.Grid(this.searchResult,this.dataview,[{id:"name",name:(0,o.default)("Object name"),field:"name",sortable:!0,width:50,formatter:function(e,t,n,a,r){var i="<i class='wcTabIcon ".concat(r.icon,"'></i>").concat(n);return null!=r.other_info&&""!=r.other_info&&(i+='&nbsp;<span class="object-other-info">(...)</span>'),i}},{id:"type",name:(0,o.default)("Type"),field:"type_label",sortable:!0,width:35},{id:"path",name:(0,o.default)("Browser path"),field:"path",sortable:!1,formatter:function(e,t,n){return n}}],{enableCellNavigation:!0,enableColumnReorder:!1,multiColumnSort:!0,explicitInitialization:!0}),this.grid.registerPlugin(new d.default.AutoColumnSize),this.grid.setSelectionModel(new d.default.RowSelectionModel({selectActiveRow:!0})),this.grid.onKeyDown.subscribe((function(t){!e.grid.getActiveCell()||t.ctrlKey||t.altKey||t.metaKey||9!=t.keyCode||(t.preventDefault(),t.stopImmediatePropagation(),t.shiftKey?e.prevToGrid.focus():e.nextToGrid.focus())})),this.grid.onClick.subscribe((function(t,n){t.target.classList.contains("object-other-info")&&e.showOtherInfo(n.row)})),this.grid.onDblClick.subscribe((function(t,n){var a=e.dataview.getItem(n.row),r=e.pgBrowser.treeMenu;if(!a.show_node)return e.showMessage((0,o.default)('%s objects are disabled in the browser. You can enable them in the <a class="pref-dialog-link">preferences dialog</a>.',a.type_label),!0,(function(e){e.querySelector(".pref-dialog-link").addEventListener("click",(function(){c.default.Preferences&&c.default.Preferences.show()}))})),!1;e.showMessage((0,o.default)("Locating...")),r.findNodeWithToggle(a.id_path).then((function(t){r.selectNode(t.domNode,!0),e.showMessage(null)})).catch((function(t){e.showMessage((0,o.default)("Unable to locate this object in the browser."),!0),console.warn(t,a.id_path)}))})),this.grid.onSort.subscribe((function(t,n){var a=n.sortCols;e.dataview.sort((function(e,t){for(var n=0,r=a.length;n<r;n++){var i=a[n].sortCol.field,o=a[n].sortAsc?1:-1,s=e[i],l=t[i],d=(s==l?0:s>l?1:-1)*o;if(0!=d)return d}return!1}),!0)}))}},{key:"onDialogResize",value:function(){this.updateDimOfSearchResult(),this.grid&&(this.grid.resizeCanvas(),this.grid.autosizeColumns())}},{key:"onDialogShow",value:function(){var e=this;this.focusOnDialog(this),setTimeout((function(){e.grid||e.prepareGrid(),e.updateDimOfSearchResult(),e.grid.init(),e.setGridData([]),e.onDialogResize()}),500)}},{key:"getBaseUrl",value:function(e){return(0,s.default)("search_objects."+e,{sid:this.treeInfo.server._id,did:this.treeInfo.database._id})}},{key:"getCollNode",value:function(e){return"coll-"+e in this.pgBrowser.Nodes?this.pgBrowser.Nodes["coll-"+e]:e in this.pgBrowser.Nodes&&"string"==typeof this.pgBrowser.Nodes[e].collection_type?this.pgBrowser.Nodes[this.pgBrowser.Nodes[e].collection_type]:null}},{key:"getSelectedNode",value:function(){var e=this.pgBrowser.treeMenu,t=e.selected();return t?e.findNodeByDomElement(t):void 0}},{key:"finaliseData",value:function(e){e.icon="icon-"+e.type;var t=f(this.translateSearchObjectsPath(e.path,e.catalog_level),2);return e.path=t[0],e.id_path=t[1],e.id=e.id_path?e.id_path.join("."):u.default.uniqueId(e.name),e.name=u.default.escape(e.name),e.path=u.default.escape(e.path),e.other_info=e.other_info?u.default.escape(e.other_info):e.other_info,e}},{key:"translateSearchObjectsPath",value:function(e,t){var n=this;if(null===e)return[null,null];t=t||"N";var a=[this.treeInfo.server_group.id,this.treeInfo.server.id,this.getCollNode("database").type+"/"+this.treeInfo.server._id,this.treeInfo.database.id],r=this.treeInfo.database._id,i=(e="/"+e).replace(/\/:[a-zA-Z_]+\.[0-9]+:\//g,(function(e){var i=e,o=f((e=e.slice(2,-2)).split("."),3),s=o[0],l=o[1];if(void 0!==o[2])return e;s=-1!=["D","O"].indexOf(t)&&"schema"==s?"catalog":s,s="O"===t&&-1!=["view","table"].indexOf(s)?"catalog_object":s,s="O"===t&&"column"==s?"catalog_object_column":s;var d=n.getCollNode(s);return d?(null!=r&&a.push("".concat(d.type,"/").concat(r)),a.push("".concat(s,"/").concat(l)),r=l,"/".concat(d.label,"/")):s in n.pgBrowser.Nodes?(a.push("".concat(s,"/").concat(l)),r=l,"/"):(r=null,i)}));return[i=i.substring(1),a]}},{key:"prepareDialog",value:function(){var e=this;this.showMessage(null),this.setResultCount(0),this.grid&&(this.grid.destroy(),this.grid=null),this.setTypes([{id:-1,text:(0,o.default)("Loading..."),value:null}],!1),i.default.get(this.getBaseUrl("types")).then((function(t){var n,a=[{id:"all",text:(0,o.default)("All types")}],r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(Object.keys(t.data.data).sort());try{for(r.s();!(n=r.n()).done;){var i=n.value;a.push({id:i,text:t.data.data[i]})}}catch(e){r.e(e)}finally{r.f()}e.setTypes(a)})).catch((function(){e.setTypes([{id:-1,text:(0,o.default)("Failed"),value:null}],!1)}))}},{key:"main",value:function(e){this.set("title",e)}},{key:"setup",value:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:(0,o.default)("Help"),"aria-label":(0,o.default)("Help"),url:(0,s.default)("help.static",{filename:"search_objects.html"})}},{text:(0,o.default)("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button","data-btn-name":"cancel"}],options:{title:this.dialogTitle,padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,modal:!1}}}},{key:"build",value:function(){var e=this,t=document.createElement("div");t.innerHTML=this.dialogContainerSelector;var n=t.firstChild;this.elements.content.innerHTML="",this.elements.content.appendChild(n),this.createDialogDOM(n),this.alertify.pgDialogBuild.apply(this),this.loader=n.getElementsByClassName("pg-sp-container")[0],this.searchBox=n.querySelector("#txtGridSearch"),this.searchBtn=n.querySelector(".btn-search"),this.typesSelect=n.querySelector(".node-types"),this.searchResultContainer=n.querySelector(".search-result-container"),this.searchResult=n.querySelector(".search-result"),this.searchResultCount=n.querySelector(".search-result-count"),this.statusBar=n.querySelector(".pg-prop-status-bar"),this.nextToGrid=this.elements.footer.querySelector(".ajs-button"),this.prevToGrid=this.typesSelect,this.setTypes([{id:-1,text:(0,o.default)("Loading..."),value:null}],!1),this.searchBox.addEventListener("input",(function(){e.searchBoxVal().length>=3?e.searchBtnEnabled(!0):e.searchBtnEnabled(!1)})),this.searchBox.addEventListener("keypress",(function(t){13==t.keyCode&&(t.stopPropagation(),e.searchBtnEnabled()&&e.searchBtn.dispatchEvent(new Event("click")))})),this.searchBtn.addEventListener("click",(function(){e.searchBtnEnabled(!1),e.setGridData([]),e.showMessage(null),e.setLoading((0,o.default)("Searching....")),i.default.get(e.getBaseUrl("search"),{params:{text:e.searchBoxVal(),type:e.typesVal()}}).then((function(t){var n=t.data.data.map((function(t){return e.finaliseData(t)}));e.setGridData(n)})).catch((function(t){var n="";n=t.response?t.response.data&&t.response.data.errormsg?t.response.data.errormsg:t.response.statusText:t.request?(0,o.default)("No response received"):t.message,e.showMessage((0,o.default)("An unexpected occurred: %s",n),!0),console.warn(t)})).finally((function(){e.setLoading(null),e.searchBtnEnabled(!0)}))})),this.set({onresized:this.onDialogResize.bind(this),onmaximized:this.onDialogResize.bind(this),onrestored:this.onDialogResize.bind(this),onshow:this.onDialogShow.bind(this)})}},{key:"prepare",value:function(){var e=this.getSelectedNode();this.getSelectedNodeData(e)&&(this.treeInfo=(0,r.getTreeNodeHierarchyFromElement)(this.pgBrowser,e),this.prepareDialog(),this.focusOnDialog(this))}},{key:"callback",value:function(e){if(this.wasHelpButtonPressed(e))return e.cancel=!0,void this.pgBrowser.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null)}}])&&h(t.prototype,n),a&&h(t,a),p}(l.DialogWrapper);t.default=w},44316:(e,t,n)=>{var a,r;n(24812);var i=n(48987);a=[n(91669),n(28008),n(19755),n(64492),n(55455),n(55112),n(58894),n(87789),n(58386)],void 0===(r=function(e,t,n,a,r,o,s,l){var d="True"==(o=o||window.pgAdmin||{}).server_mode,c=o.Tools=o.Tools||{};if(d)return o.Tools.storage_manager||(c.storage_manager={init:function(){if(!this.initialized){this.initialized=!0,l.setPGCSRFToken(o.csrf_token_header,o.csrf_token);var t=this.callback_storage_manager.bind(this);s.Events.on("pgadmin:tools:storage_manager",t);var n=[{name:"storage_manager",module:this,applies:["tools"],callback:"callback_storage_manager",priority:2,label:e("Storage Manager..."),enable:!0}];s.add_menus(n)}},callback_storage_manager:function(e){var t={supported_types:["sql","csv","*"],dialog_type:"storage_dialog",dialog_title:"Storage Manager",btn_primary:void 0};if(a.isUndefined(e)||a.isNull(e)||a.isEmpty(e))o.FileManager.init(),o.FileManager.show_dialog(t);else{var n,r=(0,i.getTransId)(JSON.stringify(t));4==r.readyState&&(n=JSON.parse(r.responseText));var s=a.isUndefined(n)?0:n.data.fileTransId;(0,i.set_last_traversed_dir)({path:e},s),o.FileManager.init(),o.FileManager.show_dialog(t)}}}),o.Tools.storage_manager}.apply(t,a))||(e.exports=r)},90491:(e,t,n)=>{var a,r;function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n(69826),n(26699),n(82772),n(66992),n(69600),n(5735),n(83710),n(24812),n(68309),n(41539),n(74916),n(39714),n(32023),n(15306),n(33948),n(32564),n(83753),a=[n(91669),n(28008),n(19755),n(64492),n(55455),n(58894),n(72316),n(83879),n(95283),n(88941),n(12030),n(6537),n(44092),n(14753),n(63790)],void 0===(r=function(e,t,n,a,r,s,l,d,c,u,p,f,g){if(s.UserManagement)return s.UserManagement;var b=t("user_management.users"),h=t("user_management.roles"),m=t("user_management.auth_sources"),_="internal",v=!(1!=f.auth_sources.length||!f.auth_sources.includes(_)),y=d.Extension.PasswordDepCell=d.Extension.PasswordCell.extend({initialize:function(){d.Extension.PasswordCell.prototype.initialize.apply(this,arguments),d.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){this.$el.empty(),this.render();var e=this.model,t=this.column,n=this.column.get("editable");return(a.isFunction(n)?!!n.apply(t,[e]):!!n)?this.$el.addClass("editable"):this.$el.removeClass("editable"),this.delegateEvents(),this},render:function(){d.NumberCell.prototype.render.apply(this,arguments);var e=this.model,t=this.column,n=this.column.get("editable"),r=a.isFunction(n)?!!n.apply(t,[e]):!!n;return r?this.$el.addClass("editable"):this.$el.removeClass("editable"),this},remove:d.Extension.DependentCell.prototype.remove});return s.UserManagement={init:function(){if(!this.initialized)return this.initialized=!0,this},change_password:function(n){var a=e("Change Password");r.ChangePassword||r.dialog("ChangePassword",(function(){return{main:function(e,t){this.set({title:e,url:t})},build:function(){r.pgDialogBuild.apply(this)},settings:{url:void 0},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Change Password"),url:t("help.static",{filename:"change_user_password.html"})}},{text:e("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){return setTimeout((function(){return r.ChangePassword().destroy()}),500)}},prepare:function(){var e=document.createElement("iframe");e.frameBorder="no",e.width="100%",e.height="100%",e.src=this.setting("url"),this.elements.content.appendChild(e)},callback:function(e){if("dialog_help"==e.button.element.name)return e.cancel=!0,void s.showHelp(e.button.element.name,e.button.element.getAttribute("url"),null,null)}}})),r.ChangePassword(a,n).resizeTo(s.stdW.lg,s.stdH.md)},isPgaLoginRequired:function(e){return void 0===e.responseJSON&&void 0!==e.data?401===e.status&&e.data&&e.data.info&&"PGADMIN_LOGIN_REQUIRED"===e.data.info:401===e.status&&e.responseJSON&&e.responseJSON.info&&"PGADMIN_LOGIN_REQUIRED"===e.responseJSON.info},pgaLogin:function(n){var a=e("pgAdmin 4 login");n=n||t("security.login"),r.PgaLogin||r.dialog("PgaLogin",(function(){return{main:function(e,t){this.set({title:e,url:t})},build:function(){r.pgDialogBuild.apply(this)},settings:{url:void 0},setup:function(){return{buttons:[{text:e("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{padding:!1,overflow:!1,modal:!0,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){return setTimeout((function(){return r.PgaLogin().destroy()}))}},prepare:function(){var e=this,t=document.createElement("iframe"),n=this.setting("url");t.onload=function(){-1==(this.contentDocument||this.contentWindow.document).location.href.indexOf(n)&&(this.contentWindow.stop(),this.onload=null,e.close(),s.Events.trigger("pgadmin:user:logged-in"))},t.frameBorder="no",t.width="100%",t.height="100%",t.src=n,e.elements.content.appendChild(t)}}})),r.PgaLogin(a,n).resizeTo(s.stdW.md,s.stdH.md)},show_users:function(){if(f.is_admin){var u=[],w=[],x=s.Node.Model.extend({idAttribute:"id",urlRoot:b,defaults:{id:void 0,username:void 0,email:void 0,active:!0,role:"2",newPassword:void 0,confirmPassword:void 0,auth_source:_,authOnlyInternal:v},schema:[{id:"auth_source",label:e("Authentication source"),type:"text",control:"Select2",url:t("user_management.auth_sources"),cellHeaderClasses:"width_percent_30",visible:function(e){return!e.get("authOnlyInternal")},disabled:!1,cell:"Select2",select2:{allowClear:!1,openOnEnter:!1,first_empty:!1},options:function(){return w},editable:function(e){return e instanceof l.Collection||e.isNew()&&!e.get("authOnlyInternal")}},{id:"username",label:e("Username"),type:"text",cell:d.Extension.StringDepCell,cellHeaderClasses:"width_percent_30",deps:["auth_source"],editable:function(e){return!e.get("authOnlyInternal")&&e.get("auth_source")!=_||(e.isNew()&&null!=e.get("username")&&""!=e.get("username")&&setTimeout((function(){e.set("username",void 0)}),10),!1)},disabled:!1},{id:"email",label:e("Email"),type:"text",cell:d.Extension.StringDepCell,cellHeaderClasses:"width_percent_30",deps:["id"],editable:function(e){return!e.get("authOnlyInternal")||!(e instanceof l.Collection)&&!!e.isNew()}},{id:"role",label:e("Role"),type:"text",control:"Select2",cellHeaderClasses:"width_percent_20",cell:"select2",select2:{allowClear:!1,openOnEnter:!1,first_empty:!1},options:function(e){var t=[];return e instanceof c.Control?a.each(u,(function(e){t.push({label:e.name,value:e.id.toString()})})):a.each(u,(function(e){t.push([e.name,e.id.toString()])})),t},editable:function(e){return e instanceof l.Collection||e.get("id")!=f.id}},{id:"active",label:e("Active"),type:"switch",cell:"switch",cellHeaderClasses:"width_percent_10",sortable:!1,editable:function(e){return e instanceof l.Collection||e.get("id")!=f.id}},{id:"newPassword",label:e("New password"),type:"password",disabled:!1,control:"input",cell:y,cellHeaderClasses:"width_percent_20",deps:["auth_source"],sortable:!1,editable:function(e){return e.get("auth_source")==_}},{id:"confirmPassword",label:e("Confirm password"),type:"password",disabled:!1,control:"input",cell:y,cellHeaderClasses:"width_percent_20",deps:["auth_source"],sortable:!1,editable:function(e){return e.get("auth_source")==_}}],validate:function(){var t=null,n=this.changed||{};if(this.get("auth_source")==_&&("email"in n||!this.isNew())&&(a.isUndefined(this.get("email"))||a.isNull(this.get("email"))||""==String(this.get("email")).replace(/^\s+|\s+$/g,"")))return t=e("Email address cannot be empty."),this.errorModel.set("email",t),t;if(this.get("email")&&!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(this.get("email")))return t=e("Invalid email address: %s.",this.get("email")),this.errorModel.set("email",t),t;if(this.get("email")&&this.collection.nonFilter.where({email:this.get("email"),auth_source:_}).length>1)return t=e("The email address %s already exists.",this.get("email")),this.errorModel.set("email",t),t;if(this.errorModel.unset("email"),"role"in n&&(a.isUndefined(this.get("role"))||a.isNull(this.get("role"))||""==String(this.get("role")).replace(/^\s+|\s+$/g,"")))return t=e("Role cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("role",t),t;if(this.errorModel.unset("role"),this.get("auth_source")==_)if(this.isNew()){if("newPassword"in n&&(a.isUndefined(this.get("newPassword"))||a.isNull(this.get("newPassword"))||""==this.get("newPassword")))return t=e("Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(!a.isUndefined(this.get("newPassword"))&&!a.isNull(this.get("newPassword"))&&this.get("newPassword").length<6)return t=e("Password must be at least 6 characters for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(this.errorModel.unset("newPassword"),"confirmPassword"in n&&(a.isUndefined(this.get("confirmPassword"))||a.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword")))return t=e("Confirm Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;if(this.errorModel.unset("confirmPassword"),this.get("newPassword")&&this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword"))return t=e("Passwords do not match for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;this.errorModel.unset("confirmPassword")}else if((a.isUndefined(this.get("newPassword"))||a.isNull(this.get("newPassword"))||""==this.get("newPassword"))&&(a.isUndefined(this.get("confirmPassword"))||a.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword")))this.errorModel.unset("newPassword"),""==this.get("newPassword")&&this.set({newPassword:void 0}),this.errorModel.unset("confirmPassword"),""==this.get("confirmPassword")&&this.set({confirmPassword:void 0});else{if(!a.isUndefined(this.get("newPassword"))&&!a.isNull(this.get("newPassword"))&&""==!this.get("newPassword")&&this.get("newPassword").length<6)return t=e("Password must be at least 6 characters for user %s.",this.get("email")||""),this.errorModel.set("newPassword",t),t;if(a.isUndefined(this.get("confirmPassword"))||a.isNull(this.get("confirmPassword"))||""==this.get("confirmPassword"))return t=e("Confirm Password cannot be empty for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;if(this.get("newPassword")&&this.get("confirmPassword")&&this.get("newPassword")!=this.get("confirmPassword"))return t=e("Passwords do not match for user %s.",this.get("email")||""),this.errorModel.set("confirmPassword",t),t;this.errorModel.unset("newPassword"),this.errorModel.unset("confirmPassword")}else if(this.get("username")&&this.collection.nonFilter.where({username:this.get("username"),auth_source:"ldap"}).length>1)return t=e("The username %s already exists.",this.get("username")),this.errorModel.set("username",t),t;return null}}),k=c.generateGridColumnsFromModel(null,x,"edit"),C=d.Extension.DeleteCell.extend({changeOwnership:function(i,o){var l=this,d=c.Select2Control.extend({fetchData:function(){var e=this,i=e.field.get("url");i=t(i,{uid:o}),n.ajax({url:i,headers:{"Cache-Control":"no-cache"}}).done((function(t){var n=e.field.get("transform");if(t.data.status){var r=t.data.result.data;n&&a.isFunction(n)?e.field.set("options",n.bind(e,r)):e.field.set("options",r)}else n&&a.isFunction(n)?e.field.set("options",n.bind(e,[])):e.field.set("options",[]);c.Select2Control.prototype.render.apply(e,arguments)})).fail((function(e){var t="";t=404==e.status?"Unable to find url.":e.responseJSON.errormsg,r.error(t)}))},render:function(){return this.fetchData(),c.Select2Control.prototype.render.apply(this,arguments)},onChange:function(){c.Select2Control.prototype.onChange.apply(this,arguments)}}),u=s.DataModel.extend({schema:[{id:"note_text_ch_owner",control:c.NoteControl,text:"Select the user that will take ownership of the shared servers created by <b>"+l.model.get("username")+"</b>. <b>"+i.data.shared_servers+"</b> shared servers are currently owned by this user.",group:e("General")},{id:"user",name:"user",label:e("User"),type:"text",editable:!0,select2:{allowClear:!0,width:"100%",first_empty:!0},control:d,url:"user_management.admin_users",helpMessage:e("Note: If no user is selected, the shared servers will be deleted.")}]});r.changeOwnershipDialog||r.dialog("changeOwnershipDialog",(function(){var t=n("<div class='change-ownership'></div>");return{main:function(e){this.msg=e},build:function(){this.elements.content.appendChild(t.get(0)),r.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button","data-btn-name":"cancel"},{text:e("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button","data-btn-name":"ok"}],options:{title:"Change ownership",padding:!1,overflow:!1,model:0,resizable:!0,maximizable:!1,pinnable:!1,closableByDimmer:!1,modal:!1,autoReset:!1,closable:!0}}},prepare:function(){var e=this;t.html(""),e.ownershipModel=new u;var n=p.generateViewSchema(null,e.ownershipModel,"create",null,null,!0,null),a=this.view=new p.Dialog({el:"<div></div>",model:e.ownershipModel,schema:n});t.append(a.render().$el[0])},callback:function(t){if("ok"===t.button["data-btn-name"]){t.cancel=!0;var n=this.ownershipModel.toJSON();""==n.user||null==n.user?r.confirm(e("Delete user?"),e("The shared servers owned by <b>"+l.model.get("username")+"</b> will be deleted. Do you wish to continue?"),(function(){l.model.destroy({wait:!0,success:function(){r.success(e("User deleted.")),r.changeOwnershipDialog().destroy(),r.UserManagement().destroy()},error:function(){r.error(e("Error during deleting user."))}}),r.changeOwnershipDialog().destroy()}),(function(){return!0})):l.changeOwner(n.user,o)}else r.changeOwnershipDialog().destroy()}}})),r.changeOwnershipDialog("Change ownership").resizeTo(s.stdW.md,s.stdH.md)},changeOwner:function(a,i){n.ajax({url:t("user_management.change_owner"),method:"POST",data:{new_owner:a,old_owner:i}}).done((function(t){r.changeOwnershipDialog().destroy(),r.UserManagement().destroy(),r.success(e(t.info))})).fail((function(){r.error(e("Unable to change owner."))}))},deleteUser:function(){var t=this;r.confirm(e("Delete user?"),e("Are you sure you wish to delete this user?"),(function(){t.model.destroy({wait:!0,success:function(){r.success(e("User deleted."))},error:function(){r.error(e("Error during deleting user."))}})}),(function(){return!0}))},deleteRow:function(i){var o=this;if(i.preventDefault(),o.model.get("id")==f.id)return r.alert(e("Cannot delete user."),e("Cannot delete currently logged in user."),(function(){return!0})),!0;!(!a.isUndefined(this.column.get("canDeleteRow"))&&a.isFunction(this.column.get("canDeleteRow")))||d.callByNeed(this.column.get("canDeleteRow"),this.column,this.model)?o.model.isNew()?o.model.destroy():1==o.model.get("role")?n.ajax({url:t("user_management.shared_servers",{uid:o.model.get("id")}),method:"GET",async:!1}).done((function(e){e.data.shared_servers>0?o.changeOwnership(e,o.model.get("id")):o.deleteUser()})).fail((function(){o.deleteUser()})):o.deleteUser():r.alert(e("Error"),e("This user cannot be deleted."),(function(){return!0}))}});k.columns.unshift({name:"pg-backform-delete",label:"",cell:C,editable:!1,cell_priority:-1,canDeleteRow:!0}),r.UserManagement||r.dialog("UserManagement",(function(){return{main:function(e){this.set("title",e)},build:function(){r.pgDialogBuild.apply(this)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Users"),url:t("help.static",{filename:"user_management.html"})}},{text:e("Close"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button user_management_pg-alertify-button",attrs:{name:"close",type:"button"}}],options:{title:e("User Management"),padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1,closable:!1}}},hooks:{onclose:function(){this.view&&(this.view.remove({data:!0,internal:!0,silent:!0}),this.$content.remove())}},prepare:function(){var t=a.template(['<div class="pg-prop-footer" style="visibility:hidden;">',' <div class="pg-prop-status-bar">','    <div class="error-in-footer"> ','      <div class="d-flex px-2 py-1"> ','        <div class="pr-2"> ','          <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i> ',"        </div> ",'        <div class="alert-text" role="status"></div> ','        <div class="ml-auto close-error-bar"> ','          <a class="close-error fa fa-times text-danger"></a> ',"        </div> ","      </div> ","    </div> "," </div>","</div>"].join("\n")),s=n(t()),c=d.Row.extend({userInvalidClass:"bg-user-invalid",initialize:function(){d.Row.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"pgadmin:user:invalid",this.userInvalid),this.listenTo(this.model,"pgadmin:user:valid",this.userValid)},userInvalid:function(){n(this.el).removeClass("new"),n(this.el).addClass(this.userInvalidClass)},userValid:function(){n(this.el).removeClass(this.userInvalidClass)}}),p=l.Collection.extend({model:x,url:b,initialize:function(){l.Collection.prototype.initialize.apply(this,arguments);var e=this;e.changedUser=null,e.invalidUsers={},e.nonFilter=this,e.on("add",e.onModelAdd),e.on("remove",e.onModelRemove),e.on("pgadmin-session:model:invalid",(function(t,n){e.invalidUsers[n.cid]=t,n.trigger("pgadmin:user:invalid",n),s.find(".alert-text").html(t),s.css("visibility","visible")})),e.on("pgadmin-session:model:valid",(function(t){delete e.invalidUsers[t.cid],t.trigger("pgadmin:user:valid",t),this.updateErrorMsg(),this.saveUser(t)}))},onModelAdd:function(e){e.startNewSession()},onModelRemove:function(e){delete this.invalidUsers[e.cid],this.updateErrorMsg()},updateErrorMsg:function(){var e=null;for(var t in this.invalidUsers)if(e=this.invalidUsers[t])break;e?(s.find(".alert-text").html(e),s.css("visibility","visible")):(s.find(".alert-text").empty(),s.css("visibility","hidden"))},saveUser:function(t){var n=t.toJSON(!0);if(t.isNew()&&"ldap"==t.get("auth_source")&&(!t.get("username")||!t.get("auth_source")||!t.get("role"))||t.isNew()&&t.get("auth_source")==_&&(!t.get("email")||!t.get("role")||!t.get("newPassword")||!t.get("confirmPassword")||t.get("newPassword")!=t.get("confirmPassword"))||!t.isNew()&&t.get("newPassword")!=t.get("confirmPassword"))return!1;t.sessChanged()&&n&&!a.isEmpty(n)&&(t.stopSession(),t.save({},{attrs:n,wait:!0,success:function(){var n=t.get("auth_source");t.set({newPassword:void 0,confirmPassword:void 0,auth_source:void 0}),t.set({auth_source:n}),t.startNewSession(),r.success(e("User '%s' saved.",t.get("username")))},error:function(n,a){t.startNewSession(),r.error(e("Error saving user: '%s'",a.responseJSON.errormsg))}}))}}),f=this.userCollection=new p,v='<div class="navtab-inline-controls pgadmin-controls">\n                    <div class="input-group">\n                      <div class="input-group-prepend">\n                        <span class="input-group-text fa fa-search" id="labelSearch"></span>\n                        </div>\n                          <input type="search" class="form-control" id="txtGridSearch" placeholder="'+e("Search")+'" aria-label="'+e("Search")+'" aria-describedby="labelSearch" />\n                        </div>\n                        <button id="btn_add" type="button" class="btn btn-secondary btn-navtab-inline add" title="'+e("Add")+'">\n                          <span class="fa fa-plus "></span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>',y=a.template(v),C={canAdd:!0,add_title:e("Add new user")},S=n("<div></div>",{class:"user_container flex-grow-1"});n.ajax({url:h,method:"GET",async:!1}).done((function(e){u=e})).fail((function(){setTimeout((function(){r.alert(e("Error"),e("Cannot load user roles."))}),100)})),n.ajax({url:m,method:"GET",async:!1}).done((function(e){w=e})).fail((function(){setTimeout((function(){r.alert(e("Error"),e("Cannot load user Sources."))}),100)}));var D,j=this.view=new d.Grid({row:c,columns:k.columns,collection:f,className:"backgrid table table-bordered table-noouter-border table-bottom-border table-hover"});S.append(j.render().$el[0]),this.$content=n("<div class='user_management object subnode subnode-noouter-border d-flex flex-column'></div>").append(y(C)).append(S).append(s),this.elements.content.appendChild(this.$content[0]),f.nonFilter=(D=f,new d.Extension.ClientSideFilter({collection:D,placeholder:e("Filter by email"),wait:150})).setCustomSearchBox(n("#txtGridSearch")).shadowCollection,f.fetch(),this.$content.find("a.close-error").on("click",(function(){s.find(".alert-text").empty(),s.css("visibility","hidden")})),this.$content.find("button.add").first().on("click",(function(e){e.preventDefault();var t,a=!1,r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw i}}}}(f.models.entries());try{for(r.s();!(t=r.n()).done;){var s=i(t.value,2),l=s[0];if(s[1].isNew()){var d=j.body.rows[l].$el;d.addClass("new"),n(d).pgMakeVisible("backgrid"),n(d).find(".email").trigger("click"),a=!0}}}catch(e){r.e(e)}finally{r.f()}if(!a){n(j.body.$el.find(n("tr.new"))).removeClass("new");var c=new x(null,{handler:f,top:f,collection:f});f.add(c);var u=j.body.rows[f.indexOf(c)].$el;u.addClass("new"),n(u).pgMakeVisible("backgrid"),n(u).find(".email").trigger("click")}return!1})),g.findAndSetFocus(this.$content)},callback:function(t){if("dialog_help"==t.button.element.name)return t.cancel=!0,void s.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);if("close"==t.button.element.name){var n=this;a.all(this.userCollection.pluck("id"))&&a.isEmpty(this.userCollection.invalidUsers)||(t.cancel=!0,r.confirm(e("Discard unsaved changes?"),e("Are you sure you want to close the dialog? Any unsaved changes will be lost."),(function(){return n.close(),!0}),(function(){return!0})))}}}})),r.UserManagement(!0).resizeTo(s.stdW.md,s.stdH.md)}}},s.UserManagement}.apply(t,a))||(e.exports=r)},17727:(e,t,n)=>{var a=n(82109),r=n(31913),i=n(13366),o=n(47293),s=n(35005),l=n(36707),d=n(69478),c=n(31320);a({target:"Promise",proto:!0,real:!0,forced:!!i&&o((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return d(t,e()).then((function(){return n}))}:e,n?function(n){return d(t,e()).then((function(){throw n}))}:e)}}),r||"function"!=typeof i||i.prototype.finally||c(i.prototype,"finally",s("Promise").prototype.finally)},8012:t=>{t.exports=e},1506:e=>{e.exports=t},96481:e=>{e.exports=n},34622:e=>{e.exports=a},6537:e=>{e.exports=r},52536:e=>{e.exports=i}},s={};function l(e){if(s[e])return s[e].exports;var t=s[e]={id:e,loaded:!1,exports:{}};return o[e].call(t.exports,t,t.exports,l),t.loaded=!0,t.exports}return l.m=o,l.x=e=>{},l.d=(e,t)=>{for(var n in t)l.o(t,n)&&!l.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),l.j=325,(()=>{var e={325:0,528:0,602:0,361:0},t=[[63586,688,160,196,619]],n=e=>{},a=(a,r)=>{for(var i,o,[s,d,c,u]=r,p=0,f=[];p<s.length;p++)o=s[p],l.o(e,o)&&e[o]&&f.push(e[o][0]),e[o]=0;for(i in d)l.o(d,i)&&(l.m[i]=d[i]);for(c&&c(l),a&&a(r);f.length;)f.shift()();return u&&t.push.apply(t,u),n()},r=self.webpackChunk=self.webpackChunk||[];function i(){for(var n,a=0;a<t.length;a++){for(var r=t[a],i=!0,o=1;o<r.length;o++){var s=r[o];0!==e[s]&&(i=!1)}i&&(t.splice(a--,1),n=l(l.s=r[0]))}return 0===t.length&&(l.x(),l.x=e=>{}),n}r.forEach(a.bind(null,0)),r.push=a.bind(null,r.push.bind(r));var o=l.x;l.x=()=>(l.x=o||(e=>{}),(n=i)())})(),l.x()})().default));
//# sourceMappingURL=app.bundle.js.map